<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Djangoè¿›é˜¶</title>
    <url>/2020/01/12/Django%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<p>Djangoè¿›é˜¶å’ŒAPIæ¥å£</p>
<a id="more"></a>

<h1 id="ä¸€ä¸¶-å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨"><a href="#ä¸€ä¸¶-å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨" class="headerlink" title="ä¸€ä¸¶ å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨"></a>ä¸€ä¸¶ å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨</h1><h2 id="1-pipå…¨å±€ä½¿ç”¨è±†ç“£é•œåƒè®¾ç½®"><a href="#1-pipå…¨å±€ä½¿ç”¨è±†ç“£é•œåƒè®¾ç½®" class="headerlink" title="1. pipå…¨å±€ä½¿ç”¨è±†ç“£é•œåƒè®¾ç½®"></a>1. pipå…¨å±€ä½¿ç”¨è±†ç“£é•œåƒè®¾ç½®</h2><h3 id="windowsç³»ç»Ÿä¸­"><a href="#windowsç³»ç»Ÿä¸­" class="headerlink" title="windowsç³»ç»Ÿä¸­"></a>windowsç³»ç»Ÿä¸­</h3><p>â‘ åœ¨cç›˜â€”&gt;ç”¨æˆ·â€”&gt;anjhonâ€”&gt;æ–‡ä»¶å¤¹ä¸­åˆ›å»ºpipæ–‡ä»¶å¤¹<br>â‘¡åœ¨pipæ–‡ä»¶å¤¹ä¸­åˆ›å»ºpip.iniæ–‡ä»¶<br>â‘¢åœ¨pip.iniæ–‡ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç </p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line"><span class="built_in">index</span>-url=http<span class="variable">s:</span>//pypi.doubanio.<span class="keyword">com</span>/simple</span><br></pre></td></tr></table></figure>

<h3 id="gitä¸­"><a href="#gitä¸­" class="headerlink" title="gitä¸­"></a>gitä¸­</h3><p>cd ~   (è¿›å…¥ç”¨æˆ·ç»„ç›®å½•)<br>è¿›å…¥.pipæ–‡ä»¶å¤¹(æ²¡æœ‰å°±åˆ›å»º)<br>åˆ›å»ºpip.confæ–‡ä»¶<br>åœ¨æ–‡ä»¶å†…æ·»åŠ ä»¥ä¸‹ä»£ç </p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">[<span class="keyword">global</span>]</span><br><span class="line"><span class="built_in">index</span>-url=http<span class="variable">s:</span>//pypi.doubanio.<span class="keyword">com</span>/simple</span><br></pre></td></tr></table></figure>

<h2 id="2-è°ƒè¯•å·¥å…·Debug-Tool-Barå®‰è£…"><a href="#2-è°ƒè¯•å·¥å…·Debug-Tool-Barå®‰è£…" class="headerlink" title="2. è°ƒè¯•å·¥å…·Debug-Tool-Barå®‰è£…"></a>2. è°ƒè¯•å·¥å…·Debug-Tool-Barå®‰è£…</h2><ol>
<li>å®‰è£…ï¼š<figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">install </span>django-<span class="built_in">debug</span>-toolbar</span><br></pre></td></tr></table></figure></li>
<li>æ·»åŠ app<figure class="highlight diff"><figcaption><span>settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line">'debug_toolbar',</span><br></pre></td></tr></table></figure></li>
<li>æ·»åŠ ä¸­é—´é”®<figure class="highlight diff"><figcaption><span>settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line">'debug_toolbar.middleware.DebugToolbarMiddleware',</span><br></pre></td></tr></table></figure></li>
<li>é…ç½®å‰ç«¯æ•ˆæœï¼š<figure class="highlight diff"><figcaption><span>setting.py</span></figcaption><table><tr><td class="code"><pre><span class="line">DEBUG_TOOLBAR_CONFIG = &#123;</span><br><span class="line">    # å¼•å…¥jQueryåº“</span><br><span class="line">    'JQUERY_URL': 'https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js',</span><br><span class="line">    # å·¥å…·æ æ˜¯å¦æŠ˜å </span><br><span class="line">    'SHOW_COLLAPSED': True,</span><br><span class="line">    # æ˜¯å¦æ˜¾ç¤ºå·¥å…·æ </span><br><span class="line">    'SHOW_TOOLBAR_CALLBACK': lambda x: True,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>è·¯ç”±é…ç½®<figure class="highlight diff"><figcaption><span>urls.py</span></figcaption><table><tr><td class="code"><pre><span class="line">if settings.DEBUG:</span><br><span class="line">    import debug_toolbar</span><br><span class="line">	urlpatterns.insert(0, path('__debug__/', include(debug_toolbar.urls)))</span><br></pre></td></tr></table></figure>


</li>
</ol>
<h1 id="äºŒä¸¶-Djangoç”¨æ³•è¿›é˜¶"><a href="#äºŒä¸¶-Djangoç”¨æ³•è¿›é˜¶" class="headerlink" title="äºŒä¸¶ Djangoç”¨æ³•è¿›é˜¶"></a>äºŒä¸¶ Djangoç”¨æ³•è¿›é˜¶</h1><h2 id="1-djangoè‡ªå¸¦åˆ†é¡µå™¨"><a href="#1-djangoè‡ªå¸¦åˆ†é¡µå™¨" class="headerlink" title="1. djangoè‡ªå¸¦åˆ†é¡µå™¨"></a>1. djangoè‡ªå¸¦åˆ†é¡µå™¨</h2><figure class="highlight xl"><table><tr><td class="code"><pre><span class="line"># å¯¼å…¥åˆ†é¡µå·¥å…·</span><br><span class="line">from django.core.paginator <span class="keyword">import</span> Paginator</span><br><span class="line"></span><br><span class="line"># è°ƒç”¨åˆ†é¡µå™¨å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡</span><br><span class="line">page_obj = = Paginator(obj_list, per_page)</span><br><span class="line">	obj_listæ˜¯éœ€è¦åˆ†é¡µçš„å†…å®¹</span><br><span class="line">	per_pageæ˜¯æ¯é¡µçš„å†…å®¹æ•°é‡,ä¸€èˆ¬ä¸ºintç±»å‹</span><br><span class="line">	</span><br><span class="line"># å¯¹è±¡çš„ä½¿ç”¨æ–¹æ³•</span><br><span class="line"><span class="function"><span class="title">page_obj</span>.has_previous  ---&gt;</span>  æ˜¯å¦å­˜åœ¨å‰ä¸€é¡µï¼ˆå¸ƒå°”å€¼ï¼‰</span><br><span class="line"><span class="function"><span class="title">page_obj</span>.has_next  ---&gt;</span>  æ˜¯å¦å­˜åœ¨ä¸‹ä¸€é¡µï¼ˆå¸ƒå°”å€¼ï¼‰</span><br><span class="line"><span class="function"><span class="title">page_obj</span>.previous_page_number  ---&gt;</span>  å‰ä¸€é¡µçš„é¡µç ï¼ˆæ•°å€¼ï¼‰</span><br><span class="line"><span class="function"><span class="title">page_obj</span>.next_page_number  ---&gt;</span>  ä¸‹ä¸€é¡µçš„é¡µç ï¼ˆæ•°å€¼ï¼‰</span><br><span class="line"><span class="function"><span class="title">page_obj</span>.number  ---&gt;</span>  å½“å‰é¡µçš„é¡µç ï¼ˆæ•°å€¼ï¼‰</span><br><span class="line"><span class="function"><span class="title">page_obj</span>.get_page(<span class="built_in">page</span>)  ---&gt;</span>  ???</span><br><span class="line"><span class="function"><span class="title">page_obj</span>.<span class="built_in">page</span>(3)  ---&gt;</span>  è®¿é—®æŒ‡å®šé¡µé¢</span><br><span class="line"><span class="function"><span class="title">page2</span>.start_index()  ---&gt;</span>  ä»<span class="number">1</span>å¼€å§‹è®¡æ•°çš„å½“å‰é¡µçš„ç¬¬ä¸€ä¸ªå¯¹è±¡</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="function"><span class="title">page2</span>.end_index()  ---&gt;</span>  ä»<span class="number">1</span>å¼€å§‹è®¡æ•°çš„å½“å‰é¡µæœ€å<span class="number">1</span>ä¸ªå¯¹è±¡</span><br><span class="line"><span class="function"><span class="title">paginator</span>.page_range  ---&gt;</span>  é¡µç èŒƒå›´ï¼ˆè¿­ä»£å¯¹è±¡ï¼‰</span><br><span class="line"><span class="function"><span class="title">paginator</span>.num_pages  ---&gt;</span>  é¡µé¢æ€»æ•°é‡ï¼ˆæ•°å€¼ï¼‰</span><br></pre></td></tr></table></figure>

<h2 id="2-æŸ¥è¯¢-æŸ¥è¯¢ç»“æœæ˜¯é›†åˆç±»å‹çš„å¯¹è±¡"><a href="#2-æŸ¥è¯¢-æŸ¥è¯¢ç»“æœæ˜¯é›†åˆç±»å‹çš„å¯¹è±¡" class="headerlink" title="2. æŸ¥è¯¢(æŸ¥è¯¢ç»“æœæ˜¯é›†åˆç±»å‹çš„å¯¹è±¡)"></a>2. æŸ¥è¯¢(æŸ¥è¯¢ç»“æœæ˜¯é›†åˆç±»å‹çš„å¯¹è±¡)</h2><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">Entry.objects.all()   ---&gt;   æŸ¥è¯¢æ‰€æœ‰è®°å½•</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæŸ¥è¯¢:only</span></span><br><span class="line">queryset = Teacher.objects.filter(<span class="attribute">subject__no</span>=sno).only('', <span class="string">''</span>, <span class="string">''</span>)</span><br><span class="line"><span class="comment"># æ’é™¤æŸ¥è¯¢:defer</span></span><br><span class="line">queryset = Teacher.objects.filter(<span class="attribute">subject__no</span>=sno).defer('', <span class="string">''</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç©ºå€¼æŸ¥è¯¢:</span></span><br><span class="line">District.objects.filter(<span class="attribute">pid__null</span>=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ¡ä»¶æŸ¥è¯¢:</span></span><br><span class="line">Entry.objects.filter(<span class="attribute">num</span>=3)   ---&gt;   æŸ¥è¯¢<span class="attribute">num</span>=3çš„æ•°æ®è®°å½•</span><br><span class="line">Entry.objects.exclude(<span class="attribute">num</span>=3)   ---&gt;   æŸ¥è¯¢<span class="attribute">num</span>=3çš„æ•°æ®è®°å½•</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨åˆ‡ç‰‡çš„æ–¹æ³•å¯ä»¥è¿›è¡ŒèŒƒå›´å–å€¼,ç›¸å½“äºSQLè¯­å¥ä¸­çš„LIMITå’ŒOFFSETå­å¥</span></span><br><span class="line">Entry.objects.all()[:5]   ---&gt;   è¿”å›å‰5ä¸ªå¯¹è±¡</span><br><span class="line">Entry.objects.all()[5:10]   ---&gt;   è¿”å›ç¬¬6ä¸ªåˆ°ç¬¬10ä¸ªå¯¹è±¡</span><br><span class="line"></span><br><span class="line"><span class="comment"># å…³é”®å­—æŸ¥è¯¢:</span></span><br><span class="line">1) ç²¾ç¡®æŸ¥è¯¢: __exact (é»˜è®¤å°±æ˜¯ç²¾å‡†æŸ¥è¯¢,å¯ä»¥ä¸å†™)</span><br><span class="line">Entry.objects.<span class="builtin-name">get</span>(<span class="attribute">headline__exact</span>=<span class="string">"Cat bites dog"</span>)</span><br><span class="line">2) æ¨¡ç³ŠæŸ¥è¯¢</span><br><span class="line">__containsï¼šæ˜¯å¦åŒ…å«</span><br><span class="line">__startswith: ä»¥æŒ‡å®šå€¼å¼€å¤´</span><br><span class="line">__endswithï¼šä»¥æŒ‡å®šå€¼ç»“å°¾</span><br><span class="line">3) ç©ºæŸ¥è¯¢</span><br><span class="line">isnullï¼šæ˜¯å¦ä¸º<span class="literal">null</span></span><br><span class="line">4) èŒƒå›´æŸ¥è¯¢</span><br><span class="line"><span class="keyword">in</span>ï¼šæ˜¯å¦åŒ…å«åœ¨èŒƒå›´å†…</span><br><span class="line">5) æ¯”è¾ƒæŸ¥è¯¢</span><br><span class="line">gtã€gteã€ltã€lteï¼šå¤§äºã€å¤§äºç­‰äºã€å°äºã€å°äºç­‰äº</span><br><span class="line">6) æ—¥æœŸæŸ¥è¯¢</span><br><span class="line">yearã€monthã€dayã€week_dayã€hourã€minuteã€secondï¼šå¯¹æ—¥æœŸæ—¶é—´ç±»å‹çš„å±æ€§è¿›è¡Œè¿ç®—</span><br><span class="line">7) ä¸åŒºåˆ†å¤§å°å†™: __iexact</span><br><span class="line">Entry.objects.<span class="builtin-name">get</span>(<span class="attribute">name__iexact</span>=<span class="string">"beatles blog"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Qå¯¹è±¡æŸ¥è¯¢</span></span><br><span class="line">åœ¨æŸ¥è¯¢çš„æ¡ä»¶ä¸­éœ€è¦ç»„åˆæ¡ä»¶æ—¶(ä¾‹å¦‚ä¸¤ä¸ªæ¡ä»¶â€œä¸”â€æˆ–è€…â€œæˆ–â€)ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Q()æŸ¥è¯¢å¯¹è±¡</span><br><span class="line"><span class="keyword">from</span> django.db.models import Q</span><br><span class="line">Q(<span class="attribute">question__startswith</span>=<span class="string">'What'</span>)</span><br><span class="line">å¯ä»¥åœ¨Q()å¯¹è±¡çš„å‰é¢ä½¿ç”¨å­—ç¬¦â€œ~â€æ¥ä»£è¡¨æ„ä¹‰â€œéâ€</span><br><span class="line">å¯ä»¥ä½¿ç”¨ â€œ&amp;â€æˆ–è€…â€œ|â€è¿˜æœ‰æ‹¬å·æ¥å¯¹æ¡ä»¶è¿›è¡Œåˆ†ç»„ä»è€Œç»„åˆæˆæ›´åŠ å¤æ‚çš„æŸ¥è¯¢é€»è¾‘</span><br><span class="line">Q(<span class="attribute">question__startswith</span>=<span class="string">'Who'</span>) | Q(<span class="attribute">question__startswith</span>=<span class="string">'What'</span>)</span><br><span class="line">ä¾‹:</span><br><span class="line">	queryset = Record.objects.filter(Q(<span class="attribute">car__carno__startswith</span>=carno) | Q(<span class="attribute">car__owner__contains</span>=carno)).select_related('car').order_by('-offend_time')[(page - 1) * size:page * size]</span><br><span class="line">	context[<span class="string">'records'</span>] = queryset</span><br><span class="line">	# .select_related(<span class="string">'car'</span>)   åœ¨Qå¯¹è±¡ä¸­car__carnoå·²ç»å®ç°è¿è¡¨æŸ¥è¯¢,è¿™æ—¶å†ç”¨.select_related(<span class="string">'car'</span>)è¯­æ³•è¿åŒcarä¸€èµ·æŸ¥è¯¢</span><br><span class="line">	</span><br><span class="line">	.prefetch_related(<span class="string">'...'</span>)   ---&gt;   å¤šå¯¹å¤šé¡ºå¸¦æŸ¥è¯¢</span><br><span class="line">	.select_related(<span class="string">'...'</span>)   ---&gt;   ä¸€å¯¹å¤šé¡ºå¸¦æŸ¥è¯¢</span><br><span class="line">	é¿å…1+nå‡ºç°</span><br></pre></td></tr></table></figure>

<h2 id="3-Vue"><a href="#3-Vue" class="headerlink" title="3. Vue"></a>3. Vue</h2><figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml">1. å±æ€§:</span></span><br><span class="line"><span class="xml">1) elå±æ€§  -   å­—ç¬¦ä¸²ï¼Œä¼ é€‰æ‹©å™¨(ä¸€èˆ¬å†™idé€‰æ‹©å™¨), å°†å½“å‰åˆ›å»ºçš„Vueå¯¹è±¡å’Œhtmlä¸­çš„æ ‡ç­¾è¿›è¡Œå…³è”</span></span><br><span class="line"><span class="xml">2) dataå±æ€§  -  é€šè¿‡å¯¹è±¡çš„å±æ€§æä¾›æ•°æ®</span></span><br><span class="line"><span class="xml">3) methodså±æ€§ -  é€šè¿‡å¯¹è±¡å±æ€§æä¾›æ–¹æ³•</span></span><br><span class="line"><span class="xml">4) computedå±æ€§ -  å±æ€§å€¼å¿…é¡»å‡½æ•°, å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯ä½¿ç”¨å±æ€§çš„å€¼</span></span><br><span class="line"><span class="xml">5) createdé’©å­ - åœ¨å®ä¾‹è¢«åˆ›å»ºä¹‹åè¢«è°ƒç”¨</span></span><br><span class="line"><span class="xml">	</span></span><br><span class="line"><span class="xml">2. VueæŒ‡ä»¤</span></span><br><span class="line"><span class="xml">1) æ ‡ç­¾å†…å®¹  -  </span><span class="template-variable">&#123;&#123;Vueå±æ€§å&#125;&#125;</span></span><br><span class="line"><span class="xml">2) æ ‡ç­¾å±æ€§  -  v-bind:æ ‡ç­¾å±æ€§ = 'Vueå±æ€§å'</span></span><br><span class="line"><span class="xml">3) ifè¯­å¥   -  v-if='Vueå±æ€§å' (å¦‚æœVueå±æ€§å€¼æ˜¯trueå¯¹åº”çš„æ ‡ç­¾å°±æ˜¾ç¤ºï¼Œå¦åˆ™å°±éšè—)</span></span><br><span class="line"><span class="xml">4) å¾ªç¯ç»“æ„  -  v-for = 'å˜é‡ in ç±»å‹æ˜¯æ•°ç»„çš„Vueå±æ€§'</span></span><br><span class="line"><span class="xml">5) åŒå‘ç»‘å®š  -  v-model='Vueå±æ€§å' (ä¸€èˆ¬åœ¨è¡¨å•æ ‡ç­¾ä¸­æœ‰æ•ˆ)</span></span><br><span class="line"><span class="xml">6) äº‹ä»¶ç»‘å®š  -  v-on:äº‹ä»¶å</span></span><br><span class="line"></span><br><span class="line"><span class="xml">3. è¡¥å……</span></span><br><span class="line"><span class="xml">1) å¯ä»¥ç›´æ¥åœ¨æ ‡ç­¾å†…ç”¨ @äº‹ä»¶å çš„æ–¹æ³•ç»‘å®šäº‹ä»¶,å¹¶ç›´æ¥è°ƒç”¨äº‹ä»¶å‡½æ•°</span></span><br><span class="line"><span class="xml">	ä¾‹:<span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"prevPage()"</span>&gt;</span>ä¸Šä¸€é¡µ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">2) ç¼©å†™</span></span><br><span class="line"><span class="xml">v-bind ç¼©å†™</span></span><br><span class="line"><span class="xml">	<span class="comment">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">v-bind:href</span>=<span class="string">"url"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="comment">&lt;!-- ç¼©å†™ --&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">:href</span>=<span class="string">"url"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">v-on ç¼©å†™</span></span><br><span class="line"><span class="xml">	<span class="comment">&lt;!-- å®Œæ•´è¯­æ³• --&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">a</span> <span class="attr">v-on:click</span>=<span class="string">"doSomething"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="comment">&lt;!-- ç¼©å†™ --&gt;</span></span></span><br><span class="line"><span class="xml">	<span class="tag">&lt;<span class="name">a</span> @<span class="attr">click</span>=<span class="string">"doSomething"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="4-å­—æ®µæ˜ å°„å™¨bpmapper-å°†æ•°æ®åº“çš„æŸ¥è¯¢å¯¹è±¡è½¬æ¢æˆå­—å…¸"><a href="#4-å­—æ®µæ˜ å°„å™¨bpmapper-å°†æ•°æ®åº“çš„æŸ¥è¯¢å¯¹è±¡è½¬æ¢æˆå­—å…¸" class="headerlink" title="4. å­—æ®µæ˜ å°„å™¨bpmapper:  å°†æ•°æ®åº“çš„æŸ¥è¯¢å¯¹è±¡è½¬æ¢æˆå­—å…¸"></a>4. å­—æ®µæ˜ å°„å™¨bpmapper:  å°†æ•°æ®åº“çš„æŸ¥è¯¢å¯¹è±¡è½¬æ¢æˆå­—å…¸</h2><p>1) åœ¨åº”ç”¨æ–‡ä»¶å¤¹ä¸‹æ–°å»ºæ˜ å°„å™¨æ–‡ä»¶ : mappers.py</p>
<figure class="highlight diff"><figcaption><span>app/mappers.py</span></figcaption><table><tr><td class="code"><pre><span class="line">from bpmappers import RawField, DelegateField</span><br><span class="line">from bpmappers.djangomodel import ModelMapper</span><br><span class="line">from polls.models import Subject, Teacher</span><br><span class="line"></span><br><span class="line">class SubjectMapper(ModelMapper):</span><br><span class="line">    """å­¦ç§‘æ˜ å°„å™¨"""</span><br><span class="line">    isHot = RawField('is_hot')</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        model = Subject</span><br><span class="line">        exclude = ('is_hot', )</span><br><span class="line">        </span><br><span class="line">    exclude = ()   ---&gt;   æ’é™¤æŸäº›å­—æ®µ</span><br><span class="line">	fields = ()   ---&gt;   åŒ…å«æŸäº›å­—æ®µ</span><br><span class="line">	fields = '__all__'   ---&gt;   åºåˆ—åŒ–æ‰€æœ‰å­—æ®µ</span><br><span class="line">	isHot = RawField('is_hot')   ---&gt;   å°†åç«¯çš„is_hotæ˜ å°„æˆå‰ç«¯çš„isHot</span><br><span class="line">	car = DelegateField(Car)   ---&gt;   å°†carå­—æ®µå§”æ‰˜Carç±»æŸ¥è¯¢æ˜ å°„</span><br></pre></td></tr></table></figure>
<p>2) è°ƒç”¨æ˜ å°„å™¨</p>
<figure class="highlight diff"><figcaption><span>app/views.py</span></figcaption><table><tr><td class="code"><pre><span class="line">from polls.mappers import SubjectMapper</span><br><span class="line"></span><br><span class="line">def show_subjects(request):</span><br><span class="line">    """è·å–æ‰€æœ‰å­¦ç§‘"""</span><br><span class="line">    queryset = Subject.objects.all()</span><br><span class="line">    subjects = [SubjectMapper(subject).as_dict()   # è°ƒç”¨æ˜ å°„å™¨å‡½æ•°å°†æŸ¥è¯¢å¯¹è±¡å˜æˆæœ‰åºå­—å…¸</span><br><span class="line">                for subject in queryset]</span><br><span class="line">    return JsonResponse(subjects, safe=False)</span><br></pre></td></tr></table></figure>

<p>JsonResponseé»˜è®¤åªèƒ½è¿”å›å­—å…¸,è‹¥æƒ³è¿”å›åˆ—è¡¨éœ€è¦ç»™ä¸€ä¸ªå‚æ•°safe=False</p>
<figure class="highlight reasonml"><table><tr><td class="code"><pre><span class="line">return <span class="constructor">JsonResponse(<span class="params">subjects</span>, <span class="params">safe</span>=False)</span></span><br></pre></td></tr></table></figure>

<p>åˆ—è¡¨ç”Ÿæˆå¼è¯­æ³•: (æ€§èƒ½æ¯”åˆ—è¡¨è¿½åŠ å…ƒç´ è¦å¥½)</p>
<figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">records = [RecordMapper(<span class="keyword">record</span>).as_dict()</span><br><span class="line">           <span class="keyword">for</span> <span class="keyword">record</span> <span class="keyword">in</span> page_obj.object_list]</span><br><span class="line"># ä»page_obj.object_listä¸­å–å…ƒç´ <span class="keyword">record</span>, å°†<span class="keyword">record</span>ä¼ ç»™RecordMapper().as_dict()è½¬æ¢æˆå­—å…¸å†æ·»åŠ åˆ°recordsé‡Œé¢</span><br></pre></td></tr></table></figure>


<h2 id="5-fetchè¯·æ±‚"><a href="#5-fetchè¯·æ±‚" class="headerlink" title="5.  fetchè¯·æ±‚"></a>5.  fetchè¯·æ±‚</h2><p>åŸºæœ¬è¯­æ³•:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">fetch(<span class="string">'http://example.com/movies.json'</span>)   <span class="comment"># è¿”å›ä¸€ä¸ªåŒ…å«å“åº”ç»“æœçš„promise</span></span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span><span class="params">(response)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> response.json();</span><br><span class="line">  &#125;)   <span class="comment"># ç”¨.json()æ–¹æ³•è·å–åˆ°çš„åŒ…å«jsonæ•°æ®çš„å¯¹è±¡</span></span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span><span class="params">(myJson)</span> </span>&#123;</span><br><span class="line">    console.log(myJson);</span><br><span class="line">  &#125;);   <span class="comment"># è·å–åˆ°jsonæ–‡ä»¶é‡Œçš„çœŸå®æ•°æ®</span></span><br></pre></td></tr></table></figure>
<p>å®ä¾‹:</p>
<figure class="highlight kotlin"><table><tr><td class="code"><pre><span class="line">let app = new Vue(&#123;</span><br><span class="line">			el: <span class="string">'#app'</span>,</span><br><span class="line">			<span class="keyword">data</span>: &#123;</span><br><span class="line">				<span class="string">'searched'</span>: <span class="literal">false</span>,</span><br><span class="line">				records: [],</span><br><span class="line">				current_page: <span class="number">1</span>,</span><br><span class="line">				total_page: <span class="number">0</span>,</span><br><span class="line">				carno: <span class="string">''</span></span><br><span class="line">				</span><br><span class="line">			&#125;,</span><br><span class="line">			methods: &#123;</span><br><span class="line">				search()&#123;</span><br><span class="line">					let url = <span class="string">'/search/?carno='</span> + <span class="keyword">this</span>.carno + <span class="string">'&amp;page='</span> + <span class="keyword">this</span>.current_page</span><br><span class="line">					fetch(url).then(resp =&gt; resp.json()).then(json =&gt; &#123;</span><br><span class="line">						<span class="keyword">this</span>.searched = json.searched;</span><br><span class="line">						<span class="keyword">this</span>.records = json.records;</span><br><span class="line">						<span class="keyword">this</span>.current_page = json.current_page;</span><br><span class="line">						<span class="keyword">this</span>.total_page = json.total_page</span><br><span class="line">					&#125;)</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">	# æ³¨:<span class="keyword">this</span>ä»£è¡¨appå¯¹è±¡</span><br></pre></td></tr></table></figure>


<h2 id="6-é…ç½®redisæ•°æ®åº“ä½œä¸ºç¼“å­˜"><a href="#6-é…ç½®redisæ•°æ®åº“ä½œä¸ºç¼“å­˜" class="headerlink" title="6. é…ç½®redisæ•°æ®åº“ä½œä¸ºç¼“å­˜"></a>6. é…ç½®redisæ•°æ®åº“ä½œä¸ºç¼“å­˜</h2><h3 id="1-redisé…ç½®-æ·»åŠ ä»¥ä¸‹ä»£ç "><a href="#1-redisé…ç½®-æ·»åŠ ä»¥ä¸‹ä»£ç " class="headerlink" title="1. redisé…ç½®(æ·»åŠ ä»¥ä¸‹ä»£ç )"></a>1. redisé…ç½®(æ·»åŠ ä»¥ä¸‹ä»£ç )</h3><figure class="highlight diff"><figcaption><span>project/settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line"># æ·»åŠ ç¼“å­˜(å¯ä»¥é…å¤šç»„)</span><br><span class="line">CACHES = &#123;</span><br><span class="line">    # é»˜è®¤ç¼“å­˜</span><br><span class="line">    'default': &#123;</span><br><span class="line">        # ç”¨ä»€ä¹ˆæ¥åšç¼“å­˜</span><br><span class="line">        'BACKEND': 'django_redis.cache.RedisCache',</span><br><span class="line">        'LOCATION': [</span><br><span class="line">            # å¯ä»¥ä¸€ä¸»å¤šä»</span><br><span class="line">            'redis://49.233.152.190:6379/0',   # ä¸»æœºç”¨æ¥å†™</span><br><span class="line">            'redis://49.233.152.190:6379/0',   # ä»æœºç”¨æ¥è¯»(å¯ä»¥æœ‰å¤šä¸ª)</span><br><span class="line">        ],</span><br><span class="line">        # åŒºåˆ«å‘½å</span><br><span class="line">        'KEY_PREFIX': 'django19062',</span><br><span class="line">        'OPTIONS': &#123;</span><br><span class="line">            'CLIENT_CLASS': 'django_redis.client.DefaultClient',</span><br><span class="line"></span><br><span class="line">            # æ± åŒ–æŠ€æœ¯(æå‰è¿æ¥å¥½,è¦ç”¨æ—¶å€Ÿå‡ºå»,ç”¨å®Œè¿˜å›æ¥)ç”¨ç©ºé—´æ¢æ—¶é—´</span><br><span class="line">            'CONNECTION_POOL_KWARGS': &#123;</span><br><span class="line">                # æœ€å¤§è¿æ¥æ•°</span><br><span class="line">                'max_connections': 512,</span><br><span class="line">            &#125;,</span><br><span class="line">            'PASSWORD': '119148',</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    # ä¼šè¯ç¼“å­˜(ä¼šè¯æ”¾åˆ°ç¼“å­˜çš„å¥½å¤„:  æ€§èƒ½å¥½,ä¸ç”¨æ‰‹åŠ¨æ¸…ç†,åˆ©äºæ°´å¹³æ‰©å±•)</span><br><span class="line">    'session': &#123;</span><br><span class="line">        # ç”¨ä»€ä¹ˆæ¥åšç¼“å­˜</span><br><span class="line">        'BACKEND': 'django_redis.cache.RedisCache',</span><br><span class="line">        'LOCATION': [</span><br><span class="line">            # å¯ä»¥ä¸€ä¸»å¤šä»</span><br><span class="line">            'redis://49.233.152.190:6379/1',   # ä¸»æœºç”¨æ¥å†™</span><br><span class="line">            # 'redis://49.233.152.190:6379/0',   # ä»æœºç”¨æ¥è¯»(å¯ä»¥æœ‰å¤šä¸ª)</span><br><span class="line">        ],</span><br><span class="line">        # é”®çš„å‰ç¼€</span><br><span class="line">        'KEY_PREFIX': 'django19062',</span><br><span class="line">        'OPTIONS': &#123;</span><br><span class="line">            'CLIENT_CLASS': 'django_redis.client.DefaultClient',</span><br><span class="line"></span><br><span class="line">            # æ± åŒ–æŠ€æœ¯(æå‰è¿æ¥å¥½,è¦ç”¨æ—¶å€Ÿå‡ºå»,ç”¨å®Œè¿˜å›æ¥)ç”¨ç©ºé—´æ¢æ—¶é—´</span><br><span class="line">            'CONNECTION_POOL_KWARGS': &#123;</span><br><span class="line">                # æœ€å¤§è¿æ¥æ•°</span><br><span class="line">                'max_connections': 1024,</span><br><span class="line">            &#125;,</span><br><span class="line">            'PASSWORD': '119148',</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># é…ç½®ä½¿ç”¨ç¼“å­˜æ¥æ”¯æŒç”¨æˆ·ä¼šè¯</span><br><span class="line">SESSION_ENGINE = 'django.contrib.sessions.backends.cache'</span><br><span class="line"># ä¼šè¯æ•°æ®æ”¾åœ¨å“ªä¸€ç»„ç¼“å­˜ä¸­</span><br><span class="line">SESSION_CACHE_ALIAS = 'session'</span><br><span class="line"># è®¾ç½®ä¼šè¯ä¿å­˜çš„æ—¶é•¿(å•ä½ç§’)</span><br><span class="line">SESSION_CACHE_AGE = 86400  # 86400ç§’ä¸º1å¤©</span><br></pre></td></tr></table></figure>

<h3 id="2-ä¸ºè§†å›¾å‡½æ•°-æ·»åŠ ç¼“å­˜æœºåˆ¶"><a href="#2-ä¸ºè§†å›¾å‡½æ•°-æ·»åŠ ç¼“å­˜æœºåˆ¶" class="headerlink" title="2. ä¸ºè§†å›¾å‡½æ•° æ·»åŠ ç¼“å­˜æœºåˆ¶"></a>2. ä¸ºè§†å›¾å‡½æ•° æ·»åŠ ç¼“å­˜æœºåˆ¶</h3><figure class="highlight diff"><figcaption><span>app/views.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="addition">+ 	@cache_page(timeout=3600, cache='default')</span></span><br><span class="line">    def show_subjects(request):</span><br><span class="line">        """è·å–æ‰€æœ‰å­¦ç§‘"""</span><br><span class="line">        queryset = Subject.objects.all()</span><br><span class="line">        subjects = [SubjectMapper(subject).as_dict()</span><br><span class="line">                    for subject in queryset]</span><br><span class="line">        return JsonResponse(subjects, safe=False)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="addition">+   @cache_page(timeout=300, cache='default')</span></span><br><span class="line">    def show_teachers(request):</span><br><span class="line">        """è·å–æŒ‡å®šå­¦ç§‘çš„è€å¸ˆ"""</span><br><span class="line">        try:</span><br><span class="line">            sno = request.GET['sno']</span><br><span class="line">            subject = Subject.objects.get(no=sno)</span><br><span class="line">            queryset = Teacher.objects\</span><br><span class="line">                .filter(subject__no=sno).defer('subject')</span><br><span class="line">            teachers = [TeacherMapper(teacher).as_dict()</span><br><span class="line">                        for teacher in queryset]</span><br><span class="line">            data = &#123;</span><br><span class="line">                'subject': SubjectSimpleMapper(subject).as_dict(),</span><br><span class="line">                'teachers': teachers</span><br><span class="line">            &#125;</span><br><span class="line">            return JsonResponse(data)</span><br><span class="line">        except (KeyError, ValueError, Subject.DoesNotExist):</span><br><span class="line">            pass</span><br></pre></td></tr></table></figure>
<p>å¦‚ä½ æ‰€è§,æ·»åŠ ç¼“å­˜æœºåˆ¶åªéœ€è°ƒç”¨ä¸€ä¸ªè£…é¥°å™¨å‡½æ•°å³å¯;åœ¨è°ƒç”¨æ—¶éœ€è¦ä¼ å‚,timeoutä¸ºè¶…æ—¶æ—¶é—´,åœ¨å›ºå®šæ—¶é—´åç¼“å­˜è‡ªåŠ¨æ¸…é™¤;cacheé€‰æ‹©ç¼“å­˜ç»„;</p>
<h3 id="3-æµ‹è¯•"><a href="#3-æµ‹è¯•" class="headerlink" title="3. æµ‹è¯•"></a>3. æµ‹è¯•</h3><p>å¼€å¯djangoæœåŠ¡,è®¿é—®å‰ç«¯é¡µé¢,ç„¶åè§‚å¯Ÿæ§åˆ¶å°</p>
<figure class="highlight n1ql"><table><tr><td class="code"><pre><span class="line"># ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶åœ¨æ§åˆ¶å°ä¸­ä¼šä½¿ç”¨<span class="keyword">select</span>è¯­å¥åœ¨mysqlä¸­æŸ¥è¯¢æ•°æ®</span><br><span class="line">(<span class="number">0.289</span>) <span class="keyword">SELECT</span> <span class="symbol">`tb_subject`</span>.<span class="symbol">`no`</span>, <span class="symbol">`tb_subject`</span>.<span class="symbol">`name`</span>, <span class="symbol">`tb_subject`</span>.<span class="symbol">`intro`</span>, <span class="symbol">`tb_subject`</span>.<span class="symbol">`is_hot`</span> <span class="keyword">FROM</span> <span class="symbol">`tb_subject`</span> <span class="keyword">WHERE</span> <span class="symbol">`tb_subject`</span>.<span class="symbol">`no`</span> = <span class="number">1</span>; args=(1,)</span><br><span class="line">(0.358) <span class="keyword">SELECT</span> <span class="symbol">`tb_teacher`</span>.<span class="symbol">`no`</span>, <span class="symbol">`tb_teacher`</span>.<span class="symbol">`name`</span>, <span class="symbol">`tb_teacher`</span>.<span class="symbol">`sex`</span>, <span class="symbol">`tb_teacher`</span>.<span class="symbol">`birth`</span>, <span class="symbol">`tb_teacher`</span>.<span class="symbol">`photo`</span>, <span class="symbol">`tb_teacher`</span>.<span class="symbol">`intro`</span>, <span class="symbol">`tb_teacher`</span>.<span class="symbol">`good_count`</span>, <span class="symbol">`tb_teacher`</span>.<span class="symbol">`bad_count`</span> <span class="keyword">FROM</span> <span class="symbol">`tb_teacher`</span> <span class="keyword">WHERE</span> <span class="symbol">`tb_teacher`</span>.<span class="symbol">`sno`</span> = <span class="number">1</span>; args=(1,)</span><br><span class="line"></span><br><span class="line"># å†æ¬¡åˆ·æ–°é¡µé¢æ—¶ç›´æ¥ä»ç¼“å­˜ä¸­è·å–æ•°æ®</span><br><span class="line">[08/Jan/2020 22:02:14] "GET /teachers/?sno=1 HTTP/1.1" 200 5605</span><br><span class="line">[08/Jan/2020 22:02:14] "GET /media/images/yuting.png HTTP/1.1" 304 0</span><br><span class="line">[08/Jan/2020 22:02:14] "GET /media/images/luohao.png HTTP/1.1" 304 0</span><br></pre></td></tr></table></figure>

<p>å®æ—¶æ•°æ®ç¼“å­˜åˆ°redis<br>åœ¨éœ€è¦å®æ—¶æ˜¾ç¤ºå¹¶ä¸”å¹¶å‘é‡è¾ƒå¤§æ—¶(ä¾‹å¦‚ç®€å•çš„æŠ•ç¥¨),è‹¥ç›´æ¥ä»sqlæ•°æ®åº“ä¸­å–å€¼åˆ™ä¼šå¤§å¤§å¢åŠ æ•°æ®åº“çš„å‹åŠ›,åŒæ—¶æœ‰ä¸€æ¡è¯·æ±‚åœ¨æ“ä½œæ•°æ®åº“çš„æ—¶å€™å°±ä¼šé”å®šè¯¥æ•°æ®,å®Œæˆåä¸‹ä¸€ä¸ªè¯·æ±‚æ‰èƒ½æ“ä½œ.<br>æ­¤æ—¶å°†æŠ•ç¥¨ä¿¡æ¯æ·»åŠ åˆ°ç¼“å­˜,å†åœ¨ç¼“å­˜å†…æ·»åŠ å®šæ—¶ä»»åŠ¡,å®šæ—¶æ¨é€ç¼“å­˜çš„æ•°æ®åˆ°æ•°æ®åº“ä¿å­˜,è¿™æ˜¯ä¸€ç§ç‰ºç‰²æš‚æ—¶ä¸€è‡´æ€§,è·å–æœ€ç»ˆä¸€è‡´æ€§å’Œæé«˜æ€§èƒ½çš„æ–¹æ³•</p>
<h1 id="ä¸‰ä¸¶-API-åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£"><a href="#ä¸‰ä¸¶-API-åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£" class="headerlink" title="ä¸‰ä¸¶ API  -  åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£"></a>ä¸‰ä¸¶ API  -  åº”ç”¨ç¨‹åºç¼–ç¨‹æ¥å£</h1><p>è‡ªå·±å®šä¹‰çš„å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§APIæ¥å£<br>ç½‘ç»œAPI   -   é€šè¿‡HTTè¯·æ±‚ä¸€ä¸ªURLè·å¾—æ•°æ®</p>
<p>RESTful API</p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">REpresentational State Transfer   <span class="comment">---&gt;   è¡¨è¿°æ€§çŠ¶æ€è½¬ç§»</span></span><br><span class="line">RESTæ¶æ„ä¸¤å¤§ç‰¹ç‚¹: æ— çŠ¶æ€å’Œå¹‚ç­‰æ€§</span><br><span class="line">HTTPåè®®è¯·æ±‚è¡Œ <span class="keyword">GET</span> / POST / <span class="keyword">DELETE</span> / PUT / PATCH</span><br><span class="line">æ–°å»º   <span class="comment">---&gt;   POST-ä¸éœ€è¦å¹‚ç­‰æ€§</span></span><br><span class="line">æŸ¥çœ‹   <span class="comment">---&gt;   GET</span></span><br><span class="line">æ›´æ–°   <span class="comment">---&gt;   PUT/PATCH</span></span><br><span class="line">åˆ é™¤   <span class="comment">---&gt;   DELETE</span></span><br></pre></td></tr></table></figure>

<h2 id="1-å‡†å¤‡å·¥ä½œ"><a href="#1-å‡†å¤‡å·¥ä½œ" class="headerlink" title="1. å‡†å¤‡å·¥ä½œ:"></a>1. å‡†å¤‡å·¥ä½œ:</h2><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line"><span class="number">1</span>) å®‰è£…djangorestframework</span><br><span class="line">pip <span class="keyword">install </span>djangorestframework</span><br><span class="line">pip <span class="keyword">install </span>drf-<span class="keyword">extensions</span></span><br><span class="line"><span class="keyword"></span></span><br><span class="line"><span class="keyword">2) </span>åœ¨<span class="keyword">INSTALLED_APPSæ³¨å†Œrest_framework</span></span><br><span class="line"><span class="keyword">INSTALLED_APPS </span>= [</span><br><span class="line">    <span class="string">'rest_framework'</span>,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="2-APIæ¥å£"><a href="#2-APIæ¥å£" class="headerlink" title="2. APIæ¥å£"></a>2. APIæ¥å£</h2><h3 id="1-FBV-åŸºäºå‡½æ•°çš„è§†å›¾"><a href="#1-FBV-åŸºäºå‡½æ•°çš„è§†å›¾" class="headerlink" title="1) FBV   -   åŸºäºå‡½æ•°çš„è§†å›¾"></a>1) FBV   -   åŸºäºå‡½æ•°çš„è§†å›¾</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># urls.py   æ§åˆ¶å™¨</span></span><br><span class="line">path(<span class="string">'agent/'</span>, get_agent),</span><br><span class="line"></span><br><span class="line"><span class="comment"># serializers.py  æ˜ å°„å™¨</span></span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> common.models <span class="keyword">import</span> Agent</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AgentSimpleSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Agent</span><br><span class="line">        exclude = (<span class="string">'estates'</span>, )</span><br><span class="line">        </span><br><span class="line"><span class="comment"># viewè§†å›¾å‡½æ•°:</span></span><br><span class="line"><span class="meta">@api_view(('GET', ))   # æŒ‡å®šè¯·æ±‚,å…¶ä»–è¯·æ±‚æ²¡æ•ˆæœ</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_agent</span><span class="params">(request)</span>:</span></span><br><span class="line">    queryset = Agent.objects.all().defer(<span class="string">'estates'</span>)</span><br><span class="line">    serializer = AgentSimpleSerializer(queryset, many=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> Response(serializer.data)</span><br></pre></td></tr></table></figure>


<h3 id="2-CBV-åŸºäºç±»çš„è§†å›¾"><a href="#2-CBV-åŸºäºç±»çš„è§†å›¾" class="headerlink" title="2) CBV   -   åŸºäºç±»çš„è§†å›¾"></a>2) CBV   -   åŸºäºç±»çš„è§†å›¾</h3><figure class="highlight pf"><table><tr><td class="code"><pre><span class="line"><span class="comment"># urls.py   æ§åˆ¶å™¨</span></span><br><span class="line">	path('estate/', EstatesView.as_view()),</span><br><span class="line">	path('estate/<span class="variable">&lt;int:pk&gt;</span>/', EstatesView.as_view())   <span class="comment"># pkå‚æ•°æ˜¯ä¸€ç§çº¦å®š,ä¸èƒ½ä¿®æ”¹</span></span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line"><span class="comment"># serializers.py  æ˜ å°„å™¨</span></span><br><span class="line"><span class="keyword">from</span> rest_framework import serializers</span><br><span class="line"><span class="keyword">from</span> common.models import E<span class="keyword">state</span></span><br><span class="line">class E<span class="keyword">state</span>Serializer(serializers.ModelSerializer):</span><br><span class="line">    class Meta:</span><br><span class="line">        model = E<span class="keyword">state</span></span><br><span class="line">        exclude = ('agents', 'district')</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># exclude = ()   ---&gt;   æ’é™¤æŸäº›å­—æ®µ</span></span><br><span class="line">	<span class="comment"># fields = ()   ---&gt;   åŒ…å«æŸäº›å­—æ®µ</span></span><br><span class="line">	<span class="comment"># fields = '__all__'   ---&gt;   åºåˆ—åŒ–æ‰€æœ‰å­—æ®µ</span></span><br><span class="line">	<span class="comment"># isHot = RawField('is_hot')   ---&gt;   å°†åç«¯çš„is_hotæ˜ å°„æˆå‰ç«¯çš„isHot</span></span><br><span class="line">	<span class="comment"># car = DelegateField(Car)   ---&gt;   å°†carå­—æ®µå§”æ‰˜Carç±»æŸ¥è¯¢æ˜ å°„</span></span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="comment"># view.py :</span></span><br><span class="line">class EstatesView(ListAPIView, RetrieveAPIView):</span><br><span class="line">    queryset = E<span class="keyword">state</span>.objects.<span class="literal">all</span>().defer('district', 'agents')</span><br><span class="line">    serializer_class = E<span class="keyword">state</span>Serializer</span><br><span class="line">    <span class="comment"># å°†è¯·æ±‚å•ä¸ªæ•°æ®å’Œè¯·æ±‚å¤šä¸ªæ•°æ®åˆ†å¼€</span></span><br><span class="line">    def get(<span class="literal">self</span>, request, *args, **kwargs):</span><br><span class="line">        if 'pk' <span class="keyword">in</span> kwargs:</span><br><span class="line">            cls = RetrieveAPIView   <span class="comment"># å•</span></span><br><span class="line">        else:</span><br><span class="line">            cls = ListAPIView   <span class="comment"># å¤š</span></span><br><span class="line">        return cls.get(<span class="literal">self</span>, request, *args, **kwargs)</span><br><span class="line">        </span><br><span class="line">    <span class="comment"># çˆ¶ç±»çš„é€‰æ‹©       </span></span><br><span class="line">        CreateAPIView   ---&gt;   æ–°å¢</span><br><span class="line">        ListAPIView   ---&gt;   æŸ¥è¯¢æ‰€æœ‰</span><br><span class="line">        RetrieveAPIView   ---&gt;   æŸ¥è¯¢å•ä¸ª</span><br><span class="line">        DestroyAPIView   ---&gt;   åˆ é™¤</span><br><span class="line">        UpdateAPIView   ---&gt;   ä¿®æ”¹</span><br><span class="line">        ListCreateAPIView</span><br><span class="line">        RetrieveUpdateAPIView</span><br><span class="line">        RetrieveDestroyAPIView</span><br><span class="line">        RetrieveUpdateDestroyAPIView</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">ğŸš© å…¨å¥—æ¥å£è§†å›¾é›†</span><br><span class="line">ğŸ“Œ view.py : </span><br><span class="line"><span class="keyword">from</span> rest_framework.viewsets import ModelViewSet</span><br><span class="line">class HouseTypeViewSet(ModelViewSet):</span><br><span class="line">    queryset = HouseType.objects.<span class="literal">all</span>()</span><br><span class="line">    serializer_class = HouseTypeSerializer</span><br><span class="line">    </span><br><span class="line">ğŸ“Œ urls.py : </span><br><span class="line">urlpatterns = [</span><br><span class="line">	...</span><br><span class="line">]</span><br><span class="line"><span class="comment"># è·¯ç”±å™¨</span></span><br><span class="line">router = SimpleRouter()   <span class="comment"># ç®€å•è·¯ç”±</span></span><br><span class="line">router.register('housetypes', HouseTypeViewSet)   <span class="comment"># æ³¨å†Œ</span></span><br><span class="line">urlpatterns += router.urls   <span class="comment"># æ·»åŠ </span></span><br></pre></td></tr></table></figure>

<h4 id="æ¥å£æµ‹è¯•"><a href="#æ¥å£æµ‹è¯•" class="headerlink" title="æ¥å£æµ‹è¯•:"></a>æ¥å£æµ‹è¯•:</h4><p>1:  ä¸‰æ–¹åº“: requests </p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="type">json</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">resp = requests.<span class="keyword">get</span>(<span class="string">'http://localhost:8000/api/estates/'</span>)</span><br><span class="line">estates = <span class="type">json</span>.loads(resp.text)</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">index</span>, estate <span class="keyword">in</span> enumerate(estates):</span><br><span class="line">    print(<span class="keyword">index</span>, estate)</span><br></pre></td></tr></table></figure>
<p>2: Postmanå’ŒPostwomamè½¯ä»¶</p>
<h2 id="3-DRF-åˆ†é¡µ"><a href="#3-DRF-åˆ†é¡µ" class="headerlink" title="3. DRF åˆ†é¡µ"></a>3. DRF åˆ†é¡µ</h2><figure class="highlight xl"><table><tr><td class="code"><pre><span class="line">P<span class="function"><span class="title">ageNumberPagination</span>   ---&gt;</span>   æŒ‰é¡µç åˆ†é¡µ</span><br><span class="line">L<span class="function"><span class="title">imitoffsetPagination</span>   ---&gt;</span>   è·³è¿‡Næ¡,æŸ¥ç¬¬N+<span class="number">1</span>æ¡</span><br><span class="line">CursorPagination</span><br></pre></td></tr></table></figure>
<p>1) è‡ªå®šä¹‰åˆ†é¡µ</p>
<figure class="highlight diff"><figcaption><span>setting.py</span></figcaption><table><tr><td class="code"><pre><span class="line">ä¸­é—´é”®åé¢æ·»åŠ ä»¥ä¸‹ä»£ç (å…¨éƒ¨å®ç°åˆ†é¡µ)</span><br><span class="line"></span><br><span class="line"># DRFé…ç½®æ–‡ä»¶</span><br><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    # æŒ‰é¡µç åˆ†é¡µ</span><br><span class="line">	'DEFAULT_PAGINATION_CLASS':'rest_framework.pagination.PageNumberPagination',</span><br><span class="line">    'PAGE_SIZE': 5,</span><br><span class="line">&#125;</span><br><span class="line"># è‹¥å•ä¸ªè§†å›¾ç±»ä¸æƒ³åˆ†é¡µå¯ä»¥åŠ ä»¥ä¸‹ä»£ç :</span><br><span class="line">	pagination_class = None</span><br></pre></td></tr></table></figure>
<p>2) æ¸¸æ ‡åˆ†é¡µ</p>
<figure class="highlight diff"><figcaption><span>app/views.py</span></figcaption><table><tr><td class="code"><pre><span class="line"># å®šä¹‰æ¸¸æ ‡åˆ†é¡µç±»</span><br><span class="line">class EstatePagination(CursorPagination):</span><br><span class="line">    page_size_query_param = 'size' # è‡ªå®šä¹‰å•é¡µæ˜¾ç¤ºè®°å½•æ•°</span><br><span class="line">    max_page_size = 20   # å•é¡µæœ€å¤šè®°å½•æ•°</span><br><span class="line">    ordering = 'estateid'   # æŒ‰æ¥¼ç›˜idåˆ†é¡µ</span><br><span class="line"># åœ¨è§†å›¾ç±»é‡Œé¢è°ƒç”¨</span><br><span class="line">pagination_class = EstatePagination</span><br></pre></td></tr></table></figure>


<h2 id="4-DRFç¼“å­˜"><a href="#4-DRFç¼“å­˜" class="headerlink" title="4. DRFç¼“å­˜"></a>4. DRFç¼“å­˜</h2><p>ä¾èµ–é¡¹drf-extensions==0.5.0 ä¸ºDRFæä¾›ç¼“å­˜æ‰©å±•</p>
<p>1)  djangoé‡Œçš„è£…é¥°å™¨@method_decoratorå¯ä»¥å°†è£…é¥°å‡½æ•°çš„è£…é¥°å™¨å˜æˆå¯ä»¥è£…é¥°ç±»æ–¹æ³•çš„è£…é¥°å™¨</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="variable">@method_decorator</span>(decorator=cache_page(<span class="number">500</span>), name=<span class="string">'list'</span>)</span><br><span class="line"><span class="variable">@method_decorator</span>(decorator=cache_page(<span class="number">120</span>), name=<span class="string">'retrieve'</span>)</span><br><span class="line">class HouseTypeViewSet(ModelViewSet):</span><br><span class="line">    queryset = HouseType.objects.all()</span><br><span class="line">    serializer_class = HouseTypeSerializer</span><br><span class="line">    # æ‹’ç»åˆ†é¡µ</span><br><span class="line">    pagination_class = None</span><br></pre></td></tr></table></figure>
<p>2)  å¯¼å…¥æ··å…¥ç±»åšç¼“å­˜</p>
<figure class="highlight diff"><figcaption><span>setting.py</span></figcaption><table><tr><td class="code"><pre><span class="line"># ç¼“å­˜æ··å…¥ç±»</span><br><span class="line">REST_FRAMEWORK_EXTENSIONS = &#123;</span><br><span class="line">    'DEFAULT_CACHE_RESPONSE_TIMEOUT': 120,</span><br><span class="line">    'DEFAULT_USE_CACHE': 'default',</span><br><span class="line">    'DEFAULT_OBJECT_CACHE_KEY_FUNC': 'rest_framework_extensions.utils.default_object_cache_key_func',</span><br><span class="line">    'DEFAULT_LIST_CACHE_KEY_FUNC': 'rest_framework_extensions.utils.default_list_cache_key_func',</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><figcaption><span>app/views.py</span></figcaption><table><tr><td class="code"><pre><span class="line"># å¯¼å…¥æ··å…¥ç±»:</span><br><span class="line">from rest_framework_extensions.cache.mixins import CacheResponseMixin</span><br><span class="line"></span><br><span class="line"># è®©è§†å›¾ç±»ç»§æ‰¿æ··å…¥ç±»:</span><br><span class="line">class EstatesView(CacheResponseMixin):   </span><br><span class="line"># å¸¦Mixinçš„ç±»æ˜¯æ··å…¥ç±»,æ··å…¥ç±»å¿…é¡»å†™åœ¨å‰é¢</span><br></pre></td></tr></table></figure>


<h2 id="5-æ¥å£æ•°æ®çš„ç­›é€‰å’Œæ’åº"><a href="#5-æ¥å£æ•°æ®çš„ç­›é€‰å’Œæ’åº" class="headerlink" title="5. æ¥å£æ•°æ®çš„ç­›é€‰å’Œæ’åº"></a>5. æ¥å£æ•°æ®çš„ç­›é€‰å’Œæ’åº</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…django filter</span></span><br><span class="line">pip <span class="keyword">install</span> django-filter</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®æ–‡ä»¶æ·»åŠ åº”ç”¨</span></span><br><span class="line"><span class="string">'django_filters'</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯¼å…¥DjangoFilterBackend</span></span><br><span class="line"><span class="keyword">from</span> django_filters.rest_framework <span class="keyword">import</span> DjangoFilterBackend</span><br><span class="line"></span><br><span class="line"><span class="comment"># DjangoFilterBackendå¸®å¿™ç­›æ•°æ®</span></span><br><span class="line">filter_backends = (DjangoFilterBackend, OrderingFilter)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--------------- ç›´æ¥æŸ¥è¯¢ ------------------</span></span><br><span class="line"><span class="comment"># è®¾ç½®ç­›é€‰æ¡ä»¶</span></span><br><span class="line">filter_fields = (<span class="string">'district'</span>, )</span><br><span class="line"><span class="comment"># è®¾ç½®æ’åºå­—æ®µ</span></span><br><span class="line">ordering_fields = (<span class="string">'hot'</span>, <span class="string">'estateid'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--------- è‡ªå®šä¹‰ä¸€ä¸ªç±»æ¥æŒ‡å®šæŸ¥è¯¢æ¡ä»¶-----------</span></span><br><span class="line"><span class="comment"># â‘ : è‡ªå®šä¹‰ç±»:</span></span><br><span class="line"><span class="keyword">class</span> EstateFilterSet(django_filters.FilterSet):</span><br><span class="line">    minhot = django_filters.NumberFilter(field_name=<span class="string">'hot'</span>, lookup_expr=<span class="string">'gte'</span>)</span><br><span class="line">    maxhot = django_filters.NumberFilter(field_name=<span class="string">'hot'</span>, lookup_expr=<span class="string">'lte'</span>)</span><br><span class="line">    keyword = django_filters.CharFilter(method=<span class="string">'filter_by_keyword'</span>)</span><br><span class="line"></span><br><span class="line">    @staticmethod</span><br><span class="line">    <span class="keyword">def</span> filter_by_keyword(queryset, <span class="keyword">key</span>, <span class="keyword">value</span>):</span><br><span class="line">        queryset = queryset.filter(Q(name__contains=<span class="keyword">value</span>) | Q(intro__contains=<span class="keyword">value</span>))</span><br><span class="line">        <span class="keyword">return</span> queryset</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line"><span class="comment"># â‘¡: å¯¼å…¥å®šä¹‰å¥½çš„ç±»</span></span><br><span class="line"><span class="keyword">from</span> common.utils <span class="keyword">import</span> EstateFilterSet</span><br><span class="line"></span><br><span class="line"><span class="comment"># â‘¢: åœ¨è§†å›¾ç±»é‡Œé¢ä½¿ç”¨(æ³¨,ä½¿ç”¨æ—¶è¦æ”¾åˆ°filter_backendsåé¢)</span></span><br><span class="line">filter_backends = (DjangoFilterBackend, OrderingFilter)</span><br><span class="line">filterset_class = EstateFilterSet</span><br></pre></td></tr></table></figure>



<h2 id="6-æ¥å£é™æµ-é™åˆ¶æ¥å£çš„è®¿é—®é¢‘ç‡"><a href="#6-æ¥å£é™æµ-é™åˆ¶æ¥å£çš„è®¿é—®é¢‘ç‡" class="headerlink" title="6. æ¥å£é™æµ:  é™åˆ¶æ¥å£çš„è®¿é—®é¢‘ç‡"></a>6. æ¥å£é™æµ:  é™åˆ¶æ¥å£çš„è®¿é—®é¢‘ç‡</h2><p>åŸç†: åœ¨ç¼“å­˜(Redis)å†…è®°å½•IPåœ°å€,å¹¶è®°å½•è®¿é—®æ¬¡æ•°,å½“è¯·æ±‚è¶…è¿‡é˜ˆå€¼åˆ™é™åˆ¶è®¿é—®</p>
<figure class="highlight diff"><figcaption><span>settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    # é™æµé…ç½®</span><br><span class="line">    'DEFAULT_THROTTLE_CLASSES': (</span><br><span class="line">        'rest_framework.throttling.AnonRateThrottle',</span><br><span class="line">    ),</span><br><span class="line">    'DEFAULT_THROTTLE_RATES': &#123;</span><br><span class="line">        'anon': '5/min',</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‹¥ä¸æƒ³é™æµ,å¯ä»¥åœ¨è§†å›¾ç±»é‡Œé¢åŠ å…¥ä»¥ä¸‹ä»£ç :</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">throttle_classes</span> = ()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>æ¡†æ¶</tag>
        <tag>åç«¯</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title>Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ</title>
    <url>/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/</url>
    <content><![CDATA[<p>Djangoæ˜¯é«˜æ°´å‡†çš„Pythonç¼–ç¨‹è¯­è¨€é©±åŠ¨çš„ä¸€ä¸ªå¼€æºæ¡†æ¶</p>
<a id="more"></a>


<h1 id="ä¸€ä¸¶Djangoç®€è¿°"><a href="#ä¸€ä¸¶Djangoç®€è¿°" class="headerlink" title="ä¸€ä¸¶Djangoç®€è¿°"></a>ä¸€ä¸¶Djangoç®€è¿°</h1><p>Django æœ€åˆç”±2003å¹´åˆ°2005å¹´é—´ç”±è´Ÿè´£åˆ›å»ºå’Œç»´æŠ¤æŠ¥çº¸ç½‘ç«™çš„ç½‘ç»œå›¢é˜Ÿå¼€å‘ã€‚å®ƒæ˜¯ä¸€ä¸ªé«˜çº§çš„ Python ç½‘ç»œæ¡†æ¶ï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘å®‰å…¨å’Œå¯ç»´æŠ¤çš„ç½‘ç«™ã€‚</p>
<h2 id="Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹"><a href="#Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹" class="headerlink" title="Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹"></a>Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹</h2><p>åœ¨ä¼ ç»Ÿçš„æ•°æ®é©±åŠ¨ç½‘ç«™ä¸­ï¼ŒWebåº”ç”¨ç¨‹åºä¼šç­‰å¾…æ¥è‡ªWebæµè§ˆå™¨ï¼ˆæˆ–å…¶ä»–å®¢æˆ·ç«¯ï¼‰çš„ HTTP è¯·æ±‚ã€‚å½“æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œåº”ç”¨ç¨‹åºæ ¹æ® URL å’Œå¯èƒ½çš„ POST æ•°æ®æˆ– GET æ•°æ®ä¸­çš„ä¿¡æ¯ç¡®å®šéœ€è¦çš„å†…å®¹ã€‚æ ¹æ®éœ€è¦ï¼Œå¯ä»¥ä»æ•°æ®åº“è¯»å–æˆ–å†™å…¥ä¿¡æ¯ï¼Œæˆ–æ‰§è¡Œæ»¡è¶³è¯·æ±‚æ‰€éœ€çš„å…¶ä»–ä»»åŠ¡ã€‚ç„¶åï¼Œè¯¥åº”ç”¨ç¨‹åºå°†è¿”å›å¯¹Webæµè§ˆå™¨çš„å“åº”ï¼Œé€šå¸¸é€šè¿‡å°†æ£€ç´¢åˆ°çš„æ•°æ®æ’å…¥ HTMLæ¨¡æ¿ä¸­çš„å ä½ç¬¦æ¥åŠ¨æ€åˆ›å»ºç”¨äºæµè§ˆå™¨æ˜¾ç¤ºçš„ HTML é¡µé¢ã€‚</p>
<p>MVCæ¶æ„æ¨¡å¼<br>æ¶æ„è§„èŒƒ: æ•°æ®å’Œæ˜¾ç¤ºè¦åˆ†ç¦»(æ¨¡å‹å’Œè§†å›¾è§£è€¦åˆ)<br>åŒä¸€ä¸ªæ¨¡å‹å¯ä»¥æ¸²æŸ“æˆä¸åŒçš„è§†å›¾,åŒä¸€ä¸ªè§†å›¾å¯ä»¥åŠ è½½ä¸åŒçš„æ¨¡å‹</p>
<figure class="highlight brainfuck"><table><tr><td class="code"><pre><span class="line"><span class="comment">M</span>   --<span class="literal">-</span>&gt;   <span class="comment">model</span>          --<span class="literal">-</span>&gt;   <span class="comment">æ¨¡å‹</span>     --<span class="literal">-</span>&gt;   <span class="comment">æ•°æ®</span></span><br><span class="line"><span class="comment">V</span>   --<span class="literal">-</span>&gt;   <span class="comment">View</span>           --<span class="literal">-</span>&gt;   <span class="comment">è§†å›¾</span>     --<span class="literal">-</span>&gt;   <span class="comment">æ•°æ®æ˜¾ç¤º</span></span><br><span class="line"><span class="comment">C</span>   --<span class="literal">-</span>&gt;   <span class="comment">Contyoller</span>     --<span class="literal">-</span>&gt;   <span class="comment">æ§åˆ¶å™¨</span>    --<span class="literal">-</span>&gt;   <span class="comment">è¿æ¥æ•°æ®å’Œæ˜¾ç¤ºçš„ä¸­é—´å•†</span></span><br></pre></td></tr></table></figure>

<p>Django (MTVæ¶æ„æ¨¡å¼)ç½‘ç»œåº”ç”¨ç¨‹åºé€šå¸¸å°†å¤„ç†æ¯ä¸ªæ­¥éª¤çš„ä»£ç åˆ†ç»„åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­;å¦‚å›¾æ‰€ç¤º:</p>
<p><img src="https://github.com/anjhon1994/some_image/blob/master/Django-MTV%E6%A8%A1%E5%BC%8F%E5%9B%BE.png?raw=true" alt="DjangoMTVæ¶æ„"></p>
<p>ğŸ“Œ URLæ˜ å°„å™¨ç”¨äºæ ¹æ®è¯·æ±‚URLå°†HTTPè¯·æ±‚é‡å®šå‘åˆ°ç›¸åº”çš„è§†å›¾ã€‚URLæ˜ å°„å™¨è¿˜å¯ä»¥åŒ¹é…å‡ºç°åœ¨URLä¸­çš„å­—ç¬¦ä¸²æˆ–æ•°å­—çš„ç‰¹å®šæ¨¡å¼ï¼Œå¹¶å°†å…¶ä½œä¸ºæ•°æ®ä¼ é€’ç»™è§†å›¾åŠŸèƒ½ã€‚<br>ğŸ“Œ View:  è§†å›¾ æ˜¯ä¸€ä¸ªè¯·æ±‚å¤„ç†å‡½æ•°ï¼Œå®ƒæ¥æ”¶HTTPè¯·æ±‚å¹¶è¿”å›HTTPå“åº”ã€‚è§†å›¾é€šè¿‡æ¨¡å‹è®¿é—®æ»¡è¶³è¯·æ±‚æ‰€éœ€çš„æ•°æ®ï¼Œå¹¶å°†å“åº”çš„æ ¼å¼å§”æ‰˜ç»™  æ¨¡æ¿ã€‚<br>ğŸ“Œ Models:  æ¨¡å‹ æ˜¯å®šä¹‰åº”ç”¨ç¨‹åºæ•°æ®ç»“æ„çš„Pythonå¯¹è±¡ï¼Œå¹¶æä¾›åœ¨æ•°æ®åº“ä¸­ç®¡ç†ï¼ˆæ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼‰å’ŒæŸ¥è¯¢è®°å½•çš„æœºåˆ¶ã€‚<br>ğŸ“Œ Templates: æ¨¡æ¿ æ˜¯å®šä¹‰æ–‡ä»¶ï¼ˆä¾‹å¦‚HTMLé¡µé¢ï¼‰çš„ç»“æ„æˆ–å¸ƒå±€çš„æ–‡æœ¬æ–‡ä»¶ï¼Œç”¨äºè¡¨ç¤ºå®é™…å†…å®¹çš„å ä½ç¬¦ã€‚ä¸€ä¸ªè§†å›¾å¯ä»¥ä½¿ç”¨HTMLæ¨¡æ¿ï¼Œä»æ•°æ®å¡«å……å®ƒåŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªHTMLé¡µé¢æ¨¡å‹ã€‚å¯ä»¥ä½¿ç”¨æ¨¡æ¿æ¥å®šä¹‰ä»»ä½•ç±»å‹çš„æ–‡ä»¶çš„ç»“æ„; å®ƒä¸ä¸€å®šæ˜¯HTMLï¼</p>
<br>
<hr>

<h1 id="äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ"><a href="#äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ" class="headerlink" title="äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ"></a>äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ</h1><h2 id="1-åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®"><a href="#1-åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®" class="headerlink" title="1. åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®"></a>1. åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®</h2><p>åˆ›å»ºDjangoé¡¹ç›®çš„æ–¹å¼å¾ˆå¤š,è¿™é‡Œç®€å•ä»‹ç»ä¸‰ç§</p>
  <!-- tab æ–¹æ³•ä¸€ -->
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">   django-admin   -   djangoåŒ…ç®¡ç†å‘˜å·¥å…·</span><br><span class="line"></span><br><span class="line">1. åœ¨å‘½ä»¤æç¤ºç¬¦å†…(æˆ‘ç”¨äº†Git)è¾“å…¥</span><br><span class="line">	~ django-admin startproject polls   # åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</span><br><span class="line">2. ä½¿ç”¨PyCharmæ‰“å¼€é¡¹ç›®å¹¶åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">	~ cd polls   # è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹</span><br><span class="line">	~ python3 -m venv venv   # æ–°å»ºè™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">	~ source venv/bin/activate   # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">3. å®‰è£…é¡¹ç›®ä¾èµ–é¡¹:</span><br><span class="line">	æ‰“å¼€Pycharmåº•éƒ¨çš„Terminal,è¾“å…¥</span><br><span class="line">	~ pip install django mysqlclient django-redis pillow requests</span><br><span class="line">	ä½¿ç”¨pipå®‰è£…ä¸‰æ–¹åº“æ—¶ï¼Œå¯ä»¥é€šè¿‡å¦‚<span class="attribute">django</span>==1.11.27çš„æ–¹å¼æ¥æŒ‡å®šä¸‰æ–¹åº“çš„ç‰ˆæœ¬ã€‚</span><br><span class="line">4. è¿è¡Œdjangoé¡¹ç›®</span><br><span class="line">	~ python manage.py runserver</span><br><span class="line">	~ python manage.py runserver 127.0.0.1:80   # æŒ‡å®šç«¯å£ä¸º80</span><br><span class="line">5. æ·»åŠ é¡¹ç›®è¿è¡Œå¿«æ·æ–¹å¼</span><br><span class="line">	<span class="builtin-name">Add</span> Configuration  ---&gt;  +  ---&gt;  Python  ---&gt; <span class="built_in"> Script </span>Path (manage.py)  --&gt;  Parameters (runserver)</span><br></pre></td></tr></table></figure>
  <!-- endtab -->
  <!-- tab æ–¹æ³•äºŒ -->
<figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> ç”¨PyCharmåˆ›å»ºä¸€ä¸ªæ™®é€šçš„Pythoné¡¹ç›®</span><br><span class="line"><span class="number">2.</span> å®‰è£…Djangoæ‰€éœ€çš„ä¾èµ–é¡¹</span><br><span class="line">    ~ pip install django==<span class="number">2.1</span><span class="number">.14</span> -i https:<span class="comment">//pypi.doubanio.com/simple</span></span><br><span class="line"><span class="number">3.</span> æŠŠPythoné¡¹ç›®å˜æˆDjangoé¡¹ç›®</span><br><span class="line">    ~ django-admin startproject polls .</span><br><span class="line"><span class="number">4.</span> è¿è¡Œé¡¹ç›®</span><br><span class="line">	~ python manage.py runserver</span><br></pre></td></tr></table></figure>
  <!-- endtab -->
  <!-- tab æ–¹æ³•ä¸‰ -->
<figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">å­˜åœ¨è¿œç«¯ä»“åº“æ—¶éœ€è¦å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°</span><br><span class="line"><span class="number">1</span>. å…‹éš†</span><br><span class="line">    ä½¿ç”¨PyCharmæ–°å»ºé¡µé¢çš„<span class="string">"get from version control"</span></span><br><span class="line">    ~ git <span class="keyword">clone</span> <span class="title">git</span>@gitee.com:anjhon/polls.git   <span class="comment"># åœ°å€éœ€è¦è‡ªè¡Œæ›´æ¢</span></span><br><span class="line"><span class="number">2</span>. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ(é¡¹ç›®ä¸­ä¸€èˆ¬ä¸ä¼šå°†è™šæ‹Ÿç¯å¢ƒçº³å…¥ç‰ˆæœ¬æ§åˆ¶)</span><br><span class="line">    ~ Linux/macOS: source venv/bin/activate</span><br><span class="line">    ~ Windows: <span class="string">"venv/Scripts/activate"</span></span><br><span class="line"><span class="number">3</span>. é‡å»ºä¾èµ–é¡¹</span><br><span class="line">    ~ pip install -r requirements.txt   <span class="comment"># requirementsæ–‡ä»¶ä¸ºä¾èµ–é¡¹æ¸…å•</span></span><br></pre></td></tr></table></figure>
  <!-- endtab -->


<p>åˆ›å»ºå¥½æ–°é¡¹ç›®ä¹‹åå°±èƒ½çœ‹åˆ°é£å‡çš„å°ç«ç®­äº†</p>
<p><img src="https://github.com/anjhon1994/some_image/blob/master/Django%E8%BF%90%E8%A1%8C%E5%9B%BE.Png?raw=true" alt="è¿è¡Œå›¾"></p>
<h2 id="2-ç®€å•çš„æ–‡ä»¶é…ç½®"><a href="#2-ç®€å•çš„æ–‡ä»¶é…ç½®" class="headerlink" title="2. ç®€å•çš„æ–‡ä»¶é…ç½®"></a>2. ç®€å•çš„æ–‡ä»¶é…ç½®</h2><h3 id="è®¾ç½®è¯­è¨€æ—¶åŒº"><a href="#è®¾ç½®è¯­è¨€æ—¶åŒº" class="headerlink" title="è®¾ç½®è¯­è¨€æ—¶åŒº"></a>è®¾ç½®è¯­è¨€æ—¶åŒº</h3><figure class="highlight diff"><figcaption><span>polls/setting.py </span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="deletion">- LANGUAGE_CODE = 'en-us'</span></span><br><span class="line"><span class="addition">+ LANGUAGE_CODE = 'zh-hans'</span></span><br><span class="line"><span class="deletion">- TIME_ZONE = 'UTC'</span></span><br><span class="line"><span class="addition">+ TIME_ZONE = 'Asia/Chongqing'</span></span><br></pre></td></tr></table></figure>

<h3 id="è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„"><a href="#è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„" class="headerlink" title="è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„"></a>è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„</h3><figure class="highlight diff"><figcaption><span>polls/setting.py </span></figcaption><table><tr><td class="code"><pre><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        'BACKEND': 	'django.template.backends.django.DjangoTemplates',</span><br><span class="line"><span class="deletion">-       'DIRS': [],</span></span><br><span class="line"><span class="addition">+       'DIRS': [os.path.join(BASE_DIR, 'templates')],</span></span><br><span class="line">        'APP_DIRS': True,</span><br><span class="line">	...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="3-åˆ›å»ºDjangoåº”ç”¨"><a href="#3-åˆ›å»ºDjangoåº”ç”¨" class="headerlink" title="3. åˆ›å»ºDjangoåº”ç”¨"></a>3. åˆ›å»ºDjangoåº”ç”¨</h2><p>åœ¨æ§åˆ¶å°è¾“å…¥:</p>
<figure class="highlight haml"><table><tr><td class="code"><pre><span class="line">æ–¹æ³•ä¸€</span><br><span class="line">~ python manage.py startapp app</span><br><span class="line">æ–¹æ³•äºŒ</span><br><span class="line">~ django-admin startapp app</span><br><span class="line">åœ¨æ–°å»ºå¥½çš„åº”ç”¨æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºtemplatesæ–‡ä»¶å¤¹(ç”¨æ¥å­˜æ”¾å‰ç«¯é¡µé¢)</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºå¥½åº”ç”¨å,åº”ç”¨æ–‡ä»¶å¤¹è§†å›¾å¦‚ä¸‹:</p>
<figure class="highlight dsconfig"><table><tr><td class="code"><pre><span class="line">-- <span class="string">app</span></span><br><span class="line"><span class="string"> </span>    |<span class="built_in">--migrations</span></span><br><span class="line"><span class="built_in"></span>     |		|<span class="built_in">--__init__.py</span>   <span class="comment"># ä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå‘Šè¯‰Pythonè§£é‡Šå™¨è¿™ä¸ªç›®å½•åº”è¯¥è¢«è§†ä¸ºä¸€ä¸ªPythonçš„åŒ…ã€‚</span></span><br><span class="line">     |<span class="built_in">--__init__.py</span>   </span><br><span class="line">     |<span class="built_in">--admin.py</span>   <span class="comment"># å¯ä»¥ç”¨æ¥æ³¨å†Œæ¨¡å‹ï¼Œç”¨äºåœ¨Djangoçš„ç®¡ç†ç•Œé¢ç®¡ç†æ¨¡å‹ã€‚</span></span><br><span class="line">     |<span class="built_in">--apps.py</span>   <span class="comment"># å½“å‰åº”ç”¨çš„é…ç½®æ–‡ä»¶ã€‚</span></span><br><span class="line">     |<span class="built_in">--models.py</span>   <span class="comment"># å­˜æ”¾åº”ç”¨çš„æ•°æ®æ¨¡å‹ï¼Œå³å®ä½“ç±»åŠå…¶ä¹‹é—´çš„å…³ç³»ï¼ˆMVC/MTVä¸­çš„Mï¼‰ã€‚</span></span><br><span class="line">     |<span class="built_in">--tests.py</span>   <span class="comment"># åŒ…å«æµ‹è¯•åº”ç”¨å„é¡¹åŠŸèƒ½çš„æµ‹è¯•ç±»å’Œæµ‹è¯•å‡½æ•°ã€‚</span></span><br><span class="line">     |<span class="built_in">--views.py</span>   <span class="comment"># å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”çš„å‡½æ•°ï¼ˆMVCä¸­çš„Cï¼ŒMTVä¸­çš„Vï¼‰ã€‚</span></span><br></pre></td></tr></table></figure>
<p>æœ€ååˆ«å¿˜äº†é…ç½®ä¸€ä¸‹æ–°å»ºçš„åº”ç”¨</p>
<figure class="highlight diff"><figcaption><span>polls/setting.py</span></figcaption><table><tr><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    'django.contrib.admin',</span><br><span class="line">    'django.contrib.auth',</span><br><span class="line">    'django.contrib.contenttypes',</span><br><span class="line">    'django.contrib.sessions',</span><br><span class="line">    'django.contrib.messages',</span><br><span class="line">    'django.contrib.staticfiles',</span><br><span class="line"><span class="addition">+   'polls',</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="4-è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢"><a href="#4-è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢" class="headerlink" title="4. è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢?"></a>4. è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢?</h2><p>ç¬¬ä¸€æ­¥: é…ç½®urlæ§åˆ¶å™¨</p>
<figure class="highlight diff"><figcaption><span>polls/urls.py</span></figcaption><table><tr><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path</span><br><span class="line">from app.views import index   # è¿™é‡Œå¯¼å…¥äº†è§†å›¾é‡Œçš„å‡½æ•°index</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path('admin/', admin.site.urls),</span><br><span class="line"><span class="addition">+   path('', index)   # è¿™é‡Œè°ƒç”¨äº†è§†å›¾é‡Œçš„å‡½æ•°index</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒéƒ¨: å†™è§†å›¾å‡½æ•°</p>
<figure class="highlight diff"><figcaption><span>app/views.py</span></figcaption><table><tr><td class="code"><pre><span class="line">from random import sample</span><br><span class="line">from django.http import HttpRequest</span><br><span class="line">from django.shortcuts import render</span><br><span class="line"></span><br><span class="line">def index(request: HttpRequest):   # å®šä¹‰ä¸€ä¸ªindexå‡½æ•°</span><br><span class="line">    musics = ['åš£å¼ ', 'è®©ä¸–é—´ç¾å¥½ä¸ä½ ç¯ç¯ç›¸æ‰£', 'æ— é—®', 'è†¨èƒ€', 'é‡å­©å­', 'æµ·é˜”å¤©ç©º', 'çˆ±æƒ…ä¹°å–', 'å¿«ä¹ç”·å­©', ]</span><br><span class="line">    context = &#123;</span><br><span class="line">        'musics': sample(musics, 3),</span><br><span class="line">        'greeting': 'Hello, Django'</span><br><span class="line">    &#125;</span><br><span class="line">    return render(request, "index.html", context)   # è¿”å›äº†ä¸€ä¸ªhtmlé¡µé¢</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ­¥: ç¼–å†™å‰ç«¯æ¨¡æ¿é¡µ</p>
<figure class="highlight diff"><figcaption><span>templates/index.html</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;é¦–é¡µ&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; greeting &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">&lt;!--    djangoæ¨¡æ¿é¡µ,å¯ä»¥ä½¿ç”¨djangoæ¨¡æ¿è¯­æ³•å’Œæ¨¡æ¿æŒ‡ä»¤ç”ŸæˆåŠ¨æ€å†…å®¹  --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &#123;% for music in musics %&#125;</span><br><span class="line">        &lt;li&gt;&#123;&#123; music &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>å¥½äº†,ä¸€ä¸ªç®€å•çš„ç½‘é¡µäº§ç”Ÿäº†!</p>
<br>
<hr>

<h1 id="ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ"><a href="#ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ" class="headerlink" title="ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ"></a>ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ</h1><p>é‚“çˆ·çˆ·è¯´: å®è·µæ‰æ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†</p>
<p>åœ¨ç¬¬äºŒèŠ‚æˆ‘ä»¬å®ç°äº†ç®€å•ç½‘é¡µ,ä½†æ˜¯åªæ˜¯ç”¨åˆ°äº†è§†å›¾å’Œæ¨¡æ¿,å¹¶æ²¡æœ‰æ¶‰åŠåˆ°æ•°æ®; è¦çŸ¥é“,åœ¨çœŸæ­£çš„é¡¹ç›®ä¸­,è¿™æ˜¯ä¸å¯èƒ½å­˜åœ¨çš„,æ‰€ä»¥æœ¬èŠ‚æˆ‘ä»¬å°†é€šè¿‡å®æ“ä¸€ä¸ªå°å‹çš„é¡¹ç›®æ¥å¸¦å¤§å®¶å¿«é€Ÿç†Ÿæ‚‰Djangoæ¡†æ¶</p>
<h2 id="1-ç¯å¢ƒå‡†å¤‡"><a href="#1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.  ç¯å¢ƒå‡†å¤‡"></a>1.  ç¯å¢ƒå‡†å¤‡</h2><p>â‘ : å®‰è£…Pythonæ“ä½œMySQLçš„ä¾èµ–åº“</p>
<figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">~ pip <span class="keyword">install</span> pymysql</span><br></pre></td></tr></table></figure>

<p>â‘¡: è®¾ç½®æ•°æ®åº“è¿æ¥å‚æ•°</p>
<figure class="highlight diff"><figcaption><span>polls/setting.py</span></figcaption><table><tr><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    'default': &#123;</span><br><span class="line"><span class="deletion">-       'ENGINE': 'django.db.backends.sqlite3',</span></span><br><span class="line"><span class="addition">+       'ENGINE': 'django.db.backends.mysql',</span></span><br><span class="line"><span class="deletion">-       'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),</span></span><br><span class="line"><span class="addition">+       'NAME': 'anjhon',</span></span><br><span class="line"><span class="addition">+       'HOST': '0.0.0.0',   # è¿™é‡Œåœ°å€éœ€è¦è‡ªè¡Œæ›´æ”¹,å¯ä»¥è¿æ¥æœ¬åœ°æ•°æ®åº“,å‚æ•°ä¸º:localhost</span></span><br><span class="line"><span class="addition">+       'PORT': 3306,</span></span><br><span class="line"><span class="addition">+       'USER': 'anjhon',</span></span><br><span class="line"><span class="addition">+       'PASSWORD': '123456',</span></span><br><span class="line"><span class="addition">+       'CHARSET': 'utf8',</span></span><br><span class="line"><span class="addition">+       'TIME_ZONE': 'Asia/Chongqing',</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-åˆ›å»ºæ•°æ®æ¨¡å‹"><a href="#2-åˆ›å»ºæ•°æ®æ¨¡å‹" class="headerlink" title="2. åˆ›å»ºæ•°æ®æ¨¡å‹"></a>2. åˆ›å»ºæ•°æ®æ¨¡å‹</h2><h3 id="åˆ›å»ºæ•°æ®æ¨¡å‹"><a href="#åˆ›å»ºæ•°æ®æ¨¡å‹" class="headerlink" title="åˆ›å»ºæ•°æ®æ¨¡å‹"></a>åˆ›å»ºæ•°æ®æ¨¡å‹</h3><figure class="highlight diff"><figcaption><span>app/models.py</span></figcaption><table><tr><td class="code"><pre><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line">class Subject(models.Model):</span><br><span class="line">    """å­¦ç§‘æ¨¡å‹ç±»"""</span><br><span class="line">    nums = models.AutoField(primary_key=True, verbose_name='ç¼–å·')   # è‡ªå¢,ä¸»é”®</span><br><span class="line">    name = models.CharField(max_length=20, verbose_name='åç§°')   # 20é•¿åº¦çš„å­—ç¬¦ä¸²</span><br><span class="line">    intro = models.CharField(max_length=1000, verbose_name='ä»‹ç»')   # 1000é•¿åº¦çš„å­—ç¬¦ä¸²</span><br><span class="line">    is_hot = models.BooleanField(default=False, verbose_name='æ˜¯å¦çƒ­é—¨')</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = 'tb_subject'</span><br><span class="line">        verbose_name = 'å­¦ç§‘'</span><br><span class="line">        verbose_name_plural = 'å­¦ç§‘'</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Teacher(models.Model):</span><br><span class="line">    """è€å¸ˆæ¨¡å‹"""</span><br><span class="line">    nums = models.AutoField(primary_key=True, verbose_name='æ•™å¸ˆç¼–å·')</span><br><span class="line">    name = models.CharField(max_length=20, verbose_name='æ•™å¸ˆå§“å')</span><br><span class="line">    sex = models.BooleanField(default=True, verbose_name='æ€§åˆ«')</span><br><span class="line">    birth = models.DateField(verbose_name='æ•™å¸ˆç”Ÿæ—¥')</span><br><span class="line">    photo = models.ImageField(upload_to='images', default='', max_length=512, verbose_name='å¤´åƒ')</span><br><span class="line">    intro = models.CharField(default='', max_length=1000, verbose_name='æ•™å¸ˆä»‹ç»')</span><br><span class="line">    good_count = models.PositiveIntegerField(default=0, verbose_name='å¥½è¯„æ•°')</span><br><span class="line">    bad_count = models.IntegerField(default=0, verbose_name='å·®è¯„æ•°')</span><br><span class="line">    subject  = models.ForeignKey(to=Subject, on_delete=models.PROTECT, db_column='snums', verbose_name='æ‰€å±å­¦ç§‘')   # è¯¥æ•™å¸ˆå­¦ç§‘çš„åå­—</span><br><span class="line"></span><br><span class="line">    class Meta:   # å…ƒä¿¡æ¯,å…ƒæ•°æ®(æè¿°æ•°æ®çš„æ•°æ®)</span><br><span class="line">        db_table = 'tb_teacher'</span><br><span class="line">        verbose_name = 'æ•™å¸ˆ'</span><br><span class="line">        verbose_name_plural = 'æ•™å¸ˆ'</span><br></pre></td></tr></table></figure>

<p>å‚æ•°å°ç»“:<br>    IntegerField   å¯¹åº”æ•°æ®åº“ä¸­çš„integerç±»å‹ï¼Œ<br>    CharField   å¯¹åº”æ•°æ®åº“çš„varcharç±»å‹ï¼Œ<br>    DecimalField   å¯¹åº”æ•°æ®åº“çš„decimalç±»å‹ï¼Œ<br>    ForeignKey   ç”¨æ¥å»ºç«‹å¤šå¯¹ä¸€å¤–é”®å…³è”ã€‚<br>    primary_key   ç”¨äºè®¾ç½®ä¸»é”®ï¼Œ<br>    max_length   ç”¨æ¥è®¾ç½®å­—æ®µçš„æœ€å¤§é•¿åº¦ï¼Œ<br>    db_column   ç”¨æ¥è®¾ç½®æ•°æ®åº“ä¸­ä¸å­—æ®µå¯¹åº”çš„åˆ—ï¼Œ<br>    verbose_name   åˆ™è®¾ç½®äº†Djangoåå°ç®¡ç†ç³»ç»Ÿä¸­è¯¥å­—æ®µæ˜¾ç¤ºçš„åç§°ã€‚</p>
<h3 id="å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼"><a href="#å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼" class="headerlink" title="å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼"></a>å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼</h3><figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line"># ç”Ÿæˆè¿ç§»æ–‡ä»¶</span><br><span class="line">~ python manage.py makemigrations polls</span><br><span class="line"># æ‰§è¡Œè¿ç§»</span><br><span class="line">~ python manage.py migrate</span><br></pre></td></tr></table></figure>
<p>åˆ°è¿™ä¸€æ­¥,æˆ‘ä»¬çš„æ•°æ®åº“é‡Œå°±å·²ç»ç”Ÿæˆå¥½äº†å­¦ç§‘å’Œè€å¸ˆçš„æ•°æ®è¡¨æ ¼,è¿™æ—¶æˆ‘ä»¬éœ€è¦è¿›å…¥åˆ°Djangoè‡ªå¸¦çš„åå°ç®¡ç†ç³»ç»Ÿ,ç®¡ç†æ•°æ®;</p>
<p>æ‰©å±•:<br>æ•°æ®è¡¨å»ºå¥½ä»¥å,åå‘å»ºæ¨¡å‹åˆ°models.pyæ–‡ä»¶:</p>
<figure class="highlight vim"><table><tr><td class="code"><pre><span class="line"><span class="keyword">python</span> manage.<span class="keyword">py</span> inspectdb &gt; common/models.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>

<h3 id="è¿œç«¯æ•°æ®åº“è®¾ç½®"><a href="#è¿œç«¯æ•°æ®åº“è®¾ç½®" class="headerlink" title="è¿œç«¯æ•°æ®åº“è®¾ç½®"></a>è¿œç«¯æ•°æ®åº“è®¾ç½®</h3><figure class="highlight gherkin"><table><tr><td class="code"><pre><span class="line">create database djangocase default charset utf8 collate utf8_bin;   ---&gt;   åˆ›å»ºæ•°æ®åº“</span><br><span class="line">grant all privileges on djangocase.<span class="symbol">*</span> to 'anjhon'<span class="meta">@'%';</span>   ---&gt;   ç»™ç”¨æˆ·æƒé™</span><br><span class="line"></span><br><span class="line">(venv) C:\djangocase&gt;</span><br><span class="line">    python manage.py migrate   ---&gt;   æ‰§è¡Œè¿ç§»</span><br><span class="line"></span><br><span class="line">use djangocase;   ---&gt;   åˆ‡æ¢æ•°æ®åº“</span><br><span class="line">show tables;   ---&gt;   æ˜¾ç¤ºè¡¨æ ¼</span><br><span class="line">+----------------------------+</span><br><span class="line">|<span class="string"> Tables_in_djangocase       </span>|</span><br><span class="line">+----------------------------+</span><br><span class="line">|<span class="string"> auth_group                 </span>|</span><br><span class="line">|<span class="string"> auth_group_permissions     </span>|</span><br><span class="line">|<span class="string"> auth_permission            </span>|</span><br><span class="line">|<span class="string"> auth_user                  </span>|</span><br><span class="line">|<span class="string"> auth_user_groups           </span>|</span><br><span class="line">|<span class="string"> auth_user_user_permissions </span>|</span><br><span class="line">|<span class="string"> django_admin_log           </span>|</span><br><span class="line">|<span class="string"> django_content_type        </span>|</span><br><span class="line">|<span class="string"> django_migrations          </span>|</span><br><span class="line">|<span class="string"> django_session             </span>|</span><br><span class="line">|<span class="string"> jet_bookmark               </span>|</span><br><span class="line">|<span class="string"> jet_pinnedapplication      </span>|</span><br><span class="line">+----------------------------+</span><br><span class="line">12 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">(venv) C:\polls&gt;</span><br><span class="line">	python manage.py createsuperuser   ---&gt;   åˆ›å»ºè¶…çº§ç®¡ç†å‘˜</span><br></pre></td></tr></table></figure>

<h2 id="3-åå°ç®¡ç†"><a href="#3-åå°ç®¡ç†" class="headerlink" title="3. åå°ç®¡ç†"></a>3. åå°ç®¡ç†</h2><p>â‘ :  åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦å·</p>
<figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">~ python manage.py createsuperuser</span><br><span class="line">Username : anjhon</span><br><span class="line">Email address: anjhon@163.com</span><br><span class="line">Password:       # å¯†ç ä¸æ˜¾ç¤º</span><br><span class="line">Password (again): </span><br><span class="line">Superuser created successfully.</span><br></pre></td></tr></table></figure>

<p>â‘¡:  æ³¨å†Œæ¨¡å‹</p>
<figure class="highlight diff"><figcaption><span>polls/admin.py</span></figcaption><table><tr><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line">from polls.models import Subject, Teacher</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class SubjectAdmin(admin.ModelAdmin):</span><br><span class="line">    list_display = ('nums', 'name', 'intro', 'is_hot')   # é»˜è®¤æ˜¾ç¤ºå­¦ç§‘å¯¹è±¡,è¯¥è¯­å¥å¯ä»¥æ˜¾ç¤ºå­¦ç§‘ç¼–å·,åç§°,ä»‹ç».</span><br><span class="line">    list_display_links = ('name', 'nums', )</span><br><span class="line">    search_fields = ('name', )   # å¯ä»¥æŒ‰åå­—æœç´¢</span><br><span class="line">    ordering = ('nums', )   # æ ¹æ®numsæ’å‡åº</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class TeacherAdmin(admin.ModelAdmin):</span><br><span class="line">    list_display = ('nums', 'name', 'sex', 'birth', 'intro', 'good_count', 'bad_count', 'subject')</span><br><span class="line">    search_fields = ('name', )</span><br><span class="line">    ordering = ('nums',)</span><br></pre></td></tr></table></figure>

<p>â‘¢: ç™»å½•ç®¡ç†å‘˜åå°</p>
<figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line"># å¼€å¯æœåŠ¡å™¨</span><br><span class="line">~ python manage.py runserver</span><br><span class="line"># è®¿é—®</span><br><span class="line">http://127.0.0.1:8000/admin</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¾“å…¥åˆšåˆšçš„è¶…çº§ç®¡ç†å‘˜çš„å¯†ç å°±èƒ½ç™»å½•äº†;ä¸è¿‡ç”±äºç•Œé¢å®åœ¨ä¸å¿ç›´è§†,æ‰€ä»¥æˆ‘å†³å®šç»™ä»–æ¢ä¸ªjetä¸»é¢˜!</p>
<ol>
<li><p>å®‰è£…jet</p>
<figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">~ pip install django-jet -i https://pypi.doubanio.com/simple</span><br></pre></td></tr></table></figure></li>
<li><p>æ·»åŠ åº”ç”¨</p>
<figure class="highlight diff"><figcaption><span>polls/settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line"><span class="addition">+   'jet',</span></span><br><span class="line">    'django.contrib.admin',</span><br><span class="line">    'django.contrib.auth',</span><br><span class="line">    'django.contrib.contenttypes',</span><br><span class="line">    'django.contrib.sessions',</span><br><span class="line">    'django.contrib.messages',</span><br><span class="line">    'django.contrib.staticfiles',</span><br><span class="line">    'polls',</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>æ³¨: jetè¦åŠ åˆ°æœ€å‰é¢,ä¸ç„¶Djangoä¼šå…ˆåŠ è½½è‡ªå¸¦çš„ä¸»é¢˜,è¿™æ ·å°±æ²¡ä»€ä¹ˆæ•ˆæœäº†</p>
</li>
<li><p>æ‰§è¡Œè¿ç§»ï¼š</p>
<figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="code"><pre><span class="line">~ python manage.py migrate jet</span><br></pre></td></tr></table></figure></li>
<li><p>é…ç½®URL</p>
<figure class="highlight diff"><figcaption><span>polls/urls.py</span></figcaption><table><tr><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path('admin/', admin.site.urls),</span><br><span class="line"><span class="addition">+   path('jet/', include('jet.urls', 'jet')),</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>å¤§åŠŸå‘Šæˆ!</p>
</li>
</ol>
<p>è¿›å…¥åå°ä¹‹åå°±å¯ä»¥æ·»åŠ è€å¸ˆå’Œå­¦ç§‘çš„æ•°æ®äº†;<br>è‡³æ­¤,æ•°æ®å‡†å¤‡å®Œæˆ!</p>
<h2 id="4-ç½‘é¡µæˆå‹"><a href="#4-ç½‘é¡µæˆå‹" class="headerlink" title="4. ç½‘é¡µæˆå‹"></a>4. ç½‘é¡µæˆå‹</h2><p>â‘ : åŒæ ·çš„,å…ˆé…ç½®url</p>
<figure class="highlight diff"><figcaption><span>polls/urls.py</span></figcaption><table><tr><td class="code"><pre><span class="line">from django.conf import settings</span><br><span class="line">from django.conf.urls.static import static</span><br><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path, include</span><br><span class="line">from polls.views import index, show_teachers, praise_or_criticize, \</span><br><span class="line">    login, get_captcha, logout</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path('jet/', include('jet.urls', 'jet')),</span><br><span class="line">    path('admin/', admin.site.urls),</span><br><span class="line">    path('', index),</span><br><span class="line"><span class="addition">+   path('teachers/', show_teachers),   # æ•™å¸ˆä¿¡æ¯é¡µé¢</span></span><br><span class="line"><span class="addition">+   path('praise/', praise_or_criticize),   # å¥½è¯„</span></span><br><span class="line"><span class="addition">+   path('criticize/', praise_or_criticize),   # å·®è¯„</span></span><br><span class="line"><span class="addition">+   path('login/', login),   # ç™»å½•</span></span><br><span class="line"><span class="addition">+   path('logout/', logout),   # æ³¨é”€</span></span><br><span class="line"><span class="addition">+   path('captcha/', get_captcha),   # éªŒè¯ç </span></span><br><span class="line">] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure>
<p>â‘¡: å†™è§†å›¾å‡½æ•°</p>
<figure class="highlight diff"><figcaption><span>app/views.py</span></figcaption><table><tr><td class="code"><pre><span class="line">from base64 import b64decode</span><br><span class="line">from django.http import JsonResponse, HttpResponse</span><br><span class="line">from django.shortcuts import render, redirect</span><br><span class="line">from polls.captcha import Captcha</span><br><span class="line">from polls.models import Subject, Teacher, User</span><br><span class="line">from polls.utils import random_text, to_md5_hex, check_username, check_password</span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line">    """é¦–é¡µï¼ˆè·å–æ‰€æœ‰å­¦ç§‘ï¼‰"""</span><br><span class="line">    queryset = Subject.objects.all()</span><br><span class="line">    context = &#123;</span><br><span class="line">        'subjects': queryset</span><br><span class="line">    &#125;</span><br><span class="line">    return render(request, 'subjects.html', context)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def show_teachers(request):</span><br><span class="line">    """æ˜¾ç¤ºæŒ‡å®šå­¦ç§‘çš„è€å¸ˆ"""</span><br><span class="line">    try:</span><br><span class="line">        sno = request.GET['sno']</span><br><span class="line">        subject = Subject.objects.get(no=sno)</span><br><span class="line">        queryset = Teacher.objects.filter(subject__no=sno)</span><br><span class="line">        context = &#123;</span><br><span class="line">            'subject': subject,</span><br><span class="line">            'teachers': queryset</span><br><span class="line">        &#125;</span><br><span class="line">        return render(request, 'teachers.html', context)</span><br><span class="line">    except (KeyError, ValueError, Subject.DoesNotExist):</span><br><span class="line">        return redirect('/')</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def praise_or_criticize(request):</span><br><span class="line">    """å¥½è¯„æˆ–å·®è¯„"""</span><br><span class="line">    if request.session.get('userid') is None:</span><br><span class="line">        data = &#123;'code': 10002, 'message': 'è¯·å…ˆç™»å½•'&#125;</span><br><span class="line">    else:</span><br><span class="line">        tno = request.GET.get('tno', '0')</span><br><span class="line">        try:</span><br><span class="line">            teacher = Teacher.objects.get(no=tno)</span><br><span class="line">            if request.path.startswith('/praise'):</span><br><span class="line">                teacher.good_count += 1</span><br><span class="line">            else:</span><br><span class="line">                teacher.bad_count += 1</span><br><span class="line">            teacher.save()</span><br><span class="line">            data = &#123;'code': 10000, 'message': 'æ“ä½œæˆåŠŸ'&#125;</span><br><span class="line">        except (ValueError, Teacher.DoesNotExist):</span><br><span class="line">            data = &#123;'code': 10001, 'message': 'æ“ä½œå¤±è´¥'&#125;</span><br><span class="line">    return JsonResponse(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def login(request):</span><br><span class="line">    """ç™»å½•"""</span><br><span class="line">    backurl = request.GET.get('backurl', '')</span><br><span class="line">    hint = ''</span><br><span class="line">    if request.method == 'POST':</span><br><span class="line">        # è·å–ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç </span><br><span class="line">        code_from_user = request.POST.get('captcha', '0').lower()</span><br><span class="line">        # è·å–ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç </span><br><span class="line">        code_from_serv = request.session.get('code', '1').lower()</span><br><span class="line">        # è‹¥ç”¨æˆ·éªŒè¯ç å’ŒæœåŠ¡å™¨éªŒè¯ç ç›¸åŒ,åˆ™è¿›å…¥ç™»å½•æµç¨‹</span><br><span class="line">        if code_from_user == code_from_serv:</span><br><span class="line">            # è·å–ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å</span><br><span class="line">            username = request.POST.get('username', '')</span><br><span class="line">            # è·å–ç”¨æˆ·è¾“å…¥çš„å¯†ç </span><br><span class="line">            password = request.POST.get('password', '')</span><br><span class="line">            # æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦å¤åˆè§„èŒƒ</span><br><span class="line">            if check_username(username) and check_password(password):</span><br><span class="line">                # ç”Ÿæˆå¯†ç æ‘˜è¦</span><br><span class="line">                password = to_md5_hex(password)</span><br><span class="line">                # ä»æ•°æ®åº“è·å–ç”¨æˆ·ä¿¡æ¯å¯¹è±¡ä¿å­˜åˆ°userä¸­</span><br><span class="line">                user = User.objects.filter(username=username, password=password).first()</span><br><span class="line"></span><br><span class="line">                if user:   # è‹¥åŒ¹é…æˆåŠŸ,å°†ç”¨æˆ·çš„ä¿¡æ¯ä¿å­˜åˆ°sessionå¯¹è±¡ä¸­,æ–¹ä¾¿cookieè¿æ¥</span><br><span class="line">                    # ç™»å½•æˆåŠŸåä¸ºäº†è®°ä½è¿™ä¸ªç™»å½•æˆåŠŸçš„ç”¨æˆ·</span><br><span class="line">                    # æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜å’Œç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯</span><br><span class="line">                    # æˆ‘ä»¬å¯ä»¥å°†è¿™äº›ä¿¡æ¯ä¿å­˜åœ¨Djangoæ¡†æ¶æä¾›çš„sessionå¯¹è±¡ä¸­</span><br><span class="line">                    request.session['userid'] = user.no</span><br><span class="line">                    request.session['username'] = user.username</span><br><span class="line">                    backurl = request.POST.get('backurl')</span><br><span class="line">                    if backurl:</span><br><span class="line">                        backurl = b64decode(backurl).decode()</span><br><span class="line">                    else:</span><br><span class="line">                        backurl = '/'</span><br><span class="line">                    return redirect(backurl)</span><br><span class="line">                else:</span><br><span class="line">                    hint = 'ç”¨æˆ·ç™»å½•ä¿¡æ¯é”™è¯¯!'</span><br><span class="line">            else:</span><br><span class="line">                hint = 'è¯·è¾“å…¥ç™»å½•ä¿¡æ¯!'</span><br><span class="line">        else:</span><br><span class="line">            hint = 'è¯·è¾“å…¥æ­£ç¡®çš„éªŒè¯ç !'</span><br><span class="line">    context = &#123;</span><br><span class="line">        'hint': hint,</span><br><span class="line">        'backurl': backurl</span><br><span class="line">    &#125;</span><br><span class="line">    return render(request, 'login.html', context)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def logout(request):</span><br><span class="line">    # æ¸…ç©ºsessionå¯¹è±¡ä¸­çš„æ•°æ®</span><br><span class="line">    request.session.flush()</span><br><span class="line">    # é‡å®šå‘åˆ°ä¸»é¡µé¢</span><br><span class="line">    return redirect('/')</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_captcha(request):</span><br><span class="line">    """è·å–éªŒè¯ç å›¾ç‰‡"""</span><br><span class="line">    code = random_text()</span><br><span class="line">    image_data = Captcha.instance().generate(code)</span><br><span class="line">    request.session['code'] = code</span><br><span class="line">    return HttpResponse(image_data, content_type='image/png')</span><br></pre></td></tr></table></figure>

<p>â‘¢: ç½‘é¡µæ¨¡æ¿<br>é¦–é¡µå­¦ç§‘é¡µ</p>
<figure class="highlight diff"><figcaption><span>templates/subjects.html</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;é¦–é¡µ&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            width: 920px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line">        .subject &#123;</span><br><span class="line">            margin: 20px 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .sname &#123;</span><br><span class="line">            font: bold 28px Arial;</span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            color: blue;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">        &#125;</span><br><span class="line">        .nav &#123;</span><br><span class="line">            float: right;</span><br><span class="line">            margin-top: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .nav+h2 &#123;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class="nav"&gt;</span><br><span class="line">        &#123;% if request.session.userid %&#125;</span><br><span class="line">        &#123;&#123; request.session.username &#125;&#125;</span><br><span class="line">        &lt;a href="/logout/"&gt;æ³¨é”€&lt;/a&gt;</span><br><span class="line">        &#123;% else %&#125;</span><br><span class="line">        &lt;a href="/login/"&gt;ç™»å½•&lt;/a&gt;&amp;nbsp;</span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">        &lt;a href=""&gt;æ³¨å†Œ&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;æ‰€æœ‰å­¦ç§‘&lt;/h2&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &#123;% for subject in subjects %&#125;</span><br><span class="line">    &lt;div class="subject"&gt;</span><br><span class="line">        &lt;p class="sname"&gt;</span><br><span class="line">            &lt;a href="/teachers/?sno=&#123;&#123; subject.no &#125;&#125;"&gt;&#123;&#123; subject.name &#125;&#125;&lt;/a&gt;</span><br><span class="line">            &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">            &#123;% if subject.is_hot %&#125;</span><br><span class="line">            &lt;img src='/static/images/hot-icon-small.png'&gt;</span><br><span class="line">            &#123;% endif %&#125;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; subject.intro &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>æ•™å¸ˆä¿¡æ¯é¡µ</p>
<figure class="highlight diff"><figcaption><span>templates/teachers.html</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;è€å¸ˆä¿¡æ¯&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            width: 920px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line">        .teacher &#123;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">        .photo &#123;</span><br><span class="line">            margin-top: 20px;</span><br><span class="line">            width: 140px;</span><br><span class="line">            height: 140px;</span><br><span class="line">            border-radius: 70px 70px 70px 70px;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line">        .content &#123;</span><br><span class="line">            margin-left: 60px;</span><br><span class="line">            width: 580px;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line">        .keyinfo &#123;</span><br><span class="line">            font: bold 18px Arial;</span><br><span class="line">        &#125;</span><br><span class="line">        .back &#123;</span><br><span class="line">            float: right;</span><br><span class="line">            margin-top: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .back&gt;a &#123;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            color: blue;</span><br><span class="line">        &#125;</span><br><span class="line">        .back+h2 &#123;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class="back"&gt;</span><br><span class="line">        &lt;a href="/"&gt;è¿”å›é¦–é¡µ&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; subject.name &#125;&#125;å­¦ç§‘è€å¸ˆä¿¡æ¯&lt;/h2&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &#123;% for teacher in teachers %&#125;</span><br><span class="line">    &lt;div class="teacher"&gt;</span><br><span class="line">        &lt;div class="photo"&gt;</span><br><span class="line">            &lt;img src="&#123;&#123; teacher.photo.url &#125;&#125;" width="140"&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class="content"&gt;</span><br><span class="line">            &lt;p class="keyinfo"&gt;</span><br><span class="line">                &#123;&#123; teacher.name &#125;&#125;&amp;nbsp;&amp;nbsp;</span><br><span class="line">                &#123;&#123; teacher.sex | yesno:"ç”·, å¥³" &#125;&#125;&amp;nbsp;&amp;nbsp;</span><br><span class="line">                &#123;&#123; teacher.birth &#125;&#125;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &#123;&#123; teacher.intro &#125;&#125;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p class="comment"&gt;</span><br><span class="line">                &lt;a href="/praise/?tno=&#123;&#123; teacher.no &#125;&#125;"&gt;å¥½è¯„&lt;/a&gt;ï¼ˆ&lt;span&gt;&#123;&#123; teacher.good_count &#125;&#125;&lt;/span&gt;ï¼‰&amp;nbsp;&amp;nbsp;</span><br><span class="line">                &lt;a href="/criticize/?tno=&#123;&#123; teacher.no &#125;&#125;"&gt;å·®è¯„&lt;/a&gt;ï¼ˆ&lt;span&gt;&#123;&#123; teacher.bad_count &#125;&#125;&lt;/span&gt;ï¼‰</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">    &lt;script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    // $()å‡½æ•°ä¸­çš„ç®­å¤´å‡½æ•°æ˜¯é¡µé¢åŠ è½½å®Œæˆä¹‹åè¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°</span><br><span class="line">    $(() =&gt; &#123;</span><br><span class="line">        let flag = true</span><br><span class="line">        // é€šè¿‡$(é€‰æ‹©å™¨)è·å–é¡µé¢å…ƒç´ ç»‘å®šç‚¹å‡»äº‹ä»¶</span><br><span class="line">        // onæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶å ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶å›è°ƒå‡½æ•°</span><br><span class="line">        // äº‹ä»¶å›è°ƒå‡½æ•°çš„å‚æ•°evtæ˜¯ä»£è¡¨äº‹ä»¶çš„å¯¹è±¡</span><br><span class="line">        $('.comment&gt;a').on('click', (evt) =&gt; &#123;</span><br><span class="line">            // é˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼ˆé¿å…ç›´æ¥åˆ·æ–°é¡µé¢ï¼‰</span><br><span class="line">            evt.preventDefault()</span><br><span class="line">            if (flag) &#123;</span><br><span class="line">                // å®ç°å‡½æ•°èŠ‚æµ</span><br><span class="line">                flag = false</span><br><span class="line">                setTimeout(() =&gt; &#123; flag = true &#125;, 2000)</span><br><span class="line">                // é€šè¿‡äº‹ä»¶å¯¹è±¡è·å–äº‹ä»¶æºå¹¶ç”±$å‡½æ•°è½¬æˆjQueryå¯¹è±¡</span><br><span class="line">                let anchor = $(evt.target)</span><br><span class="line">                // é€šè¿‡jQueryå¯¹è±¡çš„getJSONæ–¹æ³•å‘èµ·Ajaxè¯·æ±‚</span><br><span class="line">                // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„URL</span><br><span class="line">                // ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚å®Œæˆä¹‹åè¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°</span><br><span class="line">                $.getJSON(anchor.attr('href'), (json) =&gt; &#123;</span><br><span class="line">                    if (json.code == 10000) &#123; // æŠ•ç¥¨æˆåŠŸ</span><br><span class="line">                        // è·å–ä¸aæ ‡ç­¾ç›¸é‚»çš„spanæ ‡ç­¾</span><br><span class="line">                        let span = anchor.next()</span><br><span class="line">                        // å°†spanæ ‡ç­¾çš„å€¼åŠ 1å†å†™å›spanæ ‡ç­¾</span><br><span class="line">                        span.text(parseInt(span.text()) + 1)</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        alert(json.message)</span><br><span class="line">                        if (json.code == 10002) &#123;</span><br><span class="line">                            location.href = '/login/?backurl=' + btoa('/teachers/?sno=&#123;&#123; subject.no &#125;&#125;')</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                alert('æ“ä½œå¤ªé¢‘ç¹')</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>ç™»å½•é¡µ</p>
<figure class="highlight diff"><figcaption><span>templates/login.html</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;ç”¨æˆ·ç™»å½•&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #container &#123;</span><br><span class="line">            width: 920px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line">        .input, form+a &#123;</span><br><span class="line">            margin: 30px 10px;</span><br><span class="line">            width: 400px;</span><br><span class="line">            height: 32px;</span><br><span class="line">        &#125;</span><br><span class="line">        .input&gt;input &#123;</span><br><span class="line">            border: none;</span><br><span class="line">            outline: none;</span><br><span class="line">            border-bottom: 1px dotted darkgray;</span><br><span class="line">            width: 180px;</span><br><span class="line">        &#125;</span><br><span class="line">        .input:last-child&gt;input &#123;</span><br><span class="line">            border: none;</span><br><span class="line">            background-color: red;</span><br><span class="line">            color: white;</span><br><span class="line">            width: 80px;</span><br><span class="line">            height: 25px;</span><br><span class="line">        &#125;</span><br><span class="line">        .input&gt;label &#123;</span><br><span class="line">            display: inline-block;</span><br><span class="line">            width: 80px;</span><br><span class="line">            text-align: right;</span><br><span class="line">        &#125;</span><br><span class="line">        .input:last-child &#123;</span><br><span class="line">            text-align: center;</span><br><span class="line">            border: none;</span><br><span class="line">            margin-left: -20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .input&gt;img &#123;</span><br><span class="line">            vertical-align: middle;</span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            color: blue;</span><br><span class="line">        &#125;</span><br><span class="line">        .hint &#123;</span><br><span class="line">            font-size: 12px;</span><br><span class="line">            color: red;</span><br><span class="line">            height: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id="container"&gt;</span><br><span class="line">        &lt;h2&gt;ç”¨æˆ·ç™»å½•&lt;/h2&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;p class="hint"&gt;&#123;&#123; hint &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;form action="/login/?backurl=&#123;&#123; backurl &#125;&#125;" method="post"&gt;</span><br><span class="line">            &#123;% csrf_token %&#125;</span><br><span class="line">            &lt;div class="input"&gt;</span><br><span class="line">                &lt;label&gt;ç”¨æˆ·åï¼š&lt;/label&gt;</span><br><span class="line">                &lt;input type="text" name="username"&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class="input"&gt;</span><br><span class="line">                &lt;label&gt;å¯†ç ï¼š&lt;/label&gt;</span><br><span class="line">                &lt;input type="password" name="password"&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class="input"&gt;</span><br><span class="line">                &lt;label&gt;éªŒè¯ç ï¼š&lt;/label&gt;</span><br><span class="line">                &lt;input type="text" name="captcha"&gt;</span><br><span class="line">                &lt;img id="code" src="/captcha/" height="33"&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class="input"&gt;</span><br><span class="line">                &lt;input type="submit" value="ç™»å½•"&gt;</span><br><span class="line">                &lt;input type="reset" value="é‡ç½®"&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">        &lt;a href="/"&gt;è¿”å›é¦–é¡µ&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    $(() =&gt; &#123;</span><br><span class="line">        $('#code').on('click', (evt) =&gt; &#123;</span><br><span class="line">            $(evt.target).attr('src', '/captcha/?' + Math.random())</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>é¡µé¢å¸ƒå±€å®Œæˆ!</p>
<p>â‘£:  è¡¥å……<br>åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹static, ä¸“é—¨ç”¨æ¥å­˜æ”¾é™æ€èµ„æº,åœ¨staticä¸‹åˆ›å»ºcss, js, imageæ–‡ä»¶å¤¹,åˆ†åˆ«ç”¨æ¥å­˜æ”¾æ ·å¼è¡¨, jsæ–‡ä»¶, å›¾ç‰‡èµ„æº<br>ä¸ºäº†è®©htmlæ–‡ä»¶èƒ½å¤Ÿæ‰¾åˆ°ä¿å­˜é™æ€èµ„æºçš„æ–‡ä»¶å¤¹ï¼Œè¿˜éœ€è¦ä¿®æ”¹Djangoé¡¹ç›®çš„é…ç½®æ–‡ä»¶settings.py</p>
<figure class="highlight diff"><figcaption><span>polls/settings.py</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="addition">+ STATICFILES_DIRS = [os.path.join(BASE_DIR, 'static'), ]</span></span><br><span class="line">  STATIC_URL = '/static/'</span><br></pre></td></tr></table></figure>
<p>æœ€ååœ¨ä½¿ç”¨æ—¶éœ€è¦åœ¨htmlæ–‡ä»¶ä¸­è¾ƒå‰çš„ä½ç½®åŠ å…¥ä»£ç </p>
<figure class="highlight diff"><figcaption><span>å¼•ç”¨æœ¬åœ°é™æ€æ–‡ä»¶</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"><span class="addition">+&#123;% load staticfiles %&#125;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">	&lt;meta charset="utf-8"&gt;</span><br><span class="line">	&lt;title&gt;&lt;/title&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-å†è¡¥å……ä¸€ç‚¹"><a href="#5-å†è¡¥å……ä¸€ç‚¹" class="headerlink" title="5. å†è¡¥å……ä¸€ç‚¹"></a>5. å†è¡¥å……ä¸€ç‚¹</h2><h3 id="cookieå’Œsessionçš„å…³ç³»"><a href="#cookieå’Œsessionçš„å…³ç³»" class="headerlink" title="cookieå’Œsessionçš„å…³ç³»"></a>cookieå’Œsessionçš„å…³ç³»</h3><p>HTTPåè®®æ˜¯æ— è¿æ¥æ— çŠ¶æ€åè®®   â€”&gt;<br>ä¸¤æ¬¡è¯·æ±‚ä¹‹é—´ä¸ä¼šä¿å­˜ç”¨æˆ·çš„ä»»ä½•æ•°æ®;<br>å†æ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™æœåŠ¡å™¨æ— æ³•å¾—çŸ¥è¯·æ±‚æ˜¯æ¥è‡ªå“ªä¸ªç”¨æˆ·çš„è¯·æ±‚;<br>ä¸€èˆ¬æƒ…å†µä¸‹æœåŠ¡å™¨åº”ç”¨éƒ½éœ€è¦è®°ä½ç”¨æˆ·æ¥ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„æœåŠ¡;<br>å¦‚æœå¸Œæœ›æœåŠ¡å™¨è®°ä½ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§è¾…åŠ©æ–¹å¼:</p>
<ol>
<li>URLé‡å†™<a href="http://www.baidu.com/?uid=xxxxxx" target="_blank" rel="noopener">http://www.baidu.com/?uid=xxxxxx</a></li>
<li>éšè—åŸŸ(éšå¼è¡¨å•åŸŸ)   â€”&gt;   åŸ‹ç‚¹<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">&lt;form&gt;</span><br><span class="line">    &lt;<span class="keyword">input</span> <span class="keyword">type</span>="hidden"<span class="type">name</span>="uid"<span class="keyword">value</span>="xxxxxx"&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></li>
<li>æµè§ˆå™¨æœ¬åœ°å­˜å‚¨<br> ~ cookie   â€”&gt;   æµè§ˆå™¨ä¸­çš„é›¶é£Ÿæ–‡ä»¶,å¯ä»¥ä¿å­˜é”®å€¼å¯¹;cookieä¸­çš„æ•°æ®åœ¨å‘èµ·HTTPè¯·æ±‚æ—¶ä¼šè‡ªåŠ¨åŠ è½½åˆ°è¯·æ±‚å¤´ä¸­<br> ~ window.localStorage / window.sessionStorage</li>
</ol>
<p>request.session   â€”&gt;   å­˜å‚¨ç™»å½•æˆåŠŸçš„ç”¨æˆ·ä¿¡æ¯,sessionæ˜¯æœåŠ¡å™¨å†…çš„ä¸€ä¸ªå¯¹è±¡<br>cookie   -â€”-&gt;   ç”¨æˆ·æµè§ˆå™¨ä¸´æ—¶æ–‡ä»¶   -â€”-&gt;   cookieä¸­ä¿å­˜äº†sessionçš„ID</p>
<h3 id="ç¼–ç å°çŸ¥è¯†"><a href="#ç¼–ç å°çŸ¥è¯†" class="headerlink" title="ç¼–ç å°çŸ¥è¯†"></a>ç¼–ç å°çŸ¥è¯†</h3><p>é€šå¸¸å¦‚æœä¸€æ ·ä¸œè¥¿éœ€è¦ç¼–ç ï¼Œè¯´æ˜è¿™æ ·ä¸œè¥¿å¹¶ä¸é€‚åˆä¼ è¾“ã€‚åŸå› å¤šç§å¤šæ ·ï¼Œå¦‚Sizeè¿‡å¤§ï¼ŒåŒ…å«éšç§æ•°æ®ï¼Œå¯¹äºUrlæ¥è¯´ï¼Œä¹‹æ‰€ä»¥è¦è¿›è¡Œç¼–ç ï¼Œæ˜¯å› ä¸ºUrlä¸­æœ‰äº›å­—ç¬¦ä¼šå¼•èµ·æ­§ä¹‰ã€‚</p>
<h4 id="BASE64ç¼–ç "><a href="#BASE64ç¼–ç " class="headerlink" title="BASE64ç¼–ç "></a>BASE64ç¼–ç </h4><p>ç”¨64ä¸ªæ–‡å­—ç¬¦å·è¡¨ç¤ºä»»æ„äºŒè¿›åˆ¶æ•°æ®<br>åŸç†ï¼šå°†åŸæ¥çš„ä¸‰å­—èŠ‚æ¯6ä¸ªæ¯”ç‰¹ä¸€ç»„å˜æˆå››ä¸ªå­—èŠ‚<br>ç”¨A-Zã€a-zã€0-9ã€+å’Œ/ä¸€å…±64ä¸ªå­—ç¬¦æ¥ä»£è¡¨ä¸€ä¸ªå­—èŠ‚</p>
<figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">from</span> <span class="keyword">base64 </span><span class="meta">import</span> <span class="keyword">b64encode, </span><span class="keyword">b64decode</span></span><br><span class="line"><span class="keyword">	</span># ç¼–ç é’±éœ€è¦å…ˆè½¬ä¸ºå­—èŠ‚</span><br><span class="line">	ç¼–ç /è§£ç ï¼š<span class="keyword">b64encode/b64decode</span></span><br><span class="line"><span class="keyword">ä»£ç æ¼”ç¤ºï¼šbackurl </span>= <span class="keyword">b64decode(backurl).decode() </span><span class="meta">if</span> <span class="keyword">backurl </span><span class="meta">else</span> <span class="string">'/'</span></span><br></pre></td></tr></table></figure>
<h4 id="ç™¾åˆ†å·ç¼–ç -Urlç¼–ç "><a href="#ç™¾åˆ†å·ç¼–ç -Urlç¼–ç " class="headerlink" title="ç™¾åˆ†å·ç¼–ç (Urlç¼–ç )"></a>ç™¾åˆ†å·ç¼–ç (Urlç¼–ç )</h4><p>ä½¿ç”¨%ç™¾åˆ†å·åŠ ä¸Šä¸¤ä½çš„å­—ç¬¦(åå…­è¿›åˆ¶0~F)ã€‚URLç¼–ç é»˜è®¤ä½¿ç”¨çš„å­—ç¬¦é›†æ˜¯US-ASCIIã€‚ä¾‹å¦‚ a åœ¨US-ASCIIç ä¸­å¯¹åº”çš„å­—èŠ‚æ˜¯0x61ï¼Œé‚£ä¹ˆURLç¼–ç ä¹‹åå¾—åˆ°çš„å°± æ˜¯%61ï¼Œæˆ‘ä»¬åœ¨åœ°å€æ ä¸Šè¾“å…¥;åˆå¦‚@ç¬¦å·åœ¨ASCIIå­—ç¬¦é›†ä¸­å¯¹åº”çš„å­—èŠ‚ä¸º0x40ï¼Œç»è¿‡URLç¼–ç ä¹‹åå¾—åˆ°çš„æ˜¯%40ã€‚</p>
<h4 id="å¸¸ç”¨çŸ¥è¯†ç‚¹"><a href="#å¸¸ç”¨çŸ¥è¯†ç‚¹" class="headerlink" title="å¸¸ç”¨çŸ¥è¯†ç‚¹"></a>å¸¸ç”¨çŸ¥è¯†ç‚¹</h4><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">python manage.py runserver   <span class="comment">---&gt;   è¿è¡ŒdjangoæœåŠ¡å™¨</span></span><br><span class="line">python manage.py createsuperuser   <span class="comment">---&gt;   åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦å·</span></span><br><span class="line">python manage.py makemigrations polls   <span class="comment">---&gt;  è¿ç§»æ–‡ä»¶</span></span><br><span class="line">python manage.py migrate   <span class="comment">---&gt;  æ‰§è¡Œè¿ç§»</span></span><br><span class="line"></span><br><span class="line">Teacher.objects.<span class="keyword">filter</span>(nums=tnums).first()   <span class="comment">---&gt;   è·å–numså’Œtnumsç›¸ç­‰çš„æ•™å¸ˆçš„æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">request.path   <span class="comment">---&gt;   å¾—åˆ°è¯·æ±‚è·¯å¾„</span></span><br><span class="line">request.<span class="keyword">method</span>   <span class="comment">---&gt;   å¾—åˆ°è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">request.POST.<span class="keyword">get</span>(<span class="string">'username'</span>, <span class="string">''</span>)   <span class="comment">---&gt;   è·å–postè¯·æ±‚æä¾›çš„usernameå¯¹åº”çš„å€¼,è‹¥æ²¡æœ‰usernameå¯¹åº”çš„å€¼åˆ™è·å–ç©ºä¸²</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> JsonResponse(data)   <span class="comment">---&gt;   ç›´æ¥è¿”å›jsonæ ¼å¼çš„æ•°æ®</span></span><br><span class="line">render(request, )   <span class="comment">---&gt;   æ¸²æŸ“é¡µé¢,å¿…å®šæœ‰requestå‚æ•°</span></span><br><span class="line">redirect()   <span class="comment">---&gt;   é¡µé¢é‡å®šå‘</span></span><br><span class="line"></span><br><span class="line">pip install -r requirements.txt   <span class="comment">---&gt;   æ ¹æ®ä¾èµ–é¡¹æ–‡ä»¶å®‰è£…ä¾èµ–</span></span><br><span class="line">pip <span class="keyword">freeze</span> &gt; requirements.txt   <span class="comment">---&gt;    é‡å†™ä¾èµ–é¡¹æ¸…å•</span></span><br></pre></td></tr></table></figure>


<h2 id="6-æœ€åå°ç»“"><a href="#6-æœ€åå°ç»“" class="headerlink" title="6. æœ€åå°ç»“"></a>6. æœ€åå°ç»“</h2><h3 id="é¡¹ç›®æµç¨‹"><a href="#é¡¹ç›®æµç¨‹" class="headerlink" title="é¡¹ç›®æµç¨‹"></a>é¡¹ç›®æµç¨‹</h3><p>django-admin startproject é¡¹ç›®åç§°   â€”&gt;   åˆ›å»ºé¡¹ç›®<br>git init   â€”&gt;   å°†é¡¹ç›®æ–‡ä»¶å¤¹åˆå§‹åŒ–æˆgitä»“åº“<br>vim .gitignore   â€”&gt;   åˆ›å»º.gitignoreæ–‡ä»¶,å°†ä¸è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶åæ”¾è¿›å»,<br>gitignore.io   â€”&gt;   ç‰ˆæœ¬å¿½ç•¥æ–‡ä»¶ç”Ÿæˆç½‘ç«™<br>vim requirements.txt   â€”&gt;   åˆ›å»ºé¡¹ç›®ä¾èµ–é¡¹æ–‡ä»¶</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">åŠ å…¥é¡¹ç›®éœ€è¦çš„ä¾èµ–é¡¹</span><br><span class="line"><span class="attribute">Django</span>==2.2.9</span><br><span class="line"><span class="attribute">django-jet</span>==1.0.8</span><br><span class="line"><span class="attribute">django-redis</span>==4.11.0</span><br><span class="line"><span class="attribute">mysqlclient</span>==1.4.6</span><br><span class="line"><span class="attribute">pytz</span>==2019.3</span><br><span class="line"><span class="attribute">redis</span>==3.3.11</span><br><span class="line"><span class="attribute">sqlparse</span>==0.3.0</span><br></pre></td></tr></table></figure>

<h3 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h3><pre><code>git add .
git status
git commit -m &apos;é¡¹ç›®åˆå§‹ç‰ˆæœ¬&apos;
git status
git log
git tag v0.1
git remote add origin git@gitee.com:anjhon1994/djangocase.git   # åœ°å€å…³è”
git remote remove origin   # å–æ¶ˆå…³è”
rm -rf .git   # å–æ¶ˆä»“åº“åˆå§‹åŒ–
git push -u origin master   # æ¨é€
git remote -v   # æŸ¥çœ‹è¿œç«¯ä»“åº“çš„åœ°å€</code></pre><br>
<hr>



<p>ğŸŒç›¸å…³æ–‡æ¡£è¿æ¥:<br>    <a href="https://gitee.com/anjhon1994/Django1906" target="_blank" rel="noopener">ç‚¹å‡»ä¸‹è½½æœ¬æ–‡å®Œæ•´ä»£ç </a><br>    <a href="https://developer.mozilla.org/zh-CN/docs/learn/Server-side/Django/Introduction" target="_blank" rel="noopener">MDN-Djangoä»‹ç»</a><br>    <a href="https://github.com/jackfrued/Python-100-Days/blob/master/Day91-100/95.%E4%BD%BF%E7%94%A8Django%E5%BC%80%E5%8F%91%E5%95%86%E4%B8%9A%E9%A1%B9%E7%9B%AE.md" target="_blank" rel="noopener">å¤§ä½¬è¯¦ç»†æ•™ç¨‹</a></p>
]]></content>
      <categories>
        <category>Django</category>
      </categories>
      <tags>
        <tag>æ¡†æ¶</tag>
        <tag>åç«¯</tag>
        <tag>Django</tag>
      </tags>
  </entry>
  <entry>
    <title>æµ…æµ…æµ…è°ˆæ•°æ®åº“</title>
    <url>/2019/12/28/%E6%B5%85%E6%B5%85%E6%B5%85%E8%B0%88%E6%95%B0%E6%8D%AE%E5%BA%93/</url>
    <content><![CDATA[<p>æ•°æ®åº“ä¸€å‘¨å°ç»“</p>
<a id="more"></a>

<p>æ•°æ®åº“ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»,åˆ†åˆ«æ˜¯å…³ç³»å‹æ•°æ®åº“(SQL)å’Œéå…³ç³»å‹æ•°æ®åº“(NOSQL);åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­Oracleå’ŒMySQLæ˜¯æœ€å…·æœ‰ä»£è¡¨æ€§çš„ä¸¤ä¸ª,åœ¨éå…³ç³»å‹æ•°æ®åº“ä¸­MongoDBå’ŒRedisä¹Ÿæ˜¯æ¦œä¸Šæœ‰å. è€Œæœ¬å‘¨çš„å­¦ä¹ ä¸­,ä¸»è¦å¯¹MySQLå’ŒRedisè¿›è¡Œäº†æ·±å…¥çš„å­¦ä¹ .</p>
<p><img src="https://github.com/anjhon1994/some_image/blob/master/%E6%95%B0%E6%8D%AE%E5%BA%9319%E5%B9%B412%E6%9C%88%E4%BD%BF%E7%94%A8%E6%8E%92%E8%A1%8C.png?raw=true" alt=""></p>
<h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><p>MySQLä¸»è¦ä½¿ç”¨SQLè¯­è¨€è¿›è¡Œå¢åˆ æŸ¥æ”¹æ“ä½œ;<br>SQLæ˜¯ä¸€ç§ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€,SQLè¯­è¨€åˆåˆ†ä¸ºDDL(æ•°æ®å®šä¹‰è¯­è¨€), DML(æ•°æ®æ“ä½œè¯­è¨€), DCL(æ•°æ®æ§åˆ¶è¯­è¨€)</p>
<h2 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h2><h3 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h3><p>1.åˆ›å»ºæ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span> utf8;   <span class="comment">--è‹¥dbnameä¸å­˜åœ¨,åˆ™æŒ‰ç¼–ç æ–¹å¼ä¸ºutf8æ¥æ–°å»ºæ•°æ®åº“</span></span><br></pre></td></tr></table></figure>
<p>2.åˆ é™¤æ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> dbname;  <span class="comment">-- è‹¥æ•°æ®åº“dbnameå­˜åœ¨å°±åˆ é™¤è¯¥æ•°æ®åº“</span></span><br></pre></td></tr></table></figure>
<p>3.åˆ‡æ¢/ä½¿ç”¨æ•°æ®åº“</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">USE</span> dbname;  <span class="comment">-- åˆ‡æ¢åæ‰§è¡Œçš„æ“ä½œå‡åªå¯¹å½“å‰æ•°æ®åº“æœ‰æ•ˆ</span></span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®è¡¨æ“ä½œ"><a href="#æ•°æ®è¡¨æ“ä½œ" class="headerlink" title="æ•°æ®è¡¨æ“ä½œ"></a>æ•°æ®è¡¨æ“ä½œ</h3><p>1.åˆ›å»ºæ•°æ®è¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> tablname(filed1 <span class="keyword">type</span> constraint1, filed2 <span class="keyword">type</span> constraint2, ...);   <span class="comment">-- åˆ›å»ºä»¥field1,filed2..ä¸ºè¡¨å¤´çš„æ•°æ®è¡¨</span></span><br><span class="line"><span class="comment">-- åœ¨SQLä¸­å¸¸è§çš„type: int, float, varchar/text, bit, date   (varcharåé€šå¸¸éœ€è¦é™åˆ¶å­—ç¬¦ä¸²çš„é•¿åº¦)</span></span><br><span class="line"><span class="comment">-- å¸¸è§çš„constraint: not null, unique, default, primary key, foreign key, auto_increment</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--æ³¨:å¤–é”®çº¦æŸçš„ç±»å‹æœ‰ä¸€å¯¹ä¸€,ä¸€å¯¹å¤š,å¤šå¯¹å¤šä¸‰ç§, å¤–é”®æ·»åŠ çš„æ–¹å¼å„ä¸ç›¸åŒ</span></span><br><span class="line"><span class="comment">-- ä¸€å¯¹ä¸€: å¯ä»¥æ·»åŠ åˆ°ä»»æ„ä¸€æ–¹;</span></span><br><span class="line"><span class="comment">-- ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€: æ·»åŠ åˆ°å¤šçš„ä¸€æ–¹;</span></span><br><span class="line"><span class="comment">-- å¤šå¯¹å¤š: ä¸¤å¼ è¡¨æ²¡æœ‰åŠæ³•ç›´æ¥å»ºç«‹å¤šå¯¹å¤šçš„å¯¹åº”å…³ç³»,éœ€è¦ç¬¬ä¸‰å¼ è¡¨è¾…åŠ©</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ç¤ºä¾‹:</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> tb_student</span><br><span class="line">(</span><br><span class="line">stuid <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> auto_increment,</span><br><span class="line">stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">stubirth <span class="built_in">DATE</span>,</span><br><span class="line">stugender <span class="built_in">bit</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>,</span><br><span class="line">stutel <span class="built_in">VARCHAR</span>(<span class="number">11</span>) <span class="keyword">UNIQUE</span></span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (stuid)  ä¸»é”®çº¦æŸè¿˜å¯ä»¥å•ç‹¬è®¾ç½®</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>2.åˆ é™¤è¡¨</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">EXISTS</span> tablname;</span><br></pre></td></tr></table></figure>

<p>3.ä¿®æ”¹è¡¨</p>
<p>â‘ :æ·»åŠ å­—æ®µ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablname <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> <span class="keyword">field</span> <span class="keyword">type</span> <span class="keyword">constraint</span>;</span><br></pre></td></tr></table></figure>
<p>â‘¡:åˆ é™¤å­—æ®µ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablname <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> <span class="keyword">field</span>;</span><br></pre></td></tr></table></figure>
<p>â‘¢:ä¿®æ”¹å­—æ®µå</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablname <span class="keyword">CHANGE</span> <span class="keyword">field</span> new_filed new_type;</span><br></pre></td></tr></table></figure>
<p>â‘£:æ·»åŠ çº¦æŸ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablname <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> consname <span class="keyword">constraint</span>(filed);</span><br></pre></td></tr></table></figure>
<p>â‘¤:åˆ é™¤çº¦æŸ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablname <span class="keyword">DROP</span> <span class="keyword">INDEX</span> <span class="keyword">constraint</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablname <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> <span class="keyword">KEY</span> <span class="keyword">constraint</span>;</span><br></pre></td></tr></table></figure>

<h2 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h2><p>1.INSERT(å¢)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tablname(field1, field2, ...) <span class="keyword">VALUES</span>(value1, value2, ...),(value11, value22, ...), (value111, value222, ...), ...;</span><br></pre></td></tr></table></figure>
<p>2.DELETE(åˆ )</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tablename <span class="keyword">WHERE</span> æ¡ä»¶è¯­å¥;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¡¥å……:</span></span><br><span class="line">sq1æ¡ä»¶è¯­å¥çš„å†™æ³•(ç­›é€‰)(æ¡ä»¶è¯­å¥åœ¨å†™çš„æ—¶å€™å¯ä»¥é€šè¿‡åŠ ()æ”¹å˜è¿ç®—é¡ºåº)</span><br><span class="line"><span class="comment">-- æ¯”è¾ƒè¿ç®—:=(ç­‰äº),&lt;&gt;(ä¸ç­‰äº),&gt;,&lt;,&gt;=,&lt;=</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stuname=<span class="string">'çœŸåˆš'</span>;</span><br><span class="line"><span class="comment">-- é€»è¾‘è¿ç®—:and(é€»è¾‘ä¸),or(é€»è¾‘æˆ–),not(é€»è¾‘é);</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stuid&gt;=<span class="number">35</span> <span class="keyword">AND</span> stugender&lt;&gt;<span class="number">1</span>;</span><br><span class="line"><span class="comment">-- é›†åˆåŒ…å«:in</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stuname <span class="keyword">in</span> (<span class="string">'é€é¥å­'</span>, <span class="string">'éŸ©ä¿¡'</span>, <span class="string">'æ–­æ°´'</span>);</span><br><span class="line"><span class="comment">-- èŒƒå›´:between...and</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stubirth <span class="keyword">BETWEEN</span> <span class="string">'1976-8-21'</span> <span class="keyword">AND</span> <span class="string">'1976-8-31'</span>;</span><br><span class="line"><span class="comment">-- åˆ¤æ–­æ˜¯å¦ä¸ºç©º:is null,is not null</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> (stubirth <span class="keyword">IS</span> <span class="literal">NULL</span>) <span class="keyword">AND</span> (stutel <span class="keyword">IS</span> <span class="literal">NULL</span>);</span><br><span class="line"><span class="comment">-- ç­›é€‰:like(% -&gt; ä»»æ„ä¸ªä»»æ„å­—ç¬¦; _  -&gt;  è¡¨ç¤ºå•ä¸ªä»»æ„å­—ç¬¦)</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stuname <span class="keyword">LIKE</span> <span class="string">'ç›–_ '</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stutel <span class="keyword">LIKE</span> <span class="string">'%2_'</span>;</span><br></pre></td></tr></table></figure>
<p>3.UPDATE(æ”¹)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> tablname <span class="keyword">SET</span> field1=value1, field1=value2, ... <span class="keyword">WHERE</span> æ¡ä»¶è¯­å¥;</span><br></pre></td></tr></table></figure>
<p>4.SELECT(æŸ¥)</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tablname;  <span class="comment">--æŸ¥è¯¢è¡¨å†…æ‰€æœ‰å†…å®¹</span></span><br><span class="line"><span class="keyword">SELECT</span> field1, field2, field3, ... <span class="keyword">FROM</span> tablname;  <span class="comment">--è·å–è¡¨ä¸­æ‰€æœ‰è®°å½•æŒ‡å®šå­—æ®µçš„æ•°æ®</span></span><br><span class="line"><span class="keyword">SELECT</span> field1 <span class="keyword">AS</span> <span class="string">'new_filed1'</span>, field2, field3 <span class="keyword">AS</span> <span class="string">'new_field3'</span>, ... <span class="keyword">FROM</span> tablname;   <span class="comment">--åˆ—é‡å</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">IF</span>(field1, value1, value2) <span class="keyword">FROM</span> tablname;   <span class="comment">--å¦‚æœifä¸­å¯¹åº”çš„å­—æ®µçš„å€¼æ˜¯1,æœ€åç»“æœæ˜¯value1,å¦åˆ™æ˜¯value2(mysqlç‰¹æœ‰å†™æ³•)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> <span class="keyword">field</span> <span class="keyword">WHEN</span> <span class="number">1</span> <span class="keyword">THEN</span> new_value1 <span class="keyword">ELSE</span> new_value2 <span class="keyword">END</span> <span class="keyword">FROM</span> tablname;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CONCAT</span>(field1, field2, ...) <span class="keyword">FROM</span> tablname;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tablname <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">field</span>;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tablname <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">field</span> <span class="keyword">DESC</span>;   <span class="comment">-- å€’åº</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="keyword">field</span> <span class="keyword">FROM</span> tablname;   <span class="comment">-- å»é‡</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tablname <span class="keyword">LIMIT</span> N;   <span class="comment">-- é™åˆ¶(è·å–å‰Næ¡æ•°æ®)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è·³è¿‡å‰Næ¡æ•°æ®è·å–Mæ¡æ•°æ®(ä»ç¬¬N+1æ¡æ•°æ®å¼€å§‹,è·å–Mæ¡æ•°æ®)</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tablname <span class="keyword">LIMIT</span> M <span class="keyword">OFFSET</span> N;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tablname <span class="keyword">LIMIT</span> N, M; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- èšåˆ</span></span><br><span class="line"><span class="comment">-- MAX(), MIN(), SUM(), AVG(), COUNT()   -&gt;   MySQLä¸“ç”¨</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(score) <span class="keyword">AS</span> <span class="string">'æœ€é«˜åˆ†'</span> <span class="keyword">FROM</span> tb_record;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MIN</span>(score) <span class="keyword">AS</span> <span class="string">'æœ€ä½åˆ†'</span> <span class="keyword">FROM</span> tb_record;</span><br><span class="line">SELECT SUM(score) AS 'æ€»åˆ†' FROM tb_record;   -&gt;   -- æ±‚å’Œæ‰€æœ‰åˆ†æ•°çš„å’Œ,å¦‚æœæŸä¸€ä¸ªè®°å½•çš„åˆ†æ•°æ˜¯ç©º,é‚£ä¹ˆè¿™æ¡è®°å½•ä¸å­˜ä¸è¿ç®—</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(score) <span class="keyword">AS</span> <span class="string">'å¹³å‡åˆ†'</span> <span class="keyword">FROM</span> tb_record;  </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(score) <span class="keyword">AS</span> <span class="string">'ä¸ªæ•°'</span> <span class="keyword">FROM</span> tb_record; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- åˆ†ç»„</span></span><br><span class="line"><span class="keyword">SELECT</span> èšåˆæ“ä½œ <span class="keyword">FROM</span> tablname <span class="keyword">GROUP</span> <span class="keyword">BY</span> (<span class="keyword">field</span>);   <span class="comment">-- åˆ†ç»„åè¦åŠ æ¡ä»¶,åˆ™ç”¨havingä»£æ›¿where</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- å­æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">-- â‘ :å°†ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœä½œä¸ºå¦å¤–ä¸€ä¸ªæŸ¥è¯¢çš„æ¡ä»¶</span></span><br><span class="line"><span class="comment">-- â‘¡:å°†ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœä½œä¸ºå¦å¤–ä¸€ä¸ªæŸ¥è¯¢çš„å¯¹è±¡(æ³¨: è‹¥å°†æŸ¥è¯¢ç»“æœä½œä¸ºæŸ¥è¯¢å¯¹è±¡,åˆ™å¿…é¡»åœ¨ä½¿ç”¨æ—¶ç”¨asé‡å‘½å)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- è¿æ¥æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">--â‘ :å†…è¿æ¥</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tablname1, tablname2, ... <span class="keyword">WHERE</span> è¿æ¥æ¡ä»¶ æŸ¥è¯¢æ¡ä»¶;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tablname1 <span class="keyword">INNER</span> <span class="keyword">JOIN</span> tablname2 <span class="keyword">ON</span> è¿æ¥æ¡ä»¶<span class="number">1</span> <span class="keyword">INNER</span> <span class="keyword">JOIN</span> tablname3 <span class="keyword">ON</span> è¿æ¥æ¡ä»¶<span class="number">2</span>;(æ³¨æ„:å¦‚æœæœ‰ä¸­é—´è¡¨,ä¸­é—´è¡¨æ”¾åœ¨æœ€å‰é¢)</span><br><span class="line"><span class="comment">--æ³¨æ„:å¦‚æœæ—¢æœ‰è¿æ¥æ¡ä»¶åˆæœ‰æŸ¥è¯¢æ¡ä»¶,æŸ¥è¯¢æ¡ä»¶å¿…é¡»æ”¾åœ¨è¿æ¥æ¡ä»¶çš„åé¢</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--â‘¡:å¤–è¿æ¥</span></span><br><span class="line"><span class="comment">--åœ¨MySQLä¸­åªæ”¯æŒå·¦å¤–è¿æ¥(LEFT JOIN)å’Œå³å¤–è¿æ¥(right join)</span></span><br><span class="line">å·¦è¿æ¥: <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> è¡¨<span class="number">1</span> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> è¡¨<span class="number">2</span> : å…ˆå°†è¡¨<span class="number">1</span>ä¸­çš„è®°å½•å…¨éƒ¨å–å‡ºæ¥,æŒ‰è¿æ¥æ¡ä»¶ä¾æ¬¡è¿æ¥è¡¨<span class="number">2</span>ä¸­çš„è®°å½•,è¡¨<span class="number">1</span>ä¸­çš„è®°å½•æ‰¾ä¸åˆ°æ»¡è¶³æ¡ä»¶,åˆ™è¡¨<span class="number">2</span>è®°å½•é‚£ä¹ˆè¿æ¥çš„å†…å®¹å°±æ˜¯ç©º</span><br><span class="line">å³è¿æ¥: <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> è¡¨<span class="number">1</span> <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> è¡¨<span class="number">2</span> : å…ˆå°†è¡¨<span class="number">2</span>ä¸­çš„è®°å½•å…¨éƒ¨å–å‡ºæ¥,æŒ‰è¿æ¥æ¡ä»¶ä¾æ¬¡è¿æ¥è¡¨<span class="number">1</span>ä¸­çš„è®°å½•,è¡¨<span class="number">2</span>ä¸­çš„è®°å½•æ‰¾ä¸åˆ°æ»¡è¶³æ¡ä»¶,åˆ™è¡¨<span class="number">1</span>è®°å½•é‚£ä¹ˆè¿æ¥çš„å†…å®¹å°±æ˜¯ç©º</span><br></pre></td></tr></table></figure>

<h2 id="DCL"><a href="#DCL" class="headerlink" title="DCL"></a>DCL</h2><h3 id="ç”¨æˆ·ç®¡ç†"><a href="#ç”¨æˆ·ç®¡ç†" class="headerlink" title="ç”¨æˆ·ç®¡ç†"></a>ç”¨æˆ·ç®¡ç†</h3><p>1.åˆ›å»ºç”¨æˆ·</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">'username'</span>@<span class="string">'ç™»é™†åœ°å€'</span> <span class="keyword">identified</span> <span class="keyword">by</span> <span class="string">'password'</span>;</span><br><span class="line"><span class="comment">-- æ³¨:ç™»å½•åœ°å€æœ‰ä¸‰ç§å†™æ³•:</span></span><br><span class="line"><span class="comment">-- ipåœ°å€</span></span><br><span class="line"><span class="comment">-- localhost(æœ¬æœº)</span></span><br><span class="line"><span class="comment">-- %(ä»»æ„ä½ç½®)</span></span><br></pre></td></tr></table></figure>
<p>2.åˆ é™¤ç”¨æˆ·</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">'username'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="æˆæƒç®¡ç†"><a href="#æˆæƒç®¡ç†" class="headerlink" title="æˆæƒç®¡ç†"></a>æˆæƒç®¡ç†</h3><p>1.æˆæƒ</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> æƒé™ç±»å‹ <span class="keyword">ON</span> dataname.tablname <span class="keyword">TO</span> <span class="string">'username'</span>@<span class="string">'ç™»é™†åœ°å€'</span>;</span><br></pre></td></tr></table></figure>
<p>2.å¬å›æƒé™</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">REVOKE</span> æƒé™ç±»å‹ <span class="keyword">ON</span> dataname.tablname <span class="keyword">FROM</span> username;</span><br></pre></td></tr></table></figure>

<h3 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h3><p>è‹¥å®Œæˆä¸€ä¸ªä»»åŠ¡éœ€è¦å¤šä¸ªæ“ä½œ,ä½†åªè¦æœ‰ä¸€ä¸ªå¤±è´¥åˆ™ä»»åŠ¡ä¸å®Œæˆ,æ•°æ®å›åˆ°ä»»åŠ¡å¼€å§‹å‰çš„çŠ¶æ€;åªæœ‰æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸäº†,æ•°æ®åº“æ‰æ›´æ–°;æ­¤æ—¶ç”¨äº‹åŠ¡è¯­æ³•</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;   <span class="comment">-- å¼€å¯äº‹åŠ¡ç¯å¢ƒ </span></span><br><span class="line"><span class="keyword">UPDATE</span> tb_student <span class="keyword">SET</span> stubirth=<span class="string">'1993-1-1'</span> <span class="keyword">WHERE</span> stusex=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stuname <span class="keyword">LIKE</span> <span class="string">'æ¨%'</span></span><br><span class="line"><span class="keyword">COMMIT</span>;   <span class="comment">-- æäº¤äº‹åŠ¡ç¯å¢ƒä¸­çš„æ“ä½œç»“æœ</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>

<h3 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> è§†å›¾å <span class="keyword">AS</span> <span class="keyword">sql</span>æŸ¥è¯¢è¯­å¥;</span><br></pre></td></tr></table></figure>

<h3 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">--â‘ :æ·»åŠ ç´¢å¼•</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> ç´¢å¼•å <span class="keyword">ON</span> è¡¨å(å­—æ®µ);   <span class="comment">-- ç»™æŒ‡å®šå­—æ®µæ·»åŠ ç´¢å¼•</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> ç´¢å¼•å <span class="keyword">ON</span> è¡¨å(å­—æ®µ);    <span class="comment">-- ç»™æŒ‡å®šå­—æ®µæ·»åŠ å”¯ä¸€ç´¢å¼•</span></span><br><span class="line"><span class="comment">--â‘¡:åˆ é™¤ç´¢å¼•</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tablname <span class="keyword">DROP</span> <span class="keyword">INDEX</span> ç´¢å¼•å;</span><br></pre></td></tr></table></figure>



<h1 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h1><h2 id="Rediså‘½ä»¤"><a href="#Rediså‘½ä»¤" class="headerlink" title="Rediså‘½ä»¤"></a>Rediså‘½ä»¤</h2><p>ttl key â€”â€”&gt; æŸ¥çœ‹keyçš„å­˜æ´»æ—¶é—´<br>set key value ex N â€”â€”&gt; è®¾ç½®keyçš„å­˜æ´»æ—¶é—´ä¸ºNç§’<br>set key value px N â€”â€”&gt; è®¾ç½®keyçš„å­˜æ´»æ—¶é—´ä¸ºNæ¯«ç§’<br>shutdown  â€”â€”&gt; å…³é—­redisæœåŠ¡å™¨<br>shutdown save â€”â€”&gt; ä¿å­˜å¹¶å…³é—­redisæœåŠ¡å™¨<br>save â€”â€”&gt; ä¿å­˜<br>bgsave â€”â€”&gt; åå°ä¿å­˜<br>dbsize â€”â€”&gt; æŸ¥çœ‹æ•°æ®åº“å¤§å°<br>keys *  â€”â€”&gt; è·å–æ‰€æœ‰çš„key<br>keys ta*  â€”â€”&gt; è·å–taå¼€å¤´çš„key</p>
<p><strong>redisé»˜è®¤å¼€å¯äº†16ä¸ªæ•°æ®åº“</strong><br>select 0-15 â€”â€”&gt; åˆ‡æ¢æ•°æ®åº“<br>flushdb â€”â€”&gt; æ¸…ç©ºå½“å‰æ•°æ®åº“<br>flushall â€”â€”&gt; æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“</p>
<p>type keyp â€”â€”&gt; åˆ¤æ–­keyçš„ç±»å‹</p>
<h2 id="Redisçš„æ•°æ®ç±»å‹"><a href="#Redisçš„æ•°æ®ç±»å‹" class="headerlink" title="Redisçš„æ•°æ®ç±»å‹"></a>Redisçš„æ•°æ®ç±»å‹</h2><h3 id="1-å­—ç¬¦ä¸²-string"><a href="#1-å­—ç¬¦ä¸²-string" class="headerlink" title="1.å­—ç¬¦ä¸² - string"></a>1.å­—ç¬¦ä¸² - string</h3><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">key</span> <span class="keyword">value</span></span><br><span class="line"><span class="keyword">get</span> <span class="keyword">key</span></span><br><span class="line">strlen <span class="keyword">key</span></span><br><span class="line">append <span class="keyword">key</span> <span class="keyword">value</span> <span class="comment">------&gt; è¿½åŠ </span></span><br><span class="line">mset key1 value1 key2 value2 ... <span class="comment">------&gt; åŒæ—¶è®¾ç½®å¤šç»„å€¼</span></span><br><span class="line">mget key1 key2 ...</span><br><span class="line">incr <span class="keyword">key</span> <span class="comment">------&gt; å½“keyçš„å€¼ä¸ºæ•°å­—æ—¶,æ•°å€¼åŠ ä¸€</span></span><br><span class="line">incrby <span class="keyword">key</span> N <span class="comment">------&gt; ä¸ºkeyçš„å€¼åŠ N</span></span><br><span class="line">decr <span class="keyword">key</span> <span class="comment">------&gt; å‡ä¸€</span></span><br><span class="line">decrby <span class="keyword">key</span> N <span class="comment">------&gt; å‡N</span></span><br><span class="line">getrange <span class="keyword">key</span> m n <span class="comment">------&gt; ä»må–åˆ°n</span></span><br><span class="line">setrange <span class="keyword">key</span> N <span class="keyword">value</span> <span class="comment">------&gt; ä»nå¼€å§‹ç”¨valueè¦†ç›–keyçš„valueå€¼</span></span><br></pre></td></tr></table></figure>
<h3 id="2-å“ˆå¸Œ-hash"><a href="#2-å“ˆå¸Œ-hash" class="headerlink" title="2.å“ˆå¸Œ - hash"></a>2.å“ˆå¸Œ - hash</h3><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">hset <span class="built_in">key</span> field <span class="built_in">value</span> è®¾ç½®é”®å’Œå€¼</span><br><span class="line">hmset <span class="built_in">key</span> field1 value1 field2 value2 åŒæ—¶è®¾ç½®å¤šä¸ªé”®å’Œå€¼</span><br><span class="line">hget <span class="built_in">key</span> field  æŸ¥çœ‹æŒ‡å®šçš„é”®å¯¹åº”çš„å€¼</span><br><span class="line">hmget <span class="built_in">key</span> fieldl field2 åŒæ—¶æŸ¥çœ‹å¤šä¸ªé”®å’Œå€¼</span><br><span class="line">hgetall <span class="built_in">key</span> è·å–æ‰€æœ‰çš„å€¼å’Œé”®</span><br><span class="line">hkeys <span class="built_in">key</span> è·å–æ‰€æœ‰çš„é”®</span><br><span class="line">hvals <span class="built_in">key</span> è·å–æ‰€æœ‰çš„å€¼</span><br><span class="line">hexists <span class="built_in">key</span> filed åˆ¤æ–­æ˜¯å¦å­˜åœ¨å¯¹åº”çš„å€¼</span><br></pre></td></tr></table></figure>
<h3 id="3-åˆ—è¡¨-list"><a href="#3-åˆ—è¡¨-list" class="headerlink" title="3.åˆ—è¡¨ - list"></a>3.åˆ—è¡¨ - list</h3><figure class="highlight tcl"><table><tr><td class="code"><pre><span class="line">lpush <span class="keyword">list</span> value1 value2 ... æ’å…¥åˆ°æœ€å·¦è¾¹</span><br><span class="line">rpush <span class="keyword">list</span> value1 value2 ... æ’å…¥åˆ°æœ€å³è¾¹</span><br><span class="line">lpop <span class="keyword">list</span> å–æœ€å·¦è¾¹</span><br><span class="line">rpop <span class="keyword">list</span> å–æœ€å³è¾¹</span><br><span class="line"><span class="keyword">lrange</span> <span class="keyword">list</span> start end æŸ¥çœ‹åˆ—è¡¨ç‰‡æ®µ</span><br><span class="line"><span class="keyword">lindex</span> <span class="keyword">list</span> index æŸ¥çœ‹æŒ‡å®šä¸‹æ ‡å¯¹åº”çš„å…ƒç´ </span><br><span class="line">llen <span class="keyword">list</span> åˆ—è¡¨é•¿åº¦</span><br><span class="line">lrem <span class="keyword">list</span> count value åˆ é™¤æŒ‡å®šä¸ªæ•°çš„å…ƒç´ </span><br></pre></td></tr></table></figure>
<h3 id="4-é›†åˆ-set"><a href="#4-é›†åˆ-set" class="headerlink" title="4.é›†åˆ - set"></a>4.é›†åˆ - set</h3><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">sadd <span class="keyword">set</span> value1 value2 <span class="string">...</span> æ·»åŠ å…ƒç´ </span><br><span class="line">srem <span class="keyword">set</span> value ç§»é™¤å…ƒç´ </span><br><span class="line">spop <span class="keyword">set</span> è·å–éšæœºå…ƒç´ </span><br><span class="line">smembers <span class="keyword">set</span> æŸ¥çœ‹æ‰€æœ‰å…ƒç´ </span><br><span class="line">sismember <span class="keyword">set</span> value æŸ¥çœ‹å…ƒç´ æ˜¯å¦åœ¨é›†åˆå†…</span><br><span class="line">scard <span class="keyword">set</span> æŸ¥çœ‹å…ƒç´ ä¸ªæ•°</span><br><span class="line">sinter <span class="keyword">set</span>1 <span class="keyword">set</span>2 äº¤é›†</span><br><span class="line">sunion <span class="keyword">set</span>1 <span class="keyword">set</span>2 å¹¶é›†</span><br><span class="line">sdiff <span class="keyword">set</span>1 <span class="keyword">set</span>2 å·®é›†</span><br></pre></td></tr></table></figure>
<h3 id="5-æœ‰åºé›†åˆ-zset-å…ƒç´ è‡ªå¸¦ä¸€ä¸ªå€¼-å¯ä»¥ä¿®æ”¹"><a href="#5-æœ‰åºé›†åˆ-zset-å…ƒç´ è‡ªå¸¦ä¸€ä¸ªå€¼-å¯ä»¥ä¿®æ”¹" class="headerlink" title="5.æœ‰åºé›†åˆ - zset(å…ƒç´ è‡ªå¸¦ä¸€ä¸ªå€¼,å¯ä»¥ä¿®æ”¹)"></a>5.æœ‰åºé›†åˆ - zset(å…ƒç´ è‡ªå¸¦ä¸€ä¸ªå€¼,å¯ä»¥ä¿®æ”¹)</h3><figure class="highlight gml"><table><tr><td class="code"><pre><span class="line">zadd zset score1 mem1 score2 mem2 ... æ·»åŠ </span><br><span class="line">zrem zset mem ç§»é™¤</span><br><span class="line">zrange zset start <span class="keyword">end</span> æŒ‰<span class="symbol">score</span>å‡åºæŸ¥çœ‹</span><br><span class="line">zrevrange zset start <span class="keyword">end</span> æŒ‰<span class="symbol">score</span>é™åºæŸ¥çœ‹</span><br><span class="line">zscore zset mem æŸ¥çœ‹<span class="symbol">score</span>å€¼</span><br><span class="line">zincrby zset value mem æ”¹å˜<span class="symbol">score</span>çš„å€¼</span><br></pre></td></tr></table></figure>
<h3 id="6-åœ°ç†ä½ç½®-LBSåº”ç”¨-Location-Based-Service-åŸºäºä½ç½®çš„æœåŠ¡"><a href="#6-åœ°ç†ä½ç½®-LBSåº”ç”¨-Location-Based-Service-åŸºäºä½ç½®çš„æœåŠ¡" class="headerlink" title="6.åœ°ç†ä½ç½®(LBSåº”ç”¨-Location-Based Service - åŸºäºä½ç½®çš„æœåŠ¡)"></a>6.åœ°ç†ä½ç½®(LBSåº”ç”¨-Location-Based Service - åŸºäºä½ç½®çš„æœåŠ¡)</h3><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">geoadd zset longitude1 latitude1 member1 longitude2 latitude2 member2 <span class="built_in">..</span>.   æ·»åŠ ç»çº¬åº¦ä¿¡æ¯</span><br><span class="line">geopos zset member1 member2 <span class="built_in">..</span>. è·å–æŒ‡å®šçš„ä½ç½®çš„ç»çº¬åº¦</span><br><span class="line">geodist zset member1 member2 [unit] è®¡ç®—ä¸¤ç‚¹é—´çš„è·ç¦»,é»˜è®¤å•ä½æ˜¯ç±³,[unit]æ˜¯å•ä½,å¯ä»¥ä¿®æ”¹ä¸ºm,km,miè‹±é‡Œ,ftè‹±å°º</span><br><span class="line">georadius zset longitude1 latitude1<span class="built_in"> radius </span>m/km/mi/ft è·å–ä»¥ç‚¹zsetä¸ºåœ†å¿ƒ,radiusä¸ºåŠå¾„çš„åœ†çš„èŒƒå›´å†…çš„æ‰€æœ‰çš„åæ ‡ç‚¹;åé¢åŠ withdist,å¯åŒæ—¶è·å–è·ç¦»,åŠ withcoord,å¯åŒæ—¶è·å–ç‚¹çš„ç»çº¬åº¦</span><br></pre></td></tr></table></figure>



<h1 id="Pythonä¸­ä½¿ç”¨æ•°æ®åº“"><a href="#Pythonä¸­ä½¿ç”¨æ•°æ®åº“" class="headerlink" title="Pythonä¸­ä½¿ç”¨æ•°æ®åº“"></a>Pythonä¸­ä½¿ç”¨æ•°æ®åº“</h1><h2 id="è¿æ¥MySQLæ•°æ®åº“"><a href="#è¿æ¥MySQLæ•°æ®åº“" class="headerlink" title="è¿æ¥MySQLæ•°æ®åº“"></a>è¿æ¥MySQLæ•°æ®åº“</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string">è¿æ¥å¯¹è±¡ = pymysql.connect(host, port, user, password) - å’ŒæŒ‡å®šçš„æ•°æ®åº“è¿›è¡Œè¿æ¥å¹¶è¿”å›ä¸€ä¸ªè¿æ¥å¯¹è±¡</span></span><br><span class="line"><span class="string">å‚æ•°è¯´æ˜:</span></span><br><span class="line"><span class="string">    host - MySQLä¸»æœºåœ°å€: localhostè¡¨ç¤ºå½“å‰è®¾å¤‡ä¸Šçš„MySQL,æœåŠ¡å™¨çš„å…¬ç½‘IP</span></span><br><span class="line"><span class="string">    port - MySQLæœåŠ¡ç«¯å£,3306</span></span><br><span class="line"><span class="string">    user - MySQLç”¨æˆ·</span></span><br><span class="line"><span class="string">    password - ç”¨æˆ·å¯¹åº”çš„å¯†ç (å¦‚æœåˆ›å»ºç”¨æˆ·çš„æ—¶å€™æ²¡æœ‰è®¾ç½®å¯†ç ,è¿™ä¸ªå‚æ•°å¯ä»¥ä¸ç”¨èµ‹å€¼)</span></span><br><span class="line"><span class="string">    database - å»ºç«‹è¿æ¥åé»˜è®¤æ“ä½œçš„æ•°æ®åº“</span></span><br><span class="line"><span class="string">    charset - è®¾ç½®è¿æ¥çš„æ•°æ®åº“æ–‡ä»¶çš„ç¼–ç æ–¹å¼</span></span><br><span class="line"><span class="string">    autocommit - æ˜¯å¦è‡ªåŠ¨æäº¤(å¸ƒå°”å€¼)  </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">with è¿æ¥å¯¹è±¡.cursor(æŸ¥è¯¢è¿”å›å€¼ç±»å‹(é»˜è®¤å€¼æ˜¯none)) as æ¸¸æ ‡å¯¹è±¡:</span></span><br><span class="line"><span class="string">    æ•°æ®åº“æ“ä½œä¸Šä¸‹æ–‡</span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">è¯´æ˜:</span></span><br><span class="line"><span class="string">    æŸ¥è¯¢è¿”å›å€¼ç±»å‹   -   None: æŸ¥è¯¢ç»“æœä»¥å…ƒç»„çš„å½¢å¼è¿”å›;</span></span><br><span class="line"><span class="string">                      pymysql.cursors.dictcursor: æŸ¥è¯¢ç»“æœä»¥å­—å…¸çš„å½¢å¼è¿”å›;</span></span><br><span class="line"><span class="string">    æ•°æ®åº“æ“ä½œä¸Šä¸‹æ–‡   -   æ¸¸æ ‡å¯¹è±¡(æ•°æ®åº“æ“ä½œ)åªæœ‰åœ¨æ•°æ®åº“æ“ä½œä¸Šä¸‹æ–‡æ‰æœ‰æ•ˆ</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line">con = pymysql.connect(</span><br><span class="line">    host=<span class="string">'localhost'</span>,</span><br><span class="line">    port=<span class="number">3306</span>,</span><br><span class="line">    user=<span class="string">'root'</span>,</span><br><span class="line">    password=<span class="string">'123456'</span>,</span><br><span class="line">    database=<span class="string">'school'</span>,</span><br><span class="line">    charset=<span class="string">'utf8'</span>,</span><br><span class="line">    autocommit=<span class="string">'True'</span></span><br><span class="line">)</span><br><span class="line"><span class="keyword">with</span> con.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">    <span class="comment"># æ•°æ®åº“æ“ä½œä¸Šä¸‹æ–‡</span></span><br><span class="line">    <span class="comment"># 3.æ‰§è¡Œsqlè¯­å¥: æ¸¸æ ‡å¯¹è±¡.execute(sqlè¯­å¥)</span></span><br><span class="line">    cursor.execute(<span class="string">'create database if not exists pyschool;'</span>)</span><br><span class="line"><span class="comment"># å…³é—­è¿æ¥</span></span><br><span class="line">con.close()</span><br></pre></td></tr></table></figure>

<h2 id="è¿æ¥RedisæœåŠ¡å™¨"><a href="#è¿æ¥RedisæœåŠ¡å™¨" class="headerlink" title="è¿æ¥RedisæœåŠ¡å™¨"></a>è¿æ¥RedisæœåŠ¡å™¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">redis.Redis(host=<span class="string">''</span>, password=<span class="string">''</span>, prot=<span class="string">''</span>)</span><br><span class="line">host : redisæ‰€åœ¨æœåŠ¡å™¨å…¬ç½‘åœ°å€;</span><br><span class="line">password : ç™»å½•å£ä»¤;</span><br><span class="line">port : redisçš„æœåŠ¡ç«¯å£</span><br><span class="line"></span><br><span class="line">è¿æ¥æ—¶ä¼šè¿”å›ä¸€ä¸ªè¿æ¥å¯¹è±¡:</span><br><span class="line">redis_cli = redis.Redis(host=<span class="string">''</span>, password=<span class="string">''</span>, prot=<span class="string">''</span>)</span><br><span class="line">ä½¿ç”¨rediså®Œæˆç›¸åº”çš„æ“ä½œ</span><br></pre></td></tr></table></figure>

<p><strong>æ‰©å±•:</strong></p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">freeze</span> &gt; requirement.txt   å°†è™šæ‹Ÿç¯å¢ƒä¾èµ–é¡¹å†™å…¥åˆ°æ–‡ä»¶</span><br><span class="line">pip install -r requirement.txt   æŒ‰ç…§æ–‡ä»¶å®‰è£…ä¾èµ–é¡¹</span><br><span class="line"></span><br><span class="line">åºåˆ—åŒ–:  æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå­—ç¬¦ä¸²(str)æˆ–å­—èŠ‚ä¸²(bytes)</span><br><span class="line">ååºåˆ—åŒ–:  æŠŠå­—ç¬¦ä¸²æˆ–è€…å­—èŠ‚ä¸²è¿˜åŸæˆå¯¹è±¡</span><br><span class="line"><span class="type">json</span>.dumps()   åºåˆ—åŒ–(å­—ç¬¦ä¸²è½¬æ¢æˆå­—èŠ‚ä¸²)</span><br><span class="line"><span class="type">json</span>.loads()   ååºåˆ—åŒ–(å­—èŠ‚ä¸²è½¬æ¢æˆå­—ç¬¦ä¸²)</span><br><span class="line">pickle.dumps()   åºåˆ—åŒ–(å­—ç¬¦ä¸²è½¬æ¢æˆå­—èŠ‚ä¸²)</span><br><span class="line">pickle.loads()   ååºåˆ—åŒ–(å­—èŠ‚ä¸²è½¬æ¢æˆå­—ç¬¦ä¸²)</span><br></pre></td></tr></table></figure>

<h2 id="å°†Redisä½œä¸ºç”¨æˆ·è¯·æ±‚å’ŒMySQLæ•°æ®åº“ä¹‹é—´çš„ç¼“å­˜ä»‹è´¨"><a href="#å°†Redisä½œä¸ºç”¨æˆ·è¯·æ±‚å’ŒMySQLæ•°æ®åº“ä¹‹é—´çš„ç¼“å­˜ä»‹è´¨" class="headerlink" title="å°†Redisä½œä¸ºç”¨æˆ·è¯·æ±‚å’ŒMySQLæ•°æ®åº“ä¹‹é—´çš„ç¼“å­˜ä»‹è´¨"></a>å°†Redisä½œä¸ºç”¨æˆ·è¯·æ±‚å’ŒMySQLæ•°æ®åº“ä¹‹é—´çš„ç¼“å­˜ä»‹è´¨</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_depts_from_db</span><span class="params">()</span>:</span></span><br><span class="line">    conn = pymysql.connect(</span><br><span class="line">        host=<span class="string">'localhost'</span>,</span><br><span class="line">        port=<span class="number">3306</span>,</span><br><span class="line">        user=<span class="string">'root'</span>,</span><br><span class="line">        password=<span class="string">'119148'</span>,</span><br><span class="line">        charset=<span class="string">'utf8'</span>,</span><br><span class="line">        autocommit=<span class="literal">True</span>,</span><br><span class="line">        database=<span class="string">'hrs'</span></span><br><span class="line">    )</span><br><span class="line">    depts = ()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            cursor.execute(<span class="string">'select dno, dname, dloc from tb_dept'</span>)</span><br><span class="line">            depts = cursor.fetchall()</span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> err:</span><br><span class="line">        print(err)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        conn.close()</span><br><span class="line">    <span class="keyword">return</span> depts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    redis_cli = redis.Redis(host=<span class="string">'49.233.152.190'</span>, port=<span class="number">6379</span>, password=<span class="string">'119148'</span>)</span><br><span class="line">    start = time.time()</span><br><span class="line">    data = redis_cli.get(<span class="string">'depts'</span>)</span><br><span class="line">    <span class="keyword">if</span> data:</span><br><span class="line">        depts = pickle.loads(data)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        depts = load_depts_from_db()</span><br><span class="line">        redis_cli.set(<span class="string">'depts'</span>, pickle.dumps(depts))</span><br><span class="line"></span><br><span class="line">    end = time.time()</span><br><span class="line">    print(depts)</span><br><span class="line">    print(<span class="string">f'æ‰§è¡Œæ—¶é—´: <span class="subst">&#123;end - start&#125;</span>ç§’'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>RedisåŠå…¶åº”ç”¨</title>
    <url>/2019/12/27/radis/</url>
    <content><![CDATA[<p>éå…³ç³»å‹æ•°æ®åº“Redis<br>Redisæ˜¯ä¸ºäº†å®ç°é«˜é€Ÿç¼“å­˜æœåŠ¡,å‡å°MySQLæ•°æ®åº“çš„å‹åŠ›</p>
<a id="more"></a>


<h1 id="LinuxæœåŠ¡èµ·åœ"><a href="#LinuxæœåŠ¡èµ·åœ" class="headerlink" title="LinuxæœåŠ¡èµ·åœ"></a>LinuxæœåŠ¡èµ·åœ</h1><p>CentOS<br>    systemctl start æœåŠ¡å   -&gt;   å¯åŠ¨<br>    systemctl stop æœåŠ¡å   -&gt;   åœæ­¢<br>    systemctl restart æœåŠ¡å   -&gt;   é‡å¯<br>    systemctl status æœåŠ¡å   -&gt;   æŸ¥çœ‹çŠ¶æ€<br>    systemctl enable æœåŠ¡å   -&gt;   å¼€æœºè‡ªå¯<br>    systemctl disable æœåŠ¡å   -&gt;   ç¦æ­¢è‡ªå¯</p>
<p>Ubuntu<br>    service æœåŠ¡å start   -&gt;   å¯åŠ¨</p>
<h1 id="è¿›ç¨‹æŸ¥æ€"><a href="#è¿›ç¨‹æŸ¥æ€" class="headerlink" title="è¿›ç¨‹æŸ¥æ€"></a>è¿›ç¨‹æŸ¥æ€</h1><p>ps -ef | grep â€œâ€  -&gt;  æœç´¢å…¨éƒ¨åŒ…å«å­—ç¬¦ä¸²çš„å†…å®¹<br>ps -ef | grep â€œâ€ | grep -v â€œgrepâ€ -&gt;  æœç´¢å…¨éƒ¨åŒ…å«å­—ç¬¦ä¸²çš„å†…å®¹å¹¶ä¸”è¿‡æ»¤æ‰åŒ…å«grepçš„å†…å®¹<br>ps -ef | grep -Eæ­£åˆ™è¡¨è¾¾å¼  -&gt;  æœç´¢å…¨éƒ¨åŒ…å«ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹<br>xargs  -&gt;  å°†åˆ—å˜æˆè¡Œ<br>ps -ef | grep â€œredis-serverâ€ | grep -v â€œgrepâ€ | awk â€˜{print $2}â€™ | xargs kill  -&gt;  ç²¾å‡†æŸ¥æ€è¿›ç¨‹</p>
<p>pkill è¿›ç¨‹å  -&gt;  æ ¹æ®åå­—æ€æ‰è¿›ç¨‹<br>killall è¿›ç¨‹å  -&gt;  æ ¹æ®åå­—æ€æ‰è¿›ç¨‹</p>
<h1 id="rediså‘½ä»¤"><a href="#rediså‘½ä»¤" class="headerlink" title="rediså‘½ä»¤"></a>rediså‘½ä»¤</h1><p>ttl key â€”â€”&gt; æŸ¥çœ‹keyçš„å­˜æ´»æ—¶é—´<br>set key value ex N â€”â€”&gt; è®¾ç½®keyçš„å­˜æ´»æ—¶é—´ä¸ºNç§’<br>set key value px N â€”â€”&gt; è®¾ç½®keyçš„å­˜æ´»æ—¶é—´ä¸ºNæ¯«ç§’<br>shutdown  â€”â€”&gt; å…³é—­redisæœåŠ¡å™¨<br>shutdown save â€”â€”&gt; ä¿å­˜å¹¶å…³é—­redisæœåŠ¡å™¨<br>save â€”â€”&gt; ä¿å­˜<br>bgsave â€”â€”&gt; åå°ä¿å­˜<br>dbsize â€”â€”&gt; æŸ¥çœ‹æ•°æ®åº“å¤§å°<br>keys *  â€”â€”&gt; è·å–æ‰€æœ‰çš„key<br>keys ta*  â€”â€”&gt; è·å–taå¼€å¤´çš„key</p>
<p><strong>redisé»˜è®¤å¼€å¯äº†16ä¸ªæ•°æ®åº“</strong><br>select 0-15 â€”â€”&gt; åˆ‡æ¢æ•°æ®åº“<br>flushdb â€”â€”&gt; æ¸…ç©ºå½“å‰æ•°æ®åº“<br>flushall â€”â€”&gt; æ¸…ç©ºæ‰€æœ‰æ•°æ®åº“</p>
<p>type keyp â€”â€”&gt; åˆ¤æ–­keyçš„ç±»å‹</p>
<h1 id="redisçš„æ•°æ®ç±»å‹"><a href="#redisçš„æ•°æ®ç±»å‹" class="headerlink" title="redisçš„æ•°æ®ç±»å‹"></a>redisçš„æ•°æ®ç±»å‹</h1><h2 id="1-å­—ç¬¦ä¸²-string"><a href="#1-å­—ç¬¦ä¸²-string" class="headerlink" title="1.å­—ç¬¦ä¸² - string"></a>1.å­—ç¬¦ä¸² - string</h2><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">key</span> <span class="keyword">value</span></span><br><span class="line"><span class="keyword">get</span> <span class="keyword">key</span></span><br><span class="line">strlen <span class="keyword">key</span></span><br><span class="line">append <span class="keyword">key</span> <span class="keyword">value</span> <span class="comment">------&gt; è¿½åŠ </span></span><br><span class="line">mset key1 value1 key2 value2 ... <span class="comment">------&gt; åŒæ—¶è®¾ç½®å¤šç»„å€¼</span></span><br><span class="line">mget key1 key2 ...</span><br><span class="line">incr <span class="keyword">key</span> <span class="comment">------&gt; å½“keyçš„å€¼ä¸ºæ•°å­—æ—¶,æ•°å€¼åŠ ä¸€</span></span><br><span class="line">incrby <span class="keyword">key</span> N <span class="comment">------&gt; ä¸ºkeyçš„å€¼åŠ N</span></span><br><span class="line">decr <span class="keyword">key</span> <span class="comment">------&gt; å‡ä¸€</span></span><br><span class="line">decrby <span class="keyword">key</span> N <span class="comment">------&gt; å‡N</span></span><br><span class="line">getrange <span class="keyword">key</span> m n <span class="comment">------&gt; ä»må–åˆ°n</span></span><br><span class="line">setrange <span class="keyword">key</span> N <span class="keyword">value</span> <span class="comment">------&gt; ä»nå¼€å§‹ç”¨valueè¦†ç›–keyçš„valueå€¼</span></span><br></pre></td></tr></table></figure>
<h2 id="2-å“ˆå¸Œ-hash"><a href="#2-å“ˆå¸Œ-hash" class="headerlink" title="2.å“ˆå¸Œ - hash"></a>2.å“ˆå¸Œ - hash</h2><figure class="highlight q"><table><tr><td class="code"><pre><span class="line">hset <span class="built_in">key</span> field <span class="built_in">value</span> è®¾ç½®é”®å’Œå€¼</span><br><span class="line">hmset <span class="built_in">key</span> field1 value1 field2 value2 åŒæ—¶è®¾ç½®å¤šä¸ªé”®å’Œå€¼</span><br><span class="line">hget <span class="built_in">key</span> field  æŸ¥çœ‹æŒ‡å®šçš„é”®å¯¹åº”çš„å€¼</span><br><span class="line">hmget <span class="built_in">key</span> fieldl field2 åŒæ—¶æŸ¥çœ‹å¤šä¸ªé”®å’Œå€¼</span><br><span class="line">hgetall <span class="built_in">key</span> è·å–æ‰€æœ‰çš„å€¼å’Œé”®</span><br><span class="line">hkeys <span class="built_in">key</span> è·å–æ‰€æœ‰çš„é”®</span><br><span class="line">hvals <span class="built_in">key</span> è·å–æ‰€æœ‰çš„å€¼</span><br><span class="line">hexists <span class="built_in">key</span> filed åˆ¤æ–­æ˜¯å¦å­˜åœ¨å¯¹åº”çš„å€¼</span><br></pre></td></tr></table></figure>

<h2 id="3-åˆ—è¡¨-list"><a href="#3-åˆ—è¡¨-list" class="headerlink" title="3.åˆ—è¡¨ - list"></a>3.åˆ—è¡¨ - list</h2><figure class="highlight tcl"><table><tr><td class="code"><pre><span class="line">lpush <span class="keyword">list</span> value1 value2 ... æ’å…¥åˆ°æœ€å·¦è¾¹</span><br><span class="line">rpush <span class="keyword">list</span> value1 value2 ... æ’å…¥åˆ°æœ€å³è¾¹</span><br><span class="line">lpop <span class="keyword">list</span> å–æœ€å·¦è¾¹</span><br><span class="line">rpop <span class="keyword">list</span> å–æœ€å³è¾¹</span><br><span class="line"><span class="keyword">lrange</span> <span class="keyword">list</span> start end æŸ¥çœ‹åˆ—è¡¨ç‰‡æ®µ</span><br><span class="line"><span class="keyword">lindex</span> <span class="keyword">list</span> index æŸ¥çœ‹æŒ‡å®šä¸‹æ ‡å¯¹åº”çš„å…ƒç´ </span><br><span class="line">llen <span class="keyword">list</span> åˆ—è¡¨é•¿åº¦</span><br><span class="line">lrem <span class="keyword">list</span> count value åˆ é™¤æŒ‡å®šä¸ªæ•°çš„å…ƒç´ </span><br></pre></td></tr></table></figure>
<h2 id="4-é›†åˆ-set"><a href="#4-é›†åˆ-set" class="headerlink" title="4.é›†åˆ - set"></a>4.é›†åˆ - set</h2><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">sadd <span class="keyword">set</span> value1 value2 <span class="string">...</span> æ·»åŠ å…ƒç´ </span><br><span class="line">srem <span class="keyword">set</span> value ç§»é™¤å…ƒç´ </span><br><span class="line">spop <span class="keyword">set</span> è·å–éšæœºå…ƒç´ </span><br><span class="line">smembers <span class="keyword">set</span> æŸ¥çœ‹æ‰€æœ‰å…ƒç´ </span><br><span class="line">sismember <span class="keyword">set</span> value æŸ¥çœ‹å…ƒç´ æ˜¯å¦åœ¨é›†åˆå†…</span><br><span class="line">scard <span class="keyword">set</span> æŸ¥çœ‹å…ƒç´ ä¸ªæ•°</span><br><span class="line">sinter <span class="keyword">set</span>1 <span class="keyword">set</span>2 äº¤é›†</span><br><span class="line">sunion <span class="keyword">set</span>1 <span class="keyword">set</span>2 å¹¶é›†</span><br><span class="line">sdiff <span class="keyword">set</span>1 <span class="keyword">set</span>2 å·®é›†</span><br></pre></td></tr></table></figure>
<h2 id="5-æœ‰åºé›†åˆ-zset-å…ƒç´ è‡ªå¸¦ä¸€ä¸ªå€¼-å¯ä»¥ä¿®æ”¹"><a href="#5-æœ‰åºé›†åˆ-zset-å…ƒç´ è‡ªå¸¦ä¸€ä¸ªå€¼-å¯ä»¥ä¿®æ”¹" class="headerlink" title="5.æœ‰åºé›†åˆ - zset(å…ƒç´ è‡ªå¸¦ä¸€ä¸ªå€¼,å¯ä»¥ä¿®æ”¹)"></a>5.æœ‰åºé›†åˆ - zset(å…ƒç´ è‡ªå¸¦ä¸€ä¸ªå€¼,å¯ä»¥ä¿®æ”¹)</h2><figure class="highlight gml"><table><tr><td class="code"><pre><span class="line">zadd zset score1 mem1 score2 mem2 ... æ·»åŠ </span><br><span class="line">zrem zset mem ç§»é™¤</span><br><span class="line">zrange zset start <span class="keyword">end</span> æŒ‰<span class="symbol">score</span>å‡åºæŸ¥çœ‹</span><br><span class="line">zrevrange zset start <span class="keyword">end</span> æŒ‰<span class="symbol">score</span>é™åºæŸ¥çœ‹</span><br><span class="line">zscore zset mem æŸ¥çœ‹<span class="symbol">score</span>å€¼</span><br><span class="line">zincrby zset value mem æ”¹å˜<span class="symbol">score</span>çš„å€¼</span><br></pre></td></tr></table></figure>
<h2 id="6-åœ°ç†ä½ç½®-LBSåº”ç”¨-Location-Based-Service-åŸºäºä½ç½®çš„æœåŠ¡"><a href="#6-åœ°ç†ä½ç½®-LBSåº”ç”¨-Location-Based-Service-åŸºäºä½ç½®çš„æœåŠ¡" class="headerlink" title="6.åœ°ç†ä½ç½®(LBSåº”ç”¨-Location-Based Service - åŸºäºä½ç½®çš„æœåŠ¡)"></a>6.åœ°ç†ä½ç½®(LBSåº”ç”¨-Location-Based Service - åŸºäºä½ç½®çš„æœåŠ¡)</h2><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">geoadd zset longitude1 latitude1 member1 longitude2 latitude2 member2 <span class="built_in">..</span>.   æ·»åŠ ç»çº¬åº¦ä¿¡æ¯</span><br><span class="line">geopos zset member1 member2 <span class="built_in">..</span>. è·å–æŒ‡å®šçš„ä½ç½®çš„ç»çº¬åº¦</span><br><span class="line">geodist zset member1 member2 [unit] è®¡ç®—ä¸¤ç‚¹é—´çš„è·ç¦»,é»˜è®¤å•ä½æ˜¯ç±³,[unit]æ˜¯å•ä½,å¯ä»¥ä¿®æ”¹ä¸ºm,km,miè‹±é‡Œ,ftè‹±å°º</span><br><span class="line">georadius zset longitude1 latitude1<span class="built_in"> radius </span>m/km/mi/ft è·å–ä»¥ç‚¹zsetä¸ºåœ†å¿ƒ,radiusä¸ºåŠå¾„çš„åœ†çš„èŒƒå›´å†…çš„æ‰€æœ‰çš„åæ ‡ç‚¹;åé¢åŠ withdist,å¯åŒæ—¶è·å–è·ç¦»,åŠ withcoord,å¯åŒæ—¶è·å–ç‚¹çš„ç»çº¬åº¦</span><br></pre></td></tr></table></figure>


<h1 id="åŠ å¯†æŠ€æœ¯"><a href="#åŠ å¯†æŠ€æœ¯" class="headerlink" title="åŠ å¯†æŠ€æœ¯"></a>åŠ å¯†æŠ€æœ¯</h1><p><strong>å¯¹ç§°åŠ å¯† : åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ç›¸åŒçš„å¯†é’¥ - AES<br>éå¯¹ç§°åŠ å¯† : åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸åŒçš„å¯†é’¥(å…¬é’¥å’Œç§é’¥)  -  é€‚åˆäº’è¿ç½‘ - RSA</strong></p>
<p><strong>å…å¯†æ“ä½œ</strong></p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">ssh-keygen</span> <span class="selector-tag">-t</span> <span class="selector-tag">rsa</span> <span class="selector-tag">-b</span> 2048 <span class="selector-tag">-c</span> <span class="selector-tag">anjhon</span><span class="keyword">@163</span>.com   -   ç”Ÿæˆå…¬é’¥å’Œç§é’¥</span><br><span class="line">t æŒ‡å®šç®—æ³•; <span class="selector-tag">b</span> æŒ‡å®šå¼ºåº¦; <span class="selector-tag">c</span> æŒ‡å®šé‚®ç®±</span><br><span class="line"></span><br><span class="line">è¿›å…¥åˆ°<span class="selector-class">.ssh</span>æ–‡ä»¶,</span><br><span class="line"><span class="selector-tag">id_rsa</span>  <span class="selector-tag">-</span>   ç§é’¥</span><br><span class="line"><span class="selector-tag">id_rsa</span><span class="selector-class">.pub</span>  <span class="selector-tag">-</span>   å…¬é’¥</span><br><span class="line"></span><br><span class="line">å°†å…¬é’¥å¤åˆ¶åˆ°ç½‘ç«™çš„å…¬é’¥è®¾ç½®</span><br><span class="line"></span><br><span class="line">è‹¥æœ‰<span class="selector-tag">known-hosts</span>æ–‡ä»¶,ä¸”ç½‘ç«™é“¾æ¥ä¸ä¸Š,ç›´æ¥åˆ é™¤<span class="selector-tag">known-hosts</span>æ–‡ä»¶</span><br></pre></td></tr></table></figure>



<h1 id="Pythonä¸­çš„redis"><a href="#Pythonä¸­çš„redis" class="headerlink" title="Pythonä¸­çš„redis"></a>Pythonä¸­çš„redis</h1><p><strong>è¿æ¥redisæœåŠ¡å™¨:</strong></p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">redis.Redis(<span class="attribute">host</span>=<span class="string">''</span>, <span class="attribute">password</span>=<span class="string">''</span>, <span class="attribute">prot</span>=<span class="string">''</span>)</span><br><span class="line">	host : redisæ‰€åœ¨æœåŠ¡å™¨å…¬ç½‘åœ°å€;</span><br><span class="line">	password : ç™»å½•å£ä»¤;</span><br><span class="line"><span class="built_in">	port </span>: redisçš„æœåŠ¡ç«¯å£</span><br><span class="line">	</span><br><span class="line">è¿æ¥æ—¶ä¼šè¿”å›ä¸€ä¸ªè¿æ¥å¯¹è±¡:</span><br><span class="line">redis_cli = redis.Redis(<span class="attribute">host</span>=<span class="string">''</span>, <span class="attribute">password</span>=<span class="string">''</span>, <span class="attribute">prot</span>=<span class="string">''</span>)</span><br><span class="line">ä½¿ç”¨rediså®Œæˆç›¸åº”çš„æ“ä½œ</span><br></pre></td></tr></table></figure>

<p><strong>pythonä¸­ä½¿ç”¨redisçš„æ•°æ®ç±»å‹:</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> redis   <span class="comment"># å¯¼å…¥redisæ¨¡å—</span></span><br><span class="line"></span><br><span class="line">redis_cli = redis.Redis(host=<span class="string">'10.10.10.10'</span>, password=<span class="string">'123456'</span>, port=<span class="string">'6379'</span>)   <span class="comment"># è¿æ¥redisæœåŠ¡å™¨</span></span><br><span class="line"><span class="comment"># print(redis_cli)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> redis_cli.ping():</span><br><span class="line">    <span class="comment"># hashçš„ä½¿ç”¨</span></span><br><span class="line">    redis_cli.hmset(<span class="string">'stu1'</span>, &#123;</span><br><span class="line">        <span class="string">'stuname'</span>: <span class="string">'xiaoming'</span>,</span><br><span class="line">        <span class="string">'stuid'</span>: <span class="string">'001'</span>,</span><br><span class="line">        <span class="string">'stusex'</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'stuaddr'</span>: <span class="string">'è‚–å®¶æ²³'</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    print(redis_cli.hget(<span class="string">'stu1'</span>, <span class="string">'stuname'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># æœ‰åºé›†åˆçš„ä½¿ç”¨</span></span><br><span class="line">    redis_cli.zadd(<span class="string">'zset1'</span>, &#123;</span><br><span class="line">        <span class="string">'an'</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">'yong'</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="string">'duan'</span>: <span class="number">300</span></span><br><span class="line">    &#125;)</span><br><span class="line">    items = redis_cli.zrevrange(<span class="string">'zset1'</span>, <span class="number">0</span>, <span class="number">-1</span>)</span><br><span class="line">    print(list(map(bytes.decode, items)))</span><br><span class="line">    print(redis_cli.zscore(<span class="string">'zset1'</span>, <span class="string">'an'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># åˆ—è¡¨çš„ä½¿ç”¨</span></span><br><span class="line">    redis_cli.rpush(<span class="string">'list1'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    list1 = redis_cli.lrange(<span class="string">'list1'</span>, <span class="number">0</span>, <span class="number">-1</span>)</span><br><span class="line">    print(list(map(int, list1)))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å­—ç¬¦ä¸²çš„ä½¿ç”¨</span></span><br><span class="line">    redis_cli.set(<span class="string">'username'</span>, <span class="string">'an'</span>)</span><br><span class="line">    print(redis_cli.ttl(<span class="string">'username'</span>))</span><br><span class="line">    print(redis_cli.get(<span class="string">'username'</span>).decode(<span class="string">'utf-8'</span>))</span><br><span class="line">    redis_cli.set(<span class="string">'user_age'</span>, <span class="string">'25'</span>)</span><br><span class="line">    redis_cli.set(<span class="string">'user_tel'</span>, <span class="string">'133'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'è¿æ¥å¤±è´¥'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>æ‰©å±•:</strong></p>
<figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">pip <span class="keyword">freeze</span> &gt; requirement.txt   å°†è™šæ‹Ÿç¯å¢ƒä¾èµ–é¡¹å†™å…¥åˆ°æ–‡ä»¶</span><br><span class="line">pip install -r requirement.txt   æŒ‰ç…§æ–‡ä»¶å®‰è£…ä¾èµ–é¡¹</span><br><span class="line"></span><br><span class="line">åºåˆ—åŒ–:  æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå­—ç¬¦ä¸²(str)æˆ–å­—èŠ‚ä¸²(bytes)</span><br><span class="line">ååºåˆ—åŒ–:  æŠŠå­—ç¬¦ä¸²æˆ–è€…å­—èŠ‚ä¸²è¿˜åŸæˆå¯¹è±¡</span><br><span class="line"><span class="type">json</span>.dumps()   åºåˆ—åŒ–(å­—ç¬¦ä¸²è½¬æ¢æˆå­—èŠ‚ä¸²)</span><br><span class="line"><span class="type">json</span>.loads()   ååºåˆ—åŒ–(å­—èŠ‚ä¸²è½¬æ¢æˆå­—ç¬¦ä¸²)</span><br><span class="line">pickle.dumps()   åºåˆ—åŒ–(å­—ç¬¦ä¸²è½¬æ¢æˆå­—èŠ‚ä¸²)</span><br><span class="line">pickle.loads()   ååºåˆ—åŒ–(å­—èŠ‚ä¸²è½¬æ¢æˆå­—ç¬¦ä¸²)</span><br></pre></td></tr></table></figure>
<p><strong>æ•°æ®ä¸Šä¼ redisæœåŠ¡å™¨å¹¶ä»redisè·å–æ•°æ®</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, sex, addr)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.sex = sex</span><br><span class="line">        self.addr = addr</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span>   <span class="comment"># é­”æ³•æ–¹æ³•(å°†æ•°æ®æ˜¾ç¤ºå‡ºæ¥)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'%s, %d, %s, %s'</span> % (self.name, self.age, self.sex, self.addr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stu1 = Student(<span class="string">'å°æ˜'</span>, <span class="number">20</span>, <span class="string">'ç”·'</span>, <span class="string">'æ˜†æ˜'</span>)</span><br><span class="line">stu2 = Student(<span class="string">'å°é»„'</span>, <span class="number">30</span>, <span class="string">'å¥³'</span>, <span class="string">'ä¸Šæµ·'</span>)</span><br><span class="line"></span><br><span class="line">list1 = [stu1, stu2]   <span class="comment"># å°†å­¦ç”Ÿå¯¹è±¡æ·»åŠ åˆ°åˆ—è¡¨ä¸­</span></span><br><span class="line"></span><br><span class="line">redis_cli = redis.Redis(host=<span class="string">'10.10.10.10'</span>, password=<span class="string">'123456'</span>, port=<span class="string">'6379'</span>)   <span class="comment"># è¿æ¥redisæœåŠ¡å™¨</span></span><br><span class="line"><span class="keyword">if</span> redis_cli.ping():</span><br><span class="line">    <span class="comment"># redis_cli.set('student_all', pickle.dumps(list1))   -   å°†æœ¬åœ°çš„æ•°æ®æ·»åŠ åˆ°redis</span></span><br><span class="line">    redis_stu = pickle.loads(redis_cli.get(<span class="string">'student_all'</span>))   <span class="comment"># è·å–rediså†…çš„æ•°æ®å¹¶è¿›è¡Œååºåˆ—åŒ–</span></span><br><span class="line">    print(redis_stu)</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'è¿æ¥å¤±è´¥'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>å°†redisä½œä¸ºç”¨æˆ·è¯·æ±‚å’Œæ•°æ®åº“ä¹‹é—´çš„ç¼“å­˜ä»‹è´¨</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_depts_from_db</span><span class="params">()</span>:</span></span><br><span class="line">    conn = pymysql.connect(   <span class="comment"># è¿æ¥æœ¬åœ°çš„MySQLæœåŠ¡å™¨</span></span><br><span class="line">        host=<span class="string">'localhost'</span>,</span><br><span class="line">        port=<span class="number">3306</span>,</span><br><span class="line">        user=<span class="string">'root'</span>,</span><br><span class="line">        password=<span class="string">'123456'</span>,</span><br><span class="line">        charset=<span class="string">'utf8'</span>,</span><br><span class="line">        autocommit=<span class="literal">True</span>,</span><br><span class="line">        database=<span class="string">'hrs'</span></span><br><span class="line">    )</span><br><span class="line">    depts = ()</span><br><span class="line">    <span class="keyword">try</span>:   <span class="comment"># å¼‚å¸¸æ•è·</span></span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            cursor.execute(<span class="string">'select dno, dname, dloc from tb_dept'</span>)   <span class="comment"># è·å–æ•°æ®</span></span><br><span class="line">            depts = cursor.fetchall()</span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> err:</span><br><span class="line">        print(err)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        conn.close()</span><br><span class="line">    <span class="keyword">return</span> depts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    redis_cli = redis.Redis(host=<span class="string">'10.10.10.10'</span>, password=<span class="string">'123456'</span>, port=<span class="string">'6379'</span>)</span><br><span class="line">    start = time.time()</span><br><span class="line">    data = redis_cli.get(<span class="string">'depts'</span>)   <span class="comment"># è·å–redisçš„deptså¯¹åº”çš„æ•°æ®</span></span><br><span class="line">    <span class="keyword">if</span> data:</span><br><span class="line">        depts = pickle.loads(data)   <span class="comment"># è‹¥è·å–åˆ°æ•°æ®,å°†æ•°æ®ååºåˆ—åŒ–å¹¶ä¿å­˜ä¸‹æ¥</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        depts = load_depts_from_db()   <span class="comment"># è‹¥æ²¡æœ‰æ•°æ®,ä»æ•°æ®åº“è·å–æ•°æ®,å¹¶å°†æ•°æ®ä¿å­˜åˆ°redisä¸­,ä»¥ä¾¿ä¸‹æ¬¡ä½¿ç”¨æ—¶ä¼˜å…ˆä»redisä¸­è·å–,ä»¥å‡è½»æœåŠ¡å™¨çš„å‹åŠ›å¹¶ä¸”æé«˜æ•°æ®è·å–æ•ˆç‡</span></span><br><span class="line">        redis_cli.set(<span class="string">'depts'</span>, pickle.dumps(depts))</span><br><span class="line"></span><br><span class="line">    end = time.time()</span><br><span class="line">    print(depts)</span><br><span class="line">    print(<span class="string">f'æ‰§è¡Œæ—¶é—´: <span class="subst">&#123;end - start&#125;</span>ç§’'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>åŸºç¡€</tag>
        <tag>æ•°æ®åº“</tag>
        <tag>redis</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQLåŸºç¡€</title>
    <url>/2019/12/25/SQL%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<p>å…³ç³»å‹æ•°æ®åº“ä¹‹MySQL</p>
<a id="more"></a>



<h1 id="SQLåŸºç¡€"><a href="#SQLåŸºç¡€" class="headerlink" title="SQLåŸºç¡€"></a>SQLåŸºç¡€</h1><p>SQLåˆå«ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€,åˆ†ä¸ºä¸‰å¤§ç±»,åˆ†åˆ«æ˜¯:DDL(æ•°æ®å®šä¹‰è¯­è¨€),DML(æ•°æ®æ“ä½œè¯­è¨€),DCL(æ•°æ®æ§åˆ¶è¯­è¨€)<br>DDL:create(åˆ›å»ºæ•°æ®åº“å’Œè¡¨)ã€drop(åˆ é™¤æ•°æ®åº“å’Œè¡¨)ã€alter(ä¿®æ”¹è¡¨)<br>DML:insert(å¢)ã€delete(åˆ )ã€update(æ”¹)ã€select(æŸ¥)<br>DCL:grant(æˆæƒ)ã€revoke(å¬å›æˆæƒ)</p>
<p>sqlçš„æ³¨é‡Šæ˜¯åœ¨æ³¨é‡Šå‰åŠ â€“<br>sqlä¸­sqlçš„å…³é”®å­—ä¸åŒºåˆ†å¤§å°å†™<br>sqè¯­å¥ç»“æŸåéœ€è¦åŠ åˆ†å·</p>
<h1 id="DDL-æ•°æ®å®šä¹‰"><a href="#DDL-æ•°æ®å®šä¹‰" class="headerlink" title="DDL(æ•°æ®å®šä¹‰)"></a>DDL(æ•°æ®å®šä¹‰)</h1><h2 id="æ•°æ®åº“æ“ä½œ"><a href="#æ•°æ®åº“æ“ä½œ" class="headerlink" title="æ•°æ®åº“æ“ä½œ"></a>æ•°æ®åº“æ“ä½œ</h2><h3 id="1-åˆ›å»ºæ•°æ®åº“"><a href="#1-åˆ›å»ºæ•°æ®åº“" class="headerlink" title="1.åˆ›å»ºæ•°æ®åº“"></a>1.åˆ›å»ºæ•°æ®åº“</h3><p>CREATE DATABASE æ•°æ®åº“åç§°;   â€”&gt; åˆ›å»ºæŒ‡å®šæ•°æ®åº“ï¼Œå¦‚æœè¿™ä¸ªæ•°æ®åº“å·²ç»å­˜åœ¨ï¼Œä¼šæŠ¥é”™<br><strong>CREATE DATABASE IF NOT EXISTS æ•°æ®åº“åç§°;    â€”&gt; å½“æŒ‡å®šæ•°æ®åº“ä¸å­˜åœ¨çš„æ—¶å€™åˆ›å»ºå¯¹åº”çš„æ•°æ®åº“</strong><br>CREATE DATABASE IF NOT EXISTS æ•°æ®åº“åç§° DEFAULT CHARSET utf8;    â€”&gt; åˆ›å»ºæ•°æ®åº“çš„æ—¶å€™æŒ‡å®šæ•°æ®æ–‡ä»¶ç¼–ç æ–¹å¼<br>CREATE DATABASE school;</p>
<h3 id="2-åˆ é™¤æ•°æ®åº“"><a href="#2-åˆ é™¤æ•°æ®åº“" class="headerlink" title="2.åˆ é™¤æ•°æ®åº“"></a>2.åˆ é™¤æ•°æ®åº“</h3><p><strong>DROP DATABASE æ•°æ®åº“åç§°;</strong><br><strong>DROP DATABASE IF EXISTS æ•°æ®åº“å;</strong><br>DROP DATABASE school;<br>DROP DATABASE IF EXISTS school;</p>
<h3 id="3-åˆ‡æ¢-ä½¿ç”¨æ•°æ®åº“"><a href="#3-åˆ‡æ¢-ä½¿ç”¨æ•°æ®åº“" class="headerlink" title="3.åˆ‡æ¢/ä½¿ç”¨æ•°æ®åº“"></a>3.åˆ‡æ¢/ä½¿ç”¨æ•°æ®åº“</h3><p><strong>USE æ•°æ®åº“;  -&gt;   åˆ‡æ¢/ä½¿ç”¨æŒ‡å®šæ•°æ®åº“ï¼›åˆ‡æ¢åæ‰€æœ‰æ•°æ®åº“ç›¸å…³æ“ä½œéƒ½æ˜¯é’ˆå¯¹è¿™ä¸ªæ•°æ®åº“</strong><br>USE school;</p>
<h2 id="æ•°æ®è¡¨æ“ä½œ"><a href="#æ•°æ®è¡¨æ“ä½œ" class="headerlink" title="æ•°æ®è¡¨æ“ä½œ"></a>æ•°æ®è¡¨æ“ä½œ</h2><h3 id="1-åˆ›å»ºè¡¨ï¼ˆæ•°æ®åº“æ–‡ä»¶æ˜¯é€šè¿‡è¡¨æ¥å­˜æ•°æ®ï¼‰"><a href="#1-åˆ›å»ºè¡¨ï¼ˆæ•°æ®åº“æ–‡ä»¶æ˜¯é€šè¿‡è¡¨æ¥å­˜æ•°æ®ï¼‰" class="headerlink" title="1.åˆ›å»ºè¡¨ï¼ˆæ•°æ®åº“æ–‡ä»¶æ˜¯é€šè¿‡è¡¨æ¥å­˜æ•°æ®ï¼‰"></a>1.åˆ›å»ºè¡¨ï¼ˆæ•°æ®åº“æ–‡ä»¶æ˜¯é€šè¿‡è¡¨æ¥å­˜æ•°æ®ï¼‰</h3><p><strong>CREATE TABLE IF NOT EXISTS è¡¨å(å­—æ®µå1 ç±»å‹1 çº¦æŸ1, å­—æ®µå2 ç±»å‹2 çº¦æŸ2, â€¦);</strong><br><strong>è¯´æ˜:</strong><br>â‘ :è¡¨å:ç¨‹åºå‘˜è‡ªå·±å‘½å,è§åçŸ¥ä¹‰,ä¸€èˆ¬éœ€è¦åŠ å‰ç¼€t_/tb_ç¤ºè¡¨<br>â‘¡:å­—æ®µå:ç¨‹åºå‘˜è‡ªå·±å‘½å,è§åçŸ¥ä¹‰;æ³¨æ„:å­—æ®µä¸­ä¸€å®šè¦æœ‰ä¸€ä¸ªå­—æ®µæ¥ä½œä¸ºä¸»é”®(å¯ä»¥è¡¨ç¤ºå”¯ä¸€ä¸€æ¡è®°å½•);ä¸»é”®è¦æ±‚ä¸ä¸ºç©º,å¹¶ä¸”æ˜¯å”¯ä¸€çš„,è€Œä¸”æ•°æ®ç±»å‹æ˜¯æ•´å‹<br>â‘¢:ç±»å‹å:å¿…é¡»æ˜¯å½“å‰æ•°æ®åº“æ”¯æŒçš„æ•°æ®ç±»å‹,mysqlä¸­å¸¸ç”¨çš„æ•°æ®ç±»å‹:int(æ•´å‹),float(æµ®ç‚¹å‹),varchar(å­—ç¬¦ä¸²)/text(å­—ç¬¦ä¸²),bit(å¸ƒå°”),date/datet ime(æ—¥æœŸå’Œæ—¶é—´)<br>â‘£:çº¦æŸ:not null(éç©ºçº¦æŸ)ã€unique(å”¯ä¸€çº¦æŸ)ã€default(é»˜è®¤å€¼çº¦æŸ)ã€primary key(ä¸»é”®çº¦æŸ)ã€foreign key(å¤–é”®çº¦æŸ)ã€auto_increment(è‡ªåŠ¨å¢é•¿)<br>      æ³¨æ„:çº¦æŸå¯ä»¥æ²¡æœ‰,ä¹Ÿå¯ä»¥æœ‰å¤šä¸ª</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> tb_student</span><br><span class="line">(</span><br><span class="line">stuid <span class="built_in">INT</span> PRIMARY <span class="keyword">KEY</span> auto_increment,</span><br><span class="line">stuname <span class="built_in">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>,</span><br><span class="line">stubirth <span class="built_in">DATE</span>,</span><br><span class="line">stugender <span class="built_in">bit</span> <span class="keyword">DEFAULT</span> <span class="number">1</span>,</span><br><span class="line">stutel <span class="built_in">VARCHAR</span>(<span class="number">11</span>) <span class="keyword">UNIQUE</span></span><br><span class="line">PRIMARY <span class="keyword">KEY</span> (stuid)  ä¸»é”®çº¦æŸè¿˜å¯ä»¥å•ç‹¬è®¾ç½®</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="2-åˆ é™¤è¡¨"><a href="#2-åˆ é™¤è¡¨" class="headerlink" title="2.åˆ é™¤è¡¨"></a>2.åˆ é™¤è¡¨</h3><p><strong>DROP TABLE IF EXISTS è¡¨å;</strong><br>DROP TABLE IF EXISTS tb_student;</p>
<h3 id="3-ä¿®æ”¹è¡¨"><a href="#3-ä¿®æ”¹è¡¨" class="headerlink" title="3.ä¿®æ”¹è¡¨"></a>3.ä¿®æ”¹è¡¨</h3><h4 id="3-1-æ·»åŠ å­—æ®µ"><a href="#3-1-æ·»åŠ å­—æ®µ" class="headerlink" title="3.1 æ·»åŠ å­—æ®µ"></a>3.1 æ·»åŠ å­—æ®µ</h4><p><strong>ALTER TABLE è¡¨å ADD COLUMN å­—æ®µå ç±»å‹ çº¦æŸ;</strong><br>ALTER TABLE tb_student ADD COLUMN stuaddr VARCHAR(200);  </p>
<h4 id="3-2-åˆ é™¤å­—æ®µ"><a href="#3-2-åˆ é™¤å­—æ®µ" class="headerlink" title="3.2 åˆ é™¤å­—æ®µ"></a>3.2 åˆ é™¤å­—æ®µ</h4><p><strong>ALTER TABLE è¡¨æ˜ DROP COLUMN å­—æ®µå;</strong><br>ALTER TABLE tb_student DROP COLUMN stuaddr;</p>
<h4 id="3-3-ä¿®æ”¹å­—æ®µå"><a href="#3-3-ä¿®æ”¹å­—æ®µå" class="headerlink" title="3.3 ä¿®æ”¹å­—æ®µå"></a>3.3 ä¿®æ”¹å­—æ®µå</h4><p><strong>ALTER TABLE è¡¨å CHANGE åŸå­—æ®µ æ–°å­—æ®µ æ–°ç±»å‹;</strong><br>ALTER TABLE tb_student CHANGE tel stutel VARCHAR(11);</p>
<h4 id="3-4-æ·»åŠ çº¦æŸ"><a href="#3-4-æ·»åŠ çº¦æŸ" class="headerlink" title="3.4 æ·»åŠ çº¦æŸ"></a>3.4 æ·»åŠ çº¦æŸ</h4><p><strong>3.4.1 åˆ›å»ºè¡¨æˆ–æ·»åŠ å­—æ®µçš„æ—¶å€™ç›´æ¥åœ¨å­—æ®µåé¢æ·»åŠ çº¦æŸ</strong><br><strong>3.4.2 é€šè¿‡ä¿®æ”¹è¡¨çš„æ ·å¼æ·»åŠ çº¦æŸ</strong><br><strong>ALTER TABLE è¡¨å ADD CONSTRAINT çº¦æŸç´¢å¼•å çº¦æŸå(å­—æ®µ);   -&gt;   ç»™æŒ‡å®šå­—æ®µæ·»åŠ æŒ‡å®šçº¦æŸ</strong><br><strong>ALTER TABLE è¡¨1 ADD CONSTRAINT çº¦æŸç´¢å¼•å FOREIGN KEY(å­—æ®µ1) REFERENCES è¡¨2(å­—æ®µ2);   -&gt;   ç»™è¡¨1ä¸­çš„å­—æ®µ1æ·»åŠ å¤–é”®çº¦æŸ,å¹¶ä¸”å­—æ®µ1çš„å€¼ä¾èµ–è¡¨2ä¸­çš„å­—æ®µ2</strong></p>
<h4 id="3-5-åˆ é™¤çº¦æŸ"><a href="#3-5-åˆ é™¤çº¦æŸ" class="headerlink" title="3.5 åˆ é™¤çº¦æŸ"></a>3.5 åˆ é™¤çº¦æŸ</h4><p><strong>ALTER TABLE è¡¨å DROP INDEX çº¦æŸç´¢å¼•å;   -&gt;   åˆ é™¤æŒ‡å®šçº¦æŸ</strong><br><strong>ALTER TABLE è¡¨å DROP FOREIGN KEY å¤–é”®ç´¢å¼•;   -&gt;   åˆ é™¤å¤–é”®çº¦æŸ</strong></p>
<h1 id="0ML-æ•°æ®æ“ä½œ"><a href="#0ML-æ•°æ®æ“ä½œ" class="headerlink" title="0ML(æ•°æ®æ“ä½œ)"></a>0ML(æ•°æ®æ“ä½œ)</h1><h2 id="1-INSERT-å¢"><a href="#1-INSERT-å¢" class="headerlink" title="1.INSERT(å¢)"></a>1.INSERT(å¢)</h2><p><strong>æ–¹æ³•â‘ :INSERT INTO è¡¨å VALUES(å€¼1, å€¼2, å€¼3,â€¦)  -&gt; æŒ‰è¡¨ä¸­å­—æ®µçš„é¡ºåºä¾æ¬¡ç»™æ¯ä¸ªå­—æ®µèµ‹å€¼,æœ€ç»ˆå½¢æˆä¸€æ¡æ–°çš„è®°å½•</strong><br>è¯´æ˜: æ—¥æœŸ(DATE)  -&gt;  1)æ—¥æœŸå­—ç¬¦ä¸²:å¦‚: â€˜2019-12-23â€™<br>                               2)DATE((NOW())-å½“å‰æ—¥æœŸ; YEAR(NOW())-å½“å‰å¹´; MONTH(NOW())-å½“å‰æœˆ;</p>
<p>INSERT INTO tb_student VALUES(1, â€˜å¤©æ˜â€™, â€˜2000-10-2â€™, 1, â€˜12345678901â€™);</p>
<p><strong>æ–¹æ³•â‘¡:INSERT INTO è¡¨å(å­—æ®µå1,å­—æ®µå2,â€¦) VALUES(å€¼1,å€¼2,â€¦);  -&gt;  æŒ‰æŒ‡å®šé¡ºåºç»™æŒ‡å®šå­—æ®µèµ‹å€¼,æœ€ç»ˆå½¢æˆä¸€æ¡æ–°çš„è®°å½•</strong></p>
<p>INSERT INTO tb_student(stuname, stubirth, stugender, stutel) VALUES(â€˜å°‘ç¾½â€™, â€˜2000-8-21â€™, 1, â€˜12345678902â€™);</p>
<p><strong>æ–¹æ³•â‘¢:INSERT INTO è¡¨å(å­—æ®µå1,å­—æ®µå2,â€¦) VALUES(å€¼1,å€¼..â€¦),(å€¼11,å€¼22,..),(å€¼111,å€¼2222,â€¦),â€¦;  -&gt;  åŒæ—¶æ’å…¥å¤šæ¡è®°å½•</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> tb_student(stuname, stubirth, stugender, stutel) <span class="keyword">VALUES</span></span><br><span class="line">(<span class="string">'æœˆå„¿'</span>, <span class="string">'2000-11-21'</span>, <span class="number">0</span>, <span class="string">'12345678903'</span>),</span><br><span class="line">(<span class="string">'å«åº„'</span>, <span class="string">'1989-8-21'</span>, <span class="number">1</span>, <span class="string">'12345678904'</span>),</span><br><span class="line">(<span class="string">'ç›–è‚'</span>, <span class="string">'1990-8-21'</span>, <span class="number">1</span>, <span class="string">'12345678905'</span>),</span><br><span class="line">(<span class="string">'èƒœä¸ƒ'</span>, <span class="string">'1977-8-21'</span>, <span class="number">1</span>, <span class="string">'12345678906'</span>),</span><br><span class="line">(<span class="string">'æƒŠé²µ'</span>, <span class="string">'1971-8-21'</span>, <span class="number">0</span>, <span class="string">'12345678907'</span>),</span><br><span class="line">(<span class="string">'æ©æ—¥'</span>, <span class="string">'1972-8-21'</span>, <span class="number">1</span>, <span class="string">'12345678908'</span>),</span><br><span class="line">(<span class="string">'é»‘ç™½ç„é‰´'</span>, <span class="string">'1970-8-21'</span>, <span class="number">1</span>, <span class="string">'12345678909'</span>),</span><br><span class="line">(<span class="string">'çœŸåˆš'</span>, <span class="string">'1973-8-25'</span>, <span class="number">1</span>, <span class="string">'12345678910'</span>),</span><br><span class="line">(<span class="string">'æ–­æ°´'</span>, <span class="string">'1974-8-21'</span>, <span class="number">1</span>, <span class="string">'12345678911'</span>),</span><br><span class="line">(<span class="string">'èµµé«˜'</span>, <span class="string">'1976-8-31'</span>, <span class="number">1</span>, <span class="string">'12345678912'</span>),</span><br><span class="line">(<span class="string">'éŸ©é'</span>, <span class="string">'1976-8-31'</span>, <span class="number">1</span>, <span class="string">'12345678913'</span>),</span><br><span class="line">(<span class="string">'éŸ©ä¿¡'</span>, <span class="string">'1976-8-31'</span>, <span class="number">1</span>, <span class="string">'12345678914'</span>),</span><br><span class="line">(<span class="string">'ç« é‚¯'</span>, <span class="string">'1976-8-31'</span>, <span class="number">1</span>, <span class="string">'12345678915'</span>),</span><br><span class="line">(<span class="string">'é¬¼è°·å­'</span>, <span class="string">'1976-8-31'</span>, <span class="number">1</span>, <span class="string">'12345678916'</span>),</span><br><span class="line">(<span class="string">'ä¸œçš‡å¤ªä¸€'</span>, <span class="string">'1976-8-31'</span>, <span class="number">1</span>, <span class="string">'12345678917'</span>),</span><br><span class="line">(<span class="string">'æ™“æ¢¦'</span>, <span class="string">'1976-8-31'</span>, <span class="number">0</span>, <span class="string">'12345678918'</span>),</span><br><span class="line">(<span class="string">'é€é¥å­'</span>, <span class="string">'1976-8-31'</span>, <span class="number">1</span>, <span class="string">'12345678919'</span>),</span><br><span class="line">(<span class="string">'èµ¤ç‚¼'</span>, <span class="string">'1976-8-31'</span>, <span class="number">1</span>, <span class="string">'12345678920'</span>),</span><br><span class="line">(<span class="string">'é«˜æ¸ç¦»'</span>, <span class="string">'1976-8-31'</span>, <span class="number">1</span>, <span class="string">'12345678921'</span>);</span><br></pre></td></tr></table></figure>


<h2 id="2-DELETE-åˆ "><a href="#2-DELETE-åˆ " class="headerlink" title="2.DELETE(åˆ )"></a>2.DELETE(åˆ )</h2><p><strong>æ–¹æ³•â‘ :DELETE FROM è¡¨å;  -&gt;   åˆ é™¤å½“å‰è¡¨ä¸­æ‰€æœ‰çš„è®°å½•(æ¸…ç©ºè¡¨)</strong><br><strong>DELETE FROM tb_student;</strong></p>
<p><strong>æ–¹æ³•â‘¡:DELETE FROM è¡¨å WHERE æ¡ä»¶;  -&gt;  åˆ é™¤æ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„è®°å½•</strong></p>
<p><strong>è¡¥å……:</strong><br>sq1æ¡ä»¶è¯­å¥çš„å†™æ³•(ç­›é€‰)(æ¡ä»¶è¯­å¥åœ¨å†™çš„æ—¶å€™å¯ä»¥é€šè¿‡åŠ ()æ”¹å˜è¿ç®—é¡ºåº)</p>
<p><strong>æ¯”è¾ƒè¿ç®—:=(ç­‰äº),&lt;&gt;(ä¸ç­‰äº),&gt;,&lt;,&gt;=,&lt;=</strong><br>DELETE FROM tb_student WHERE stuname=â€™çœŸåˆšâ€™;</p>
<p><strong>é€»è¾‘è¿ç®—:and(é€»è¾‘ä¸),or(é€»è¾‘æˆ–),not(é€»è¾‘é);</strong><br>DELETE FROM tb_student WHERE stuid&gt;=35 AND stugender&lt;&gt;1;</p>
<p><strong>é›†åˆåŒ…å«:in</strong><br>DELETE FROM tb_student WHERE stuname in (â€˜é€é¥å­â€™, â€˜éŸ©ä¿¡â€™, â€˜æ–­æ°´â€™);</p>
<p><strong>èŒƒå›´:betweenâ€¦and</strong><br>DELETE FROM tb_student WHERE stubirth BETWEEN â€˜1976-8-21â€™ AND â€˜1976-8-31â€™;</p>
<p><strong>åˆ¤æ–­æ˜¯å¦ä¸ºç©º:is null,is not null</strong><br>DELETE FROM tb_student WHERE (stubirth IS NULL) AND (stutel IS NULL);</p>
<p><strong>ç­›é€‰:like(% -&gt; ä»»æ„ä¸ªä»»æ„å­—ç¬¦; _  -&gt;  è¡¨ç¤ºå•ä¸ªä»»æ„å­—ç¬¦)</strong><br>DELETE FROM tb_student WHERE stuname LIKE â€˜ç›–_ â€˜;<br>DELETE FROM tb_student WHERE stutel LIKE â€˜%2_â€™;</p>
<h2 id="3-UPDATE-æ”¹"><a href="#3-UPDATE-æ”¹" class="headerlink" title="3.UPDATE(æ”¹)"></a>3.UPDATE(æ”¹)</h2><p>ALTER TABLE tb_student ADD COLUMN stuaddr VARCHAR(200);</p>
<p><strong>UPDATE è¡¨å SET å­—æ®µ1=æ–°å€¼1,å­—æ®µ2=æ–°å€¼2,â€¦;  -&gt;  å°†æŒ‡å®šè¡¨ä¸­æ‰€æœ‰è®°å½•ä¸­æŒ‡å®šçš„å­—æ®µä¿®æ”¹æˆæŒ‡å®šçš„å€¼</strong></p>
<p>UPDATE tb_student SET stuaddr=â€™æˆéƒ½â€™;</p>
<p><strong>UPDATE è¡¨å SET å­—æ®µ1=æ–°å€¼1,å­—æ®µ2=æ–°å€¼2,â€¦ WHERE æ¡ä»¶;  -&gt;  å°†æ»¡è¶³æ¡ä»¶çš„è®°å½•çš„æŒ‡å®šå­—æ®µè®¾ç½®ä¸ºæŒ‡å®šçš„å€¼</strong></p>
<p>UPDATE tb_student SET stuaddr=â€™æ˜†æ˜â€™ WHERE stugender=0;</p>
<h2 id="4-SELECT-æŸ¥"><a href="#4-SELECT-æŸ¥" class="headerlink" title="4.SELECT(æŸ¥)"></a>4.SELECT(æŸ¥)</h2><p><strong>SELECT * FROM è¡¨å;  -&gt;  è·å–æŒ‡å®šè¡¨ä¸­æ‰€æœ‰çš„è®°å½•ä¸­æ‰€æœ‰å­—æ®µçš„æ•°æ®</strong></p>
<p>SELECT * FROM tb_student;</p>
<p><strong>æ˜ å°„</strong><br><strong>SELECT å­—æ®µ1,å­—æ®µ2,å­—æ®µ3,â€¦ FROM è¡¨å;  -&gt;  è·å–è¡¨ä¸­æ‰€æœ‰è®°å½•æŒ‡å®šå­—æ®µçš„æ•°æ®</strong><br>SELECT stuname, stugender, stuaddr FROM tb_student;</p>
<p><strong>åˆ—é‡å</strong><br><strong>SELECT å­—æ®µå1 AS â€˜æ–°å­—æ®µå1â€™, å­—æ®µå2,å­—æ®µå3 AS â€˜æ–°å­—æ®µå3â€™, â€¦ FROM è¡¨å;</strong><br>SELECT stuname AS â€˜å§“åâ€™, stugender AS â€˜æ€§åˆ«â€™, stuaddr AS â€˜åœ°å€â€™ from tb_student</p>
<p><strong>ç»“æœé‡æ–°èµ‹å€¼(ä¸»è¦é’ˆå¯¹å¸ƒå°”)</strong><br><strong>SELECT IF(å­—æ®µå, å€¼1, å€¼2) FROM è¡¨å;   -&gt;   ä¸€å¦‚æœifä¸­å¯¹åº”çš„å­—æ®µçš„å€¼æ˜¯1,æœ€åç»“æœæ˜¯å€¼1,å¦åˆ™æ˜¯å€¼2(mysqlç‰¹æœ‰å†™æ³•)</strong></p>
<p>SELECT stuname AS â€˜å§“åâ€™, IF(stugender, â€˜ç”·â€™, â€˜å¥³â€™) AS â€˜æ€§åˆ«â€™, stuaddr AS â€˜åœ°å€â€™ from tb_student</p>
<p><strong>SELECT CASE å­—æ®µ WHEN 1æˆ–0 THEN æ–°å€¼1 ELSE æ–°å€¼2 END FROM è¡¨å;</strong></p>
<p>SELECT stuname AS â€˜å§“åâ€™, CASE stugender WHEN 1 THEN â€˜ç”·â€™ ELSE â€˜å¥³â€™ END AS â€˜æ€§åˆ«â€™, stuaddr AS â€˜åœ°å€â€™ from tb_student</p>
<p><strong>åˆ—åˆå¹¶(æŸ¥è¯¢çš„æ—¶å€™å°†å¤šä¸ªå­—æ®µåˆå¹¶æˆä¸€ä¸ªæ•°æ®è¿”å›ç»“æœ)</strong><br><strong>SELECT CONCAT(å­—æ®µ1,å­—æ®µ2,â€¦) FROM è¡¨å;</strong><br>SELECT CONCAT(stuname, stuid) as â€˜å§“åå­¦å·â€™ FROM tb_student;</p>
<p><strong>ç­›é€‰</strong><br><strong>ä¸Šé¢æ‰€æœ‰çš„æŸ¥è¯¢è¯­æ³•çš„åé¢éƒ½å¯ä»¥åŠ â€™whereæ¡ä»¶â€™å¯¹è®°å½•è¿›è¡Œç­›é€‰</strong><br><strong>SELECT * FROM è¡¨å WHERE æ¡ä»¶;</strong><br>SELECT stuname, stutel FROM tb_student WHERE stugender=0;<br>SELECT * FROM tb_student WHERE stuname LIKE â€˜æœˆ_â€™</p>
<p><strong>æ’åº</strong><br><strong>SELECT * FROM è¡¨å ORDER BY å­—æ®µ;   -&gt;   å°†æŸ¥è¯¢ç»“æœæŒ‰æŒ‡å®šå­—æ®µçš„å€¼ä»å°åˆ°å¤§æ’åº</strong></p>
<p>SELECT * FROM tb_student ORDER BY stuid;</p>
<p><strong>SELECT * FROM è¡¨å ORDER BY å­—æ®µ ASC;   -&gt;   å°†æŸ¥è¯¢ç»“æœæŒ‰æŒ‡å®šå­—æ®µçš„å€¼ä»å°åˆ°å¤§æ’åº</strong><br><strong>SELECT * FROM è¡¨å ORDER BY å­—æ®µ DESC;   -&gt;   å°†æŸ¥è¯¢ç»“æœæŒ‰æŒ‡å®šå­—æ®µçš„å€¼ä»å¤§åˆ°å°æ’åº</strong></p>
<p>SELECT * FROM tb_student ORDER BY stuid DESC;</p>
<p><strong>SELECT * FROM è¡¨å ORDER BY å­—æ®µ1 DESC, å­—æ®µ2 DESC;   -&gt;   å°†æŸ¥è¯¢ç»“æœæŒ‰æŒ‡å®šå­—æ®µçš„å€¼ä»å¤§åˆ°å°æ’åº</strong></p>
<p>SELECT * FROM tb_student ORDER BY stugender DESC, stubirth;   -&gt;   å…ˆæŒ‰stugenderä»å¤§åˆ°å°æ’åº;stugenderç›¸åŒå†æŒ‰stubirthä»å°åˆ°å¤§æ’åº</p>
<h2 id="5-å¤–é”®çº¦æŸ"><a href="#5-å¤–é”®çº¦æŸ" class="headerlink" title="5.å¤–é”®çº¦æŸ"></a>5.å¤–é”®çº¦æŸ</h2><p>è®©ä¸¤ä¸ªè¡¨ä¹‹é—´äº§ç”Ÿè”ç³»</p>
<p><strong>æ·»åŠ å¤–é”®çº¦æŸçš„è§„èŒƒ:</strong><br>ä¸€å¯¹ä¸€: å¯ä»¥æ·»åŠ åˆ°ä»»æ„ä¸€æ–¹;<br>ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€: æ·»åŠ åˆ°å¤šçš„ä¸€æ–¹;<br>å¤šå¯¹å¤š: ä¸¤å¼ è¡¨æ²¡æœ‰åŠæ³•ç›´æ¥å»ºç«‹å¤šå¯¹å¤šçš„å¯¹åº”å…³ç³»,éœ€è¦ç¬¬ä¸‰å¼ è¡¨è¾…åŠ©</p>
<h2 id="6-æŸ¥è¯¢ä¸­çš„é«˜çº§æŸ¥è¯¢"><a href="#6-æŸ¥è¯¢ä¸­çš„é«˜çº§æŸ¥è¯¢" class="headerlink" title="6.æŸ¥è¯¢ä¸­çš„é«˜çº§æŸ¥è¯¢"></a>6.æŸ¥è¯¢ä¸­çš„é«˜çº§æŸ¥è¯¢</h2><h3 id="å»é‡"><a href="#å»é‡" class="headerlink" title="å»é‡"></a>å»é‡</h3><p><strong>SELECT DISTINCT å­—æ®µå FROM è¡¨å;    -&gt;   å»é™¤é‡å¤çš„é¡¹</strong><br><strong>SELECT DISTINCT redate FROM tb_record;</strong></p>
<h3 id="é™åˆ¶å’Œåˆ†é¡µ"><a href="#é™åˆ¶å’Œåˆ†é¡µ" class="headerlink" title="é™åˆ¶å’Œåˆ†é¡µ"></a>é™åˆ¶å’Œåˆ†é¡µ</h3><p><strong>é™åˆ¶: SELECT * FROM è¡¨å LIMIT N;   -&gt;   è·å–å‰Næ¡æ•°æ®</strong><br><strong>SELECT * FROM tb_record LIMIT 5;</strong><br><strong>åç§»:</strong><br><strong>â‘ :SELECT * FROM è¡¨å LIMIT M OFFSET N;   -&gt;   è·³è¿‡å‰Næ¡æ•°æ®è·å–Mæ¡æ•°æ®(ä»ç¬¬N+1æ¡æ•°æ®å¼€å§‹,è·å–Mæ¡æ•°æ®)</strong><br><strong>â‘¡:SELECT * FROM è¡¨å LIMIT N, M;   -&gt;   è·³è¿‡å‰Næ¡æ•°æ®è·å–Mæ¡æ•°æ®(ä»ç¬¬N+1æ¡æ•°æ®å¼€å§‹,è·å–Mæ¡æ•°æ®)</strong></p>
<h3 id="èšåˆ"><a href="#èšåˆ" class="headerlink" title="èšåˆ"></a>èšåˆ</h3><p><strong>max(), min(), sum(), avg(), count()   -&gt;   MySQLä¸“ç”¨</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(score) <span class="keyword">AS</span> <span class="string">'æœ€é«˜åˆ†'</span> <span class="keyword">FROM</span> tb_record;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MIN</span>(score) <span class="keyword">AS</span> <span class="string">'æœ€ä½åˆ†'</span> <span class="keyword">FROM</span> tb_record;</span><br><span class="line">SELECT SUM(score) AS 'æ€»åˆ†' FROM tb_record;   -&gt;   -- æ±‚å’Œæ‰€æœ‰åˆ†æ•°çš„å’Œ,å¦‚æœæŸä¸€ä¸ªè®°å½•çš„åˆ†æ•°æ˜¯ç©º,é‚£ä¹ˆè¿™æ¡è®°å½•ä¸å­˜ä¸è¿ç®—</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(score) <span class="keyword">AS</span> <span class="string">'å¹³å‡åˆ†'</span> <span class="keyword">FROM</span> tb_record;  </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(score) <span class="keyword">AS</span> <span class="string">'ä¸ªæ•°'</span> <span class="keyword">FROM</span> tb_record;</span><br></pre></td></tr></table></figure>

<h3 id="åˆ†ç»„"><a href="#åˆ†ç»„" class="headerlink" title="åˆ†ç»„"></a>åˆ†ç»„</h3><p><strong>SELECT èšåˆæ“ä½œ FROM è¡¨å GROUP BY (å­—æ®µ);   -&gt;   æŒ‰æŒ‡å®šå­—æ®µçš„å€¼å¯¹è¡¨è¿›è¡Œåˆ†ç»„,ç„¶åå¯¹æ¯ä¸ªåˆ†ç»„è¿›è¡Œèšåˆæ“ä½œ</strong><br><strong>æ³¨æ„:</strong><br><strong>â‘ åˆ†ç»„å,é™¤äº†åˆ†ç»„å­—æ®µä»¥å¤–,å…¶ä»–å­—æ®µåªèƒ½èšåˆæ“ä½œ</strong><br><strong>â‘¡åˆ†ç»„åè¦åŠ æ¡ä»¶,åˆ™ç”¨havingä»£æ›¿where</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è·å–æ¯ä¸ªå­¦ç”Ÿæ‰€æœ‰å­¦ç§‘çš„å¹³å±€åˆ†</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sid</span>, <span class="keyword">AVG</span>(score) <span class="keyword">FROM</span> tb_record <span class="keyword">GROUP</span> <span class="keyword">BY</span> (<span class="keyword">sid</span>);</span><br><span class="line"><span class="comment">-- è·å–æ¯ä¸ªå­¦ç§‘çš„å¹³å±€åˆ†</span></span><br><span class="line"><span class="keyword">SELECT</span> cid, <span class="keyword">AVG</span>(score) <span class="keyword">FROM</span> tb_record <span class="keyword">GROUP</span> <span class="keyword">BY</span> (cid);</span><br><span class="line"><span class="comment">-- è·å–æ¯ä¸ªå­¦ç”Ÿé€‰çš„è¯¾ç¨‹çš„æ•°é‡</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sid</span>, <span class="keyword">COUNT</span>(cid) <span class="keyword">FROM</span> tb_record <span class="keyword">GROUP</span> <span class="keyword">BY</span> (<span class="keyword">sid</span>);</span><br></pre></td></tr></table></figure>

<h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h3><p><strong>â‘ :å°†ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœä½œä¸ºå¦å¤–ä¸€ä¸ªæŸ¥è¯¢çš„æ¡ä»¶</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- ä¾‹: è·å–æˆç»©æ˜¯æœ€é«˜åˆ†çš„å­¦ç”Ÿçš„id</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sid</span>, score <span class="keyword">FROM</span> tb_record <span class="keyword">WHERE</span> score=(<span class="keyword">SELECT</span> <span class="keyword">MAX</span>(score) <span class="keyword">FROM</span> tb_record);</span><br><span class="line"><span class="comment">-- ä¾‹: è·å–åˆ†æ•°æœ€é«˜çš„ä¸‰ä¸ªå­¦ç”Ÿ</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sid</span> <span class="keyword">FROM</span> tb_record <span class="keyword">WHERE</span> score <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span>(score) <span class="keyword">FROM</span> tb_record <span class="keyword">ORDER</span> <span class="keyword">BY</span> (score)<span class="keyword">DESC</span> <span class="keyword">LIMIT</span> <span class="number">3</span>);</span><br><span class="line"><span class="comment">-- ä¾‹: è·å–é€‰äº†ä¸¤é—¨ä»¥ä¸Šçš„è¯¾ç¨‹çš„å­¦ç”Ÿid</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">sid</span> <span class="keyword">FROM</span> tb_record <span class="keyword">GROUP</span> <span class="keyword">BY</span> (<span class="keyword">sid</span>) <span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(cid)&gt;<span class="number">2</span>;</span><br><span class="line"><span class="comment">-- ä¾‹: è·å–é€‰äº†ä¸¤é—¨ä»¥ä¸Šçš„è¯¾ç¨‹çš„å­¦ç”Ÿå§“å</span></span><br><span class="line"><span class="keyword">SELECT</span> stuname <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stuid <span class="keyword">IN</span> (<span class="keyword">SELECT</span> <span class="keyword">sid</span> <span class="keyword">FROM</span> tb_record <span class="keyword">GROUP</span> <span class="keyword">BY</span> (<span class="keyword">sid</span>) <span class="keyword">HAVING</span> <span class="keyword">COUNT</span>(cid)&gt;<span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<p><strong>â‘¡:å°†ä¸€ä¸ªæŸ¥è¯¢çš„ç»“æœä½œä¸ºå¦å¤–ä¸€ä¸ªæŸ¥è¯¢çš„å¯¹è±¡</strong><br><strong>æ³¨: è‹¥å°†æŸ¥è¯¢ç»“æœä½œä¸ºæŸ¥è¯¢å¯¹è±¡,åˆ™å¿…é¡»åœ¨ä½¿ç”¨æ—¶ç”¨asé‡å‘½å</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tb_student <span class="keyword">LIMIT</span> <span class="number">4</span>,<span class="number">5</span>;</span><br><span class="line"><span class="keyword">SELECT</span> stuname <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tb_student <span class="keyword">LIMIT</span> <span class="number">4</span>,<span class="number">5</span>) <span class="keyword">AS</span> t1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> stuname <span class="keyword">AS</span> sname, stuaddr <span class="keyword">AS</span> saddr <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stusex=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">SELECT</span> sname, saddr <span class="keyword">FROM</span> (<span class="keyword">SELECT</span> stuname <span class="keyword">AS</span> sname, stuaddr <span class="keyword">AS</span> saddr <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stusex=<span class="number">0</span>) <span class="keyword">AS</span> t2 <span class="keyword">WHERE</span> saddr <span class="keyword">LIKE</span> <span class="string">'%æˆéƒ½'</span>;</span><br></pre></td></tr></table></figure>

<h3 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢"></a>è¿æ¥æŸ¥è¯¢</h3><h4 id="å†…è¿æ¥"><a href="#å†…è¿æ¥" class="headerlink" title="å†…è¿æ¥"></a>å†…è¿æ¥</h4><p><strong>â‘ : SELECT * FROM è¡¨å1, è¡¨å2, â€¦ WHERE è¿æ¥æ¡ä»¶ æŸ¥è¯¢æ¡ä»¶;</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢éƒ¨é—¨ä¸­è–ªæ°´æœ€é«˜çš„äººå§“åã€å·¥èµ„å’Œæ‰€åœ¨éƒ¨é—¨åç§°</span></span><br><span class="line"><span class="keyword">SELECT</span> dno, <span class="keyword">MAX</span>(sal) <span class="keyword">FROM</span> tb_emp <span class="keyword">GROUP</span> <span class="keyword">BY</span>(dno);</span><br><span class="line"><span class="keyword">SELECT</span> ename, sal, dname <span class="keyword">FROM</span> tb_emp, tb_dept, (<span class="keyword">SELECT</span> dno <span class="keyword">AS</span> dno2, <span class="keyword">MAX</span>(sal) <span class="keyword">AS</span> max_sal <span class="keyword">FROM</span> tb_emp <span class="keyword">GROUP</span> <span class="keyword">BY</span>(dno)) <span class="keyword">AS</span> t2 <span class="keyword">WHERE</span> tb_emp.dno=tb_dept.dno <span class="keyword">AND</span> tb_emp.dno=t2.dno2 <span class="keyword">AND</span> sal=max_sal;</span><br></pre></td></tr></table></figure>

<p><strong>â‘¡: SELECT * FROM t1 INNER JOIN t2 ON è¿æ¥æ¡ä»¶1 INNER JOIN t3 ON è¿æ¥æ¡ä»¶2;(æ³¨æ„:å¦‚æœæœ‰ä¸­é—´è¡¨,ä¸­é—´è¡¨æ”¾åœ¨æœ€å‰é¢)</strong><br><strong>æ³¨æ„:å¦‚æœæ—¢æœ‰è¿æ¥æ¡ä»¶åˆæœ‰æŸ¥è¯¢æ¡ä»¶,æŸ¥è¯¢æ¡ä»¶å¿…é¡»æ”¾åœ¨è¿æ¥æ¡ä»¶çš„åé¢</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- æŸ¥è¯¢éƒ¨é—¨ä¸­è–ªæ°´æœ€é«˜çš„äººå§“åã€å·¥èµ„å’Œæ‰€åœ¨éƒ¨é—¨åç§°</span></span><br><span class="line"><span class="keyword">SELECT</span> ename, sal, dname <span class="keyword">FROM</span> tb_emp <span class="keyword">INNER</span> <span class="keyword">JOIN</span> tb_dept <span class="keyword">ON</span> tb_emp.dno=tb_dept.dno <span class="keyword">INNER</span> <span class="keyword">JOIN</span> (<span class="keyword">SELECT</span> dno <span class="keyword">AS</span> dno2, <span class="keyword">MAX</span>(sal) <span class="keyword">AS</span> max_sal <span class="keyword">FROM</span> tb_emp <span class="keyword">GROUP</span> <span class="keyword">BY</span>(dno)) <span class="keyword">AS</span> t2 <span class="keyword">ON</span> tb_emp.dno=t2.dno2 <span class="keyword">WHERE</span> sal=max_sal;</span><br></pre></td></tr></table></figure>

<h4 id="å¤–è¿æ¥"><a href="#å¤–è¿æ¥" class="headerlink" title="å¤–è¿æ¥"></a>å¤–è¿æ¥</h4><p><strong>åœ¨MySQLä¸­åªæ”¯æŒå·¦å¤–è¿æ¥(LEFT JOIN)å’Œå³å¤–è¿æ¥(right join)</strong></p>
<p><strong>â‘ : å·¦è¿æ¥: SELECT * FROM è¡¨1 LEFT JOIN è¡¨2 : å…ˆå°†è¡¨1ä¸­çš„è®°å½•å…¨éƒ¨å–å‡ºæ¥,æŒ‰è¿æ¥æ¡ä»¶ä¾æ¬¡è¿æ¥è¡¨2ä¸­çš„è®°å½•,è¡¨1ä¸­çš„è®°å½•æ‰¾ä¸åˆ°æ»¡è¶³æ¡ä»¶,åˆ™è¡¨2è®°å½•é‚£ä¹ˆè¿æ¥çš„å†…å®¹å°±æ˜¯ç©º</strong></p>
<p><strong>â‘¡: å³è¿æ¥: SELECT * FROM è¡¨1 RIGHT JOIN è¡¨2 : å…ˆå°†è¡¨2ä¸­çš„è®°å½•å…¨éƒ¨å–å‡ºæ¥,æŒ‰è¿æ¥æ¡ä»¶ä¾æ¬¡è¿æ¥è¡¨1ä¸­çš„è®°å½•,è¡¨2ä¸­çš„è®°å½•æ‰¾ä¸åˆ°æ»¡è¶³æ¡ä»¶,åˆ™è¡¨1è®°å½•é‚£ä¹ˆè¿æ¥çš„å†…å®¹å°±æ˜¯ç©º</strong></p>
<h1 id="DCL-æ•°æ®æ§åˆ¶"><a href="#DCL-æ•°æ®æ§åˆ¶" class="headerlink" title="DCL(æ•°æ®æ§åˆ¶)"></a>DCL(æ•°æ®æ§åˆ¶)</h1><p>DCLä¸»è¦æä¾›æˆæƒå’Œæˆæƒå¬å›ä»¥åŠè§†å›¾, ç´¢å¼•ç­‰ç›¸å…³åŠŸèƒ½</p>
<h2 id="ç”¨æˆ·ç®¡ç†-ä¸€èˆ¬åªæœ‰rootè´¦å·æœ‰æ­¤æƒé™"><a href="#ç”¨æˆ·ç®¡ç†-ä¸€èˆ¬åªæœ‰rootè´¦å·æœ‰æ­¤æƒé™" class="headerlink" title="ç”¨æˆ·ç®¡ç†(ä¸€èˆ¬åªæœ‰rootè´¦å·æœ‰æ­¤æƒé™)"></a>ç”¨æˆ·ç®¡ç†(ä¸€èˆ¬åªæœ‰rootè´¦å·æœ‰æ­¤æƒé™)</h2><p><strong>åˆ›å»ºç”¨æˆ·</strong><br><strong>CREATE USER â€˜ç”¨æˆ·åâ€˜@â€™ç™»é™†åœ°å€â€™;  -&gt;   åˆ›å»ºæŒ‡å®šç”¨æˆ·,ç”¨æˆ·ç™»é™†æ—¶ä¸ç”¨è¾“å…¥å¯†ç </strong><br><strong>CREATE USER â€˜ç”¨æˆ·åâ€˜@â€™ç™»é™†åœ°å€â€™ identified by â€˜å¯†ç â€™;   -&gt;   åˆ›å»ºæŒ‡å®šç”¨æˆ·,ç”¨æˆ·ç™»é™†æ—¶éœ€è¦è¾“å…¥å¯†ç </strong><br>è¯´æ˜:<br>ç™»å½•åœ°å€   -&gt;   ipåœ°å€<br>                          localhost(æœ¬æœº)<br>                          %(ä»»æ„ä½ç½®)</p>
<p><strong>åˆ é™¤ç”¨æˆ·</strong><br><strong>DROP USER â€˜ç”¨æˆ·åâ€™;</strong></p>
<h2 id="æˆæƒç®¡ç†"><a href="#æˆæƒç®¡ç†" class="headerlink" title="æˆæƒç®¡ç†"></a>æˆæƒç®¡ç†</h2><p><strong>æˆæƒ</strong><br><strong>GRANT æƒé™ç±»å‹ ON æ•°æ®åº“.è¡¨ TO â€˜ç”¨æˆ·åâ€˜@â€™ç™»é™†åœ°å€â€™;</strong></p>
<blockquote>
<p>è¯´æ˜:<br>æƒé™ç±»å‹: insert, delete, update, select,  create, drop, all privilege(æ‰€æœ‰æƒé™);</p>
</blockquote>
<p><strong>å¬å›æƒé™</strong><br><strong>REVOKE æƒé™ç±»å‹ ON æ•°æ®åº“.è¡¨ FROM ç”¨æˆ·å;</strong></p>
<h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><p>è‹¥å®Œæˆä¸€ä¸ªä»»åŠ¡éœ€è¦å¤šä¸ªæ“ä½œ,ä½†åªè¦æœ‰ä¸€ä¸ªå¤±è´¥åˆ™ä»»åŠ¡ä¸å®Œæˆ,æ•°æ®å›åˆ°ä»»åŠ¡å¼€å§‹å‰çš„çŠ¶æ€;åªæœ‰æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸäº†,æ•°æ®åº“æ‰æ›´æ–°;æ­¤æ—¶ç”¨äº‹åŠ¡è¯­æ³•</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;   <span class="comment">-- å¼€å¯äº‹åŠ¡ç¯å¢ƒ </span></span><br><span class="line"><span class="keyword">UPDATE</span> tb_student <span class="keyword">SET</span> stubirth=<span class="string">'1993-1-1'</span> <span class="keyword">WHERE</span> stusex=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stuname <span class="keyword">LIKE</span> <span class="string">'æ¨%'</span></span><br><span class="line"><span class="keyword">COMMIT</span>;   <span class="comment">-- æäº¤äº‹åŠ¡ç¯å¢ƒä¸­çš„æ“ä½œç»“æœ</span></span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>

<h2 id="è§†å›¾"><a href="#è§†å›¾" class="headerlink" title="è§†å›¾"></a>è§†å›¾</h2><p><strong>åˆ›å»ºè§†å›¾:</strong><br><strong>CREATE VIEW è§†å›¾å AS sqlæŸ¥è¯¢è¯­å¥;</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- è·å–å­¦ç”Ÿå­¦ç§‘çš„æˆç»©</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> vw_stu_score <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> stuid, stuname, couid, couname, score <span class="keyword">FROM</span> tb_student, tb_record, tb_course <span class="keyword">WHERE</span> tb_student.stuid=tb_record.sid <span class="keyword">AND</span> tb_course.couid=tb_record.cid;</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨è§†å›¾:</strong><br><strong>(è§†å›¾æŸ¥è¯¢æ“ä½œå’Œè¡¨çš„æŸ¥è¯¢æ“ä½œåŸºæœ¬ä¸€è‡´,ä¸€èˆ¬ä¸å¢åˆ æ”¹)</strong></p>
<blockquote>
<p>åº”ç”¨:<br>æ–¹ä¾¿æŸ¥è¯¢,<br>ç»™æƒé™ä¸å¤Ÿçš„ç”¨æˆ·æŸ¥çœ‹è¡¨å†…çš„éƒ¨åˆ†ä¿¡æ¯.</p>
</blockquote>
<h2 id="ç´¢å¼•"><a href="#ç´¢å¼•" class="headerlink" title="ç´¢å¼•"></a>ç´¢å¼•</h2><p>ç´¢å¼•å°±åƒä¹¦çš„ç›®å½•,è®°å½•äº†æ•°æ®çš„ä½ç½®, å¯ä»¥æé«˜æŸ¥è¯¢é€Ÿåº¦;ç»™ä½¿ç”¨é¢‘ç‡é«˜çš„å­—æ®µæ·»åŠ ç´¢å¼•,(ä¸»é”®è‡ªå¸¦å”¯ä¸€ç´¢å¼•)</p>
<p><strong>æ·»åŠ ç´¢å¼•:</strong><br><strong>â‘ : CREATE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µ);   -&gt;   ç»™æŒ‡å®šå­—æ®µæ·»åŠ ç´¢å¼•</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">EXPLAIN</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> tb_student <span class="keyword">WHERE</span> stuname=<span class="string">'å²³ä¸ç¾¤'</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> idx_stuname <span class="keyword">ON</span> tb_student(stuname);</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> idx_stuaddr <span class="keyword">ON</span> tb_student(stuaddr);</span><br></pre></td></tr></table></figure>
<p><strong>â‘¡: CREATE UNIQUE INDEX ç´¢å¼•å ON è¡¨å(å­—æ®µ);   -&gt;   ç»™æŒ‡å®šå­—æ®µæ·»åŠ å”¯ä¸€ç´¢å¼•</strong><br>æ³¨æ„:æ¨¡ç³ŠæŸ¥è¯¢çš„æ—¶å€™å¦‚æœä»¥%å’Œ_å¼€å¤´åˆ™ç´¢å¼•æ— æ•ˆ</p>
<p><strong>åˆ é™¤ç´¢å¼•:</strong><br><strong>ALTER TABLE è¡¨å DROP INDEX ç´¢å¼•å;   -&gt;   åˆ é™¤æŒ‡å®šç´¢å¼•</strong></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_student <span class="keyword">DROP</span> <span class="keyword">INDEX</span> idx_stuname;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_student <span class="keyword">DROP</span> <span class="keyword">INDEX</span> idx_stuaddr;</span><br></pre></td></tr></table></figure>








]]></content>
      <categories>
        <category>æ•°æ®åº“</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>åŸºç¡€</tag>
        <tag>æ•°æ®åº“</tag>
      </tags>
  </entry>
  <entry>
    <title>vimåŸºç¡€ä½¿ç”¨æ•™ç¨‹</title>
    <url>/2019/12/23/vim%E7%BC%96%E8%BE%91%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8/</url>
    <content><![CDATA[<p>vimæ—¥å¸¸ä½¿ç”¨</p>
<a id="more"></a>

<h1 id="1-vimçš„ä¸‰ç§æ¨¡å¼"><a href="#1-vimçš„ä¸‰ç§æ¨¡å¼" class="headerlink" title="1.vimçš„ä¸‰ç§æ¨¡å¼"></a>1.vimçš„ä¸‰ç§æ¨¡å¼</h1><ul>
<li><strong>å‘½ä»¤æ¨¡å¼ï¼š</strong>æœªå°¾æ—¢æ²¡æœ‰æ’å…¥çš„å­—æ ·ä¹Ÿæ²¡æœ‰å†’å·ï¼ˆåœ¨ç¼–è¾‘æ¨¡å¼å’Œæœ«è¡Œæ¨¡å¼ä¸‹æŒ‰escé”®å¯ä»¥è¿›å…¥å‘½ä»¤æ¨¡å¼ï¼‰</li>
<li><strong>ç¼–è¾‘æ¨¡å¼ï¼š</strong>æœ«å°¾ä¼šæ˜¾ç¤ºâ€™ä¸€æ’å…¥ä¸€/-insert-ï¼Œå¹¶ä¸”åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œè¾“å…¥æ“ä½œï¼ˆå¯ä»¥ç¼–è¾‘ï¼‰ï¼ˆåœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰iå°±å¯ä»¥è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼‰</li>
<li><strong>æœªè¡Œæ¨¡å¼ï¼š</strong>æœªå°¾æ˜¾ç¤ºå†’å·ï¼Œå¹¶ä¸”å†’å·åè¾¹å¯ä»¥è¾“å…¥å†…å®¹ï¼ˆåœ¨å‘½ä»¤æ¨¡å¼ä¸‹è¾“å…¥å†’å·å°±å¯ä»¥è¿›å…¥æœªè¡Œæ¨¡å¼ï¼‰</li>
</ul>
<h1 id="2-vimçš„é…ç½®"><a href="#2-vimçš„é…ç½®" class="headerlink" title="2.vimçš„é…ç½®"></a>2.vimçš„é…ç½®</h1><p>é€šè¿‡ç¼–è¾‘  etc/vimrc æ–‡ä»¶é…ç½®</p>
<h1 id="3-åŸºæœ¬æ“ä½œ"><a href="#3-åŸºæœ¬æ“ä½œ" class="headerlink" title="3.åŸºæœ¬æ“ä½œ"></a>3.åŸºæœ¬æ“ä½œ</h1><h2 id="1-ä¿å­˜å’Œé€€å‡º"><a href="#1-ä¿å­˜å’Œé€€å‡º" class="headerlink" title="1)ä¿å­˜å’Œé€€å‡º"></a>1)ä¿å­˜å’Œé€€å‡º</h2><p><strong>æ‰€æœ‰çš„ä¿å­˜å’Œé€€å‡ºéƒ½æ˜¯åœ¨æœ«è¡Œæ¨¡å¼ä¸‹è¿›è¡Œçš„</strong><br>W   â€”â€”&gt;åªä¿å­˜(ç›¸å½“äºctr+s)<br>q   â€”â€”&gt;ç›´æ¥é€€å‡º(åªæœ‰å½“å‰æ–‡ä»¶çš„å†…å®¹å…¨éƒ¨ä¿å­˜æ‰èƒ½ç›´æ¥é€€å‡º,å¦‚æœä¸ä¿å­˜å¼ºåˆ¶é€€å‡º,éœ€è¦åœ¨qåŠ !)<br>Wq   â€”â€”&gt;å…ˆä¿å­˜å†é€€å‡º<br>æ³¨æ„:å¼ºåˆ¶æ‰§è¡Œåœ¨æŒ‡ä»¤ååŠ !</p>
<h2 id="2-å…‰æ ‡æ“ä½œ"><a href="#2-å…‰æ ‡æ“ä½œ" class="headerlink" title="2)å…‰æ ‡æ“ä½œ"></a>2)å…‰æ ‡æ“ä½œ</h2><p><strong>æ‰€æœ‰å…‰æ ‡æ“ä½œå¯¹åº”çš„æŒ‡ä»¤éƒ½æ˜¯åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æ‰§è¡Œçš„</strong><br>^   â€”â€”&gt;ç›´æ¥å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œé¦–<br>$   â€”â€”&gt;ç›´æ¥å°†å…‰æ ‡ç§»åŠ¨åˆ°è¡Œå°¾<br>G   â€”â€”&gt;ç§»åŠ¨åˆ°æ–‡ä»¶æœªå°¾<br>gg   â€”â€”&gt;ç§»åŠ¨åˆ°æ–‡ä»¶å¼€å¤´<br>è¡Œå·G    â€”â€”&gt;ç§»åŠ¨åˆ°æŒ‡å®šè¡Œå·çš„ä½åˆ°</p>
<h2 id="3-æ–‡æœ¬æ“ä½œ"><a href="#3-æ–‡æœ¬æ“ä½œ" class="headerlink" title="3)æ–‡æœ¬æ“ä½œ"></a>3)æ–‡æœ¬æ“ä½œ</h2><p>ä»¥ä¸‹æŒ‡ä»¤å‰é¢å¦‚æœæ²¡æœ‰å†’å·è¡¨ç¤ºåœ¨å‘½ä»¤æ¨¡å¼ä¸‹æ‰§è¡Œï¼Œæœ‰å†’å·çš„åœ¨æœªè¡Œæ¨¡å¼ä¸‹æ‰§è¡Œ</p>
<p>dd   â€”â€”&gt;åˆ é™¤å½“å‰å…‰æ ‡æ‰€åœ¨çš„è¡Œ<br>æ•°å­—dd   â€”â€”&gt;æ•°å­—å¦‚æœæ˜¯Nï¼Œä»å…‰æ ‡æ‰€åœ¨çš„ä½ç½®å¼€å§‹åˆ Nè¡Œ<br>:%d     â€”â€”&gt;æœ«è¡Œæ¨¡å¼ä¸‹è¾“å…¥%dï¼Œåˆ é™¤æ‰€æœ‰</p>
<p>u   â€”â€”&gt;æ’¤é”€<br>ctr+   r   â€”â€”&gt;åæ’¤é”€</p>
<p>yy   â€”â€”&gt;å¤åˆ¶å…‰æ ‡æ‰€åœ¨çš„è¡Œ<br>æ•°å­—yy   â€”â€”&gt;æ•°å­—å¦‚æœæ˜¯N,ä»å…‰æ ‡æ‰€åœ¨çš„ä½ç½®å¼€å§‹å¤åˆ¶Nè¡Œ<br>:%y   â€”â€”&gt;æœªè¡Œæ¨¡å¼ä¸‹è¾“å…¥%y,å¤åˆ¶æ‰€æœ‰p-ç²˜è´´<br>p   â€”â€”&gt;ç²˜è´´<br>P   â€”â€”&gt;ç²˜è´´åˆ°ä¸Šä¸€è¡Œ</p>
<h2 id="4-æŸ¥æ‰¾å’Œæ›¿æ¢"><a href="#4-æŸ¥æ‰¾å’Œæ›¿æ¢" class="headerlink" title="4)æŸ¥æ‰¾å’Œæ›¿æ¢"></a>4)æŸ¥æ‰¾å’Œæ›¿æ¢</h2><p><strong>: /æ­£åˆ™è¡¨è¾¾å¼</strong>â€”â€”&gt;æŸ¥æ‰¾å½“å‰æ–‡ä»¶ä¸­ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„å†…å®¹(ç»“æœå¯ä»¥ç”¨nå’ŒNæ¥åˆ‡æ¢)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">vimä¸­æ­£åˆ™è¡¨è¾¾å¼çš„è¦æ±‚:</span><br><span class="line">1)pythonæ­£åˆ™ä¸­æ‰€æœ‰çš„è¯­æ³•éƒ½æœ‰æ•ˆ</span><br><span class="line">2)å•ç‹¬ä½¿ç”¨æœ‰ç‰¹æ®ŠåŠŸèƒ½çš„ç¬¦å·ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦åŠ \æ‰æœ‰æ•ˆ</span><br><span class="line">r'\d+'    -&gt;  /\d\+</span><br><span class="line">r'\d&#123;3&#125;'  -&gt;  /\d\&#123;3&#125;</span><br><span class="line">r'and|or' -&gt;  /and\|or</span><br></pre></td></tr></table></figure>

<p><strong>:1,$s/è¢«æ›¿æ¢çš„å¯¹è±¡å¯¹åº”çš„æ­£åˆ™/æ›¿æ¢å†…å®¹/å‚æ•°</strong>â€”â€”&gt;å°†æ–‡ä»¶ä¸­æ­£åˆ™åŒ¹é…åˆ°çš„å†…å®¹æ›¿æ¢æˆæŒ‡å®šå†…å®¹</p>
<blockquote>
<p>å‚æ•°:<br>gâ€”â€”&gt;å…¨å±€åŒ¹é…(ä¼šæ›¿æ¢æ‰€æœ‰ç¬¦åˆè¦æ±‚çš„å­—ç¬¦ä¸²,é»˜è®¤æƒ…å†µä¸‹ä¸€è¡Œåªæ›¿æ¢ä¸€ä¸ª)<br>iâ€”â€”&gt;åŒ¹é…çš„æ—¶å€™å¿½ç•¥å¤§å°å†™<br>câ€”â€”&gt;æ›¿æ¢çš„æ—¶å€™ç»™å‡ºæç¤º<br>eâ€”â€”&gt;å¿½ç•¥é”™è¯¯(å¿½ç•¥æ­£åˆ™çš„é”™)</p>
</blockquote>
<h1 id="4é«˜çº§æ“ä½œ"><a href="#4é«˜çº§æ“ä½œ" class="headerlink" title="4é«˜çº§æ“ä½œ"></a>4é«˜çº§æ“ä½œ</h1><h2 id="1-æ¯”è¾ƒæ–‡ä»¶"><a href="#1-æ¯”è¾ƒæ–‡ä»¶" class="headerlink" title="1)æ¯”è¾ƒæ–‡ä»¶"></a>1)æ¯”è¾ƒæ–‡ä»¶</h2><p><strong>vim -d  æ–‡ä»¶è·¯å¾„1  æ–‡ä»¶è·¯å¾„2</strong></p>
<h2 id="2-åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶"><a href="#2-åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶" class="headerlink" title="2)åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶"></a>2)åŒæ—¶æ‰“å¼€å¤šä¸ªæ–‡ä»¶</h2><p><strong>vim  æ–‡ä»¶è·¯å¾„  æ–‡ä»¶è·¯å¾„ â€¦</strong></p>
<blockquote>
<p>1.åˆ‡æ¢çª—å£å†…å®¹<br>åœ¨æœ«è¡Œæ¨¡å¼ä¸‹è¾“å…¥:<strong>ls</strong>â€”â€”&gt;å¯ä»¥æŸ¥çœ‹å½“å‰æ‰“å¼€çš„æ‰€æœ‰çš„æ–‡ä»¶å’Œæ–‡ä»¶å¯¹è±¡çš„æ ‡å·åœ¨æœ«è¡Œæ¨¡å¼ä¸‹è¾“å…¥:<strong>bæ ‡å·</strong>â€”â€”&gt;å¯ä»¥å°†å½“å‰çª—å£ä¸­çš„å†…å®¹åˆ‡æ¢åˆ°æŒ‡å®šæ ‡å·å¯¹åº”çš„æ–‡ä»¶çš„å†…å®¹</p>
<p>2.çª—å£çš„æ‹†åˆ†<br>åœ¨æœªè¡Œæ¨¡å¼ä¸‹è¾“å…¥:<strong>sp/vs</strong>â€”â€”&gt;å¯ä»¥å°†å½“å‰çª—å£å‚ç›´æ–¹å‘/æ°´å¹³æ–¹å‘è¿›è¡Œæ‹†åˆ†;æ‹†åˆ†åå¯ä»¥åœ¨å‘½ä»¤æ¨¡å¼ä¸‹æŒ‰<strong>ctr+w</strong>æ¥åˆ‡æ¢çª—å£</p>
</blockquote>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>vim</tag>
      </tags>
  </entry>
  <entry>
    <title>shellç¼–ç¨‹</title>
    <url>/2019/12/23/shell%E7%BC%96%E7%A8%8B/</url>
    <content><![CDATA[<p>Shellè„šæœ¬ï¼Œæ˜¯ä¸€ç§ä¸ºshellç¼–å†™çš„è„šæœ¬ç¨‹åºã€‚</p>
<a id="more"></a>


<h1 id="shellç¼–ç¨‹"><a href="#shellç¼–ç¨‹" class="headerlink" title="shellç¼–ç¨‹"></a>shellç¼–ç¨‹</h1><p>Shellè„šæœ¬ï¼Œæ˜¯ä¸€ç§ä¸ºshellç¼–å†™çš„è„šæœ¬ç¨‹åºã€‚</p>
<p>Shellç¼–ç¨‹è·ŸJavaScriptã€Pythonç¼–ç¨‹ä¸€æ ·ï¼Œåªè¦æœ‰ä¸€ä¸ªèƒ½ç¼–å†™ä»£ç çš„æ–‡æœ¬ç¼–è¾‘å™¨å’Œä¸€ä¸ªèƒ½è§£é‡Šæ‰§è¡Œçš„è„šæœ¬è§£é‡Šå™¨å°±å¯ä»¥äº†ã€‚</p>
<p>Linuxçš„Shellç§ç±»æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬ä¸»è¦ç”¨çš„æ˜¯Bourne Shell(/usr.bin/shæˆ–/bin/sh)</p>
<h1 id="1-åˆ›å»ºshellæ–‡ä»¶"><a href="#1-åˆ›å»ºshellæ–‡ä»¶" class="headerlink" title="1.åˆ›å»ºshellæ–‡ä»¶"></a>1.åˆ›å»ºshellæ–‡ä»¶</h1><p>åŸåˆ™ä¸Šshellç¨‹åºå¯ä»¥å†™åœ¨ä»»ä½•æ–‡ä»¶ä¸­ï¼Œä½†æ˜¯ä¸€èˆ¬ä¼šåœ¨shellæ–‡ä»¶ååŠ åç¼€.shè¡¨ç¤ºå½“å‰æ–‡ä»¶æ˜¯ä¸€ä¸ªshellæ–‡ä»¶<br>shelléœ€è¦å¯æ‰§è¡Œæƒé™ï¼Œæ‰€ä»¥åˆ›å»ºå¥½çš„shellæ–‡ä»¶éœ€è¦æ·»åŠ xæƒé™</p>
<h1 id="2-åŸºç¡€è¯­æ³•"><a href="#2-åŸºç¡€è¯­æ³•" class="headerlink" title="2.åŸºç¡€è¯­æ³•"></a>2.åŸºç¡€è¯­æ³•</h1><h2 id="1ï¼‰æ³¨é‡Š"><a href="#1ï¼‰æ³¨é‡Š" class="headerlink" title="1ï¼‰æ³¨é‡Š"></a>1ï¼‰æ³¨é‡Š</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å•è¡Œæ³¨é‡Š</span></span><br><span class="line">:&lt;&lt;EOF</span><br><span class="line">å¤šè¡Œæ³¨é‡Š1</span><br><span class="line">å¤šè¡Œæ³¨é‡Š2</span><br><span class="line">å¤šè¡Œæ³¨é‡Š3</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>

<h2 id="2ï¼‰è¾“å‡ºå’Œè¾“å…¥"><a href="#2ï¼‰è¾“å‡ºå’Œè¾“å…¥" class="headerlink" title="2ï¼‰è¾“å‡ºå’Œè¾“å…¥"></a>2ï¼‰è¾“å‡ºå’Œè¾“å…¥</h2><p>echoæŒ‡ä»¤å°±ç›¸å½“äºpythonä¸­çš„printå‡½æ•°(é»˜è®¤ä¼šæ¢è¡Œ)</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo  è¾“å‡ºå†…å®¹  </span><br><span class="line">echo -n è¾“å‡ºå†…å®¹     # è¾“å‡ºçš„æ—¶å€™ä¸æ¢è¡Œ</span><br></pre></td></tr></table></figure>

<p>printfæŒ‡ä»¤ï¼ˆè¾“å‡ºä¸èƒ½æ¢è¡Œï¼‰</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">printf</span> è¾“å‡ºå†…å®¹</span><br></pre></td></tr></table></figure>

<p>è¾“å…¥æŒ‡ä»¤:<br>read å˜é‡å    â€“ è¾“å…¥å†…å®¹ï¼Œå¹¶ä¸”å°†è¾“å…¥çš„ç»“æœä¿å­˜åœ¨å˜é‡ä¸­</p>
<h2 id="3ï¼‰å˜é‡"><a href="#3ï¼‰å˜é‡" class="headerlink" title="3ï¼‰å˜é‡"></a>3ï¼‰å˜é‡</h2><h3 id="a-å£°æ˜å˜é‡çš„è¯­æ³•-å˜é‡å-å€¼"><a href="#a-å£°æ˜å˜é‡çš„è¯­æ³•-å˜é‡å-å€¼" class="headerlink" title="a. å£°æ˜å˜é‡çš„è¯­æ³•:   å˜é‡å=å€¼"></a>a. å£°æ˜å˜é‡çš„è¯­æ³•:   å˜é‡å=å€¼</h3><p>è¯´æ˜:  a. å˜é‡åå’Œ=, =å’Œå€¼ä¹‹é—´ä¸èƒ½æœ‰ç©ºæ ¼<br>â€‹       b. å˜é‡åçš„è¦æ±‚å’Œpythonå˜é‡åè¦æ±‚ä¸€æ ·</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">name='å°æ˜'</span><br><span class="line">age=18</span><br><span class="line">stu_name=å°çº¢</span><br></pre></td></tr></table></figure>

<h3 id="b-ä½¿ç”¨å˜é‡"><a href="#b-ä½¿ç”¨å˜é‡" class="headerlink" title="b. ä½¿ç”¨å˜é‡:"></a>b. ä½¿ç”¨å˜é‡:</h3><p>â€‹         $å˜é‡<br>â€‹         ${å˜é‡}</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">age=18</span><br><span class="line">echo $age</span><br><span class="line">age2=$&#123;age&#125;</span><br></pre></td></tr></table></figure>

<h3 id="c-åªè¯»å˜é‡"><a href="#c-åªè¯»å˜é‡" class="headerlink" title="c. åªè¯»å˜é‡"></a>c. åªè¯»å˜é‡</h3><p>ä½¿ç”¨ readonly å‘½ä»¤å¯ä»¥å°†å˜é‡å®šä¹‰ä¸ºåªè¯»å˜é‡ï¼Œåªè¯»å˜é‡çš„å€¼ä¸èƒ½è¢«æ”¹å˜ã€‚</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">gender='ç”·'</span><br><span class="line">readonly gender</span><br><span class="line">gender='å¥³'     # test.sh: line 17: gender: readonly variable</span><br></pre></td></tr></table></figure>

<h3 id="d-åˆ é™¤å˜é‡"><a href="#d-åˆ é™¤å˜é‡" class="headerlink" title="d. åˆ é™¤å˜é‡"></a>d. åˆ é™¤å˜é‡</h3><p>ä½¿ç”¨ unset å‘½ä»¤å¯ä»¥åˆ é™¤å˜é‡</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">name='yuting'</span><br><span class="line">unset name</span><br></pre></td></tr></table></figure>

<h2 id="4ï¼‰è·å–linuxæŒ‡ä»¤ç»“æœ"><a href="#4ï¼‰è·å–linuxæŒ‡ä»¤ç»“æœ" class="headerlink" title="4ï¼‰è·å–linuxæŒ‡ä»¤ç»“æœ"></a>4ï¼‰è·å–linuxæŒ‡ä»¤ç»“æœ</h2><p>åœ¨shellè„šæœ¬ä¸­å¯ä»¥ç›´æ¥å†™linuxæŒ‡ä»¤ï¼Œåœ¨æ‰§è¡Œshellè„šæœ¬çš„æ—¶å€™è¿™äº›æŒ‡ä»¤å¯ä»¥ç›´æ¥è·å–</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ls     # lsæŒ‡ä»¤</span><br><span class="line">ls  -lh      # lsæŒ‡ä»¤ï¼Œå¹¶ä¸”è®¾ç½®å‚æ•°</span><br><span class="line">touch a.txt    # åˆ›å»ºa.txtæ–‡ä»¶</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è·å–æŒ‡ä»¤ç»“æœ: å˜é‡=$(æŒ‡ä»¤)  /   å˜é‡=`æŒ‡ä»¤`</span></span><br><span class="line">lsresult=$(ls)    #å°†lsæŒ‡ä»¤çš„ç»“æœä¿å­˜åˆ°å˜é‡lsresultä¸­</span><br><span class="line">currnet_path=`pwd`</span><br></pre></td></tr></table></figure>



<h1 id="3-shellå­—ç¬¦ä¸²"><a href="#3-shellå­—ç¬¦ä¸²" class="headerlink" title="3.shellå­—ç¬¦ä¸²"></a>3.shellå­—ç¬¦ä¸²</h1><p>shellä¸­çš„å­—ç¬¦ä¸²å¯ä»¥ç”¨å•å¼•å·ä¹Ÿå¯ä»¥ä½¿ç”¨åŒå¼•å·ç”šè‡³å¯ä»¥ä¸ç”¨å¼•å·ã€‚ä½†æ˜¯å•å¼•å·ä¸­ä¸èƒ½å‡ºç°å•å¼•å·å­—ç¬¦ï¼ŒåŠ \ä¹Ÿä¸è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">str1='abc'</span><br><span class="line">str2="abc"</span><br><span class="line">str3=abc</span><br><span class="line">str4='abc\n123'		#æ”¯æŒè½¬ä¹‰å­—ç¬¦,ä½†æ˜¯ä¸æ”¯æŒç¼–ç å­—ç¬¦</span><br><span class="line">str5="abc\n123"</span><br><span class="line"></span><br><span class="line">age=18</span><br><span class="line">str6="å¹´é¾„æ˜¯$age"    #åŒå¼•å·é‡Œé¢å¯ä»¥å‡ºç°å˜é‡,å•å¼•å·ä¸è¡Œ</span><br></pre></td></tr></table></figure>

<h2 id="1ï¼‰å­—ç¬¦ä¸²æ‹¼æ¥"><a href="#1ï¼‰å­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="1ï¼‰å­—ç¬¦ä¸²æ‹¼æ¥"></a>1ï¼‰å­—ç¬¦ä¸²æ‹¼æ¥</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">str1="hello"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">å•å¼•å·æ‹¼æ¥</span></span><br><span class="line">str2=''$&#123;str1&#125;',world!'</span><br><span class="line">str3=''$str1',world!'</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">åŒå¼•å·æ‹¼æ¥</span></span><br><span class="line">str4="$&#123;str1&#125;,world!"</span><br><span class="line">str5=""$str1",world!"</span><br></pre></td></tr></table></figure>

<h2 id="2ï¼‰è·å–å­—ç¬¦ä¸²é•¿åº¦"><a href="#2ï¼‰è·å–å­—ç¬¦ä¸²é•¿åº¦" class="headerlink" title="2ï¼‰è·å–å­—ç¬¦ä¸²é•¿åº¦"></a>2ï¼‰è·å–å­—ç¬¦ä¸²é•¿åº¦</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">str1="abcd"</span><br><span class="line">echo $&#123;#str1&#125;    # è¾“å‡º4</span><br></pre></td></tr></table></figure>

<h2 id="3ï¼‰å­—ç¬¦ä¸²æå–"><a href="#3ï¼‰å­—ç¬¦ä¸²æå–" class="headerlink" title="3ï¼‰å­—ç¬¦ä¸²æå–"></a>3ï¼‰å­—ç¬¦ä¸²æå–</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å­—ç¬¦ä¸²:ä¸‹æ ‡:ä¸ªæ•°   --ä»å­—ç¬¦ä¸²ä¸­æŒ‡å®šä¸‹æ ‡å¼€å§‹è·å–æŒ‡å®šä¸ªæ•°å­—ç¬¦,è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å­—ç¬¦ä¸²:ä¸‹æ ‡:1   -- è·å–å­—ç¬¦ä¸²ä¸­æŒ‡å®šä¸‹æ ‡å¯¹åº”çš„å­—ç¬¦</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å­—ç¬¦ä¸²:ä¸‹æ ‡     -- ä»æŒ‡å®šä¸‹æ ‡å¼€å§‹è·å–åˆ°å­—ç¬¦ä¸²æœ€å</span></span><br><span class="line">string='hello world'</span><br><span class="line">echo $&#123;string:1:4&#125;    # ello</span><br></pre></td></tr></table></figure>



<h1 id="4-shellæ•°ç»„"><a href="#4-shellæ•°ç»„" class="headerlink" title="4.shellæ•°ç»„"></a>4.shellæ•°ç»„</h1><p>åœ¨ Shell ä¸­ï¼Œç”¨æ‹¬å·æ¥è¡¨ç¤ºæ•°ç»„ï¼Œæ•°ç»„å…ƒç´ ç”¨â€ç©ºæ ¼â€ç¬¦å·åˆ†å‰²å¼€ã€‚å®šä¹‰æ•°ç»„çš„ä¸€èˆ¬å½¢å¼ä¸ºï¼š</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ•°ç»„å=(å…ƒç´ 1 å…ƒç´ 2 å…ƒç´ 3 ...)</span></span><br><span class="line">names=(å°æ˜ å°çº¢ å¤§é»„ Tom)</span><br><span class="line">names2=(</span><br><span class="line">'å°æ˜'</span><br><span class="line">'å°çº¢'</span><br><span class="line">'å¤§é»„'</span><br><span class="line">'Tom'</span><br><span class="line">)</span><br><span class="line">names3[0]=å°æ˜</span><br><span class="line">names3[1]=å°çº¢</span><br><span class="line">names3[2]=å¤§é»„</span><br><span class="line">names3[3]=Tom</span><br></pre></td></tr></table></figure>
<h2 id="1ï¼‰è·å–æ•°ç»„å…ƒç´ ï¼š-æ•°ç»„-ä¸‹æ ‡"><a href="#1ï¼‰è·å–æ•°ç»„å…ƒç´ ï¼š-æ•°ç»„-ä¸‹æ ‡" class="headerlink" title="1ï¼‰è·å–æ•°ç»„å…ƒç´ ï¼š${æ•°ç»„[ä¸‹æ ‡]}"></a>1ï¼‰è·å–æ•°ç»„å…ƒç´ ï¼š${æ•°ç»„[ä¸‹æ ‡]}</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">echo $&#123;names[1]&#125;    # å°çº¢</span><br></pre></td></tr></table></figure>

<h2 id="2ï¼‰è·å–æ•°ç»„çš„é•¿åº¦"><a href="#2ï¼‰è·å–æ•°ç»„çš„é•¿åº¦" class="headerlink" title="2ï¼‰è·å–æ•°ç»„çš„é•¿åº¦"></a>2ï¼‰è·å–æ•°ç»„çš„é•¿åº¦</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">nums=(100 200 300 400)</span><br><span class="line"><span class="meta">#</span><span class="bash"> è·å–æ•°ç»„é•¿åº¦</span></span><br><span class="line">length=$&#123;#nums[@]&#125;</span><br><span class="line">length=$&#123;#nums[*]&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> è·å–æ•°ç»„æŒ‡å®šä¸‹æ ‡å¯¹åº”çš„å…ƒç´ çš„é•¿åº¦</span></span><br><span class="line">length2=$&#123;#num[n]&#125;</span><br></pre></td></tr></table></figure>



<h1 id="5-è¿ç®—ç¬¦"><a href="#5-è¿ç®—ç¬¦" class="headerlink" title="5.è¿ç®—ç¬¦"></a>5.è¿ç®—ç¬¦</h1><p>shellä¸­æ”¯æŒçš„è¿ç®—ç¬¦æœ‰:  ç®—æœ¯è¿ç®—ç¬¦ã€å…³ç³»è¿ç®—ç¬¦ã€å¸ƒå°”è¿ç®—ç¬¦ã€å­—ç¬¦ä¸²è¿ç®—ç¬¦</p>
<h2 id="1ï¼‰ç®—æœ¯è¿ç®—ç¬¦ï¼š-ï¼Œ-ï¼Œ-ï¼Œ-ï¼Œ"><a href="#1ï¼‰ç®—æœ¯è¿ç®—ç¬¦ï¼š-ï¼Œ-ï¼Œ-ï¼Œ-ï¼Œ" class="headerlink" title="1ï¼‰ç®—æœ¯è¿ç®—ç¬¦ï¼š+ï¼Œ-ï¼Œ*ï¼Œ/ï¼Œ%"></a>1ï¼‰ç®—æœ¯è¿ç®—ç¬¦ï¼š+ï¼Œ-ï¼Œ*ï¼Œ/ï¼Œ%</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å¦‚æœæƒ³è¦åœ¨shellå®Œæˆæ•°å€¼è¿ç®—ï¼Œè¿ç®—çš„è¯­æ³•:  `expr è¿ç®—è¡¨è¾¾å¼`; å¹¶ä¸”è¿ç®—ç¬¦ä¸¤è¾¹å¿…é¡»åŠ ç©ºæ ¼</span></span><br><span class="line">re1=10+20</span><br><span class="line">echo $&#123;re1&#125;    # 10+20</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1.åŠ æ³•è¿ç®—</span></span><br><span class="line">re2=`expr 10 + 20`    </span><br><span class="line">echo $&#123;re2&#125;    # 30</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.å‡æ³•è¿ç®—</span></span><br><span class="line">re3=`expr 10 - 20`</span><br><span class="line">echo $&#123;re3&#125;	   # -10</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3.ä¹˜æ³•è¿ç®—</span></span><br><span class="line">re4=`expr 10 \* 20`   # æ³¨æ„:ä½¿ç”¨*ä½œä¸ºä¹˜æ³•è¿ç®—ç¬¦çš„æ—¶å€™éœ€è¦å‰é¢åŠ \</span><br><span class="line">echo $&#123;re4&#125; 	# 200</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4.é™¤æ³•è¿ç®—</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å°æ•°é™¤æ³•è¿ç®—: `<span class="built_in">echo</span> <span class="string">"scale=å°æ•°ç‚¹ä½æ•°;æ•°å€¼1 / æ•°å€¼2"</span>|bc`</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ•´æ•°é™¤æ³•è¿ç®—: `expr æ•°å€¼1 / æ•°å€¼2`</span></span><br><span class="line">re5=`echo "scale=2;7 / 3"|bc`</span><br><span class="line">echo $re5</span><br><span class="line"></span><br><span class="line">re6=`expr 5 / 2`</span><br><span class="line">echo $re6</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5.æ±‚ä½™æ•°</span></span><br><span class="line">re7=`expr 10 % 3`</span><br><span class="line"></span><br><span class="line">re8=`echo "10.2 + 5.1"|bc`</span><br><span class="line">echo $re8</span><br></pre></td></tr></table></figure>

<h2 id="2ï¼‰-å…³ç³»è¿ç®—ç¬¦-æ¯”è¾ƒè¿ç®—ç¬¦-ï¼Œæ¯”è¾ƒçš„æ˜¯æ•°å­—å¤§å°"><a href="#2ï¼‰-å…³ç³»è¿ç®—ç¬¦-æ¯”è¾ƒè¿ç®—ç¬¦-ï¼Œæ¯”è¾ƒçš„æ˜¯æ•°å­—å¤§å°" class="headerlink" title="2ï¼‰ å…³ç³»è¿ç®—ç¬¦(æ¯”è¾ƒè¿ç®—ç¬¦)ï¼Œæ¯”è¾ƒçš„æ˜¯æ•°å­—å¤§å°"></a>2ï¼‰ å…³ç³»è¿ç®—ç¬¦(æ¯”è¾ƒè¿ç®—ç¬¦)ï¼Œæ¯”è¾ƒçš„æ˜¯æ•°å­—å¤§å°</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> -eq  ---  ç­‰äº,ç›¸å½“äº ==</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -ne  ---  ä¸ç­‰äº,ç›¸å½“äº!=</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -gt  ---  å¤§äº</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -lt  ---  å°äº</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -ge  ---  å¤§äºç­‰äº</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -le  ---  å°äºç­‰äº</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> ä½¿ç”¨è¯­æ³•: [ å€¼1 å…³ç³»è¿ç®—ç¬¦ å€¼2 ]</span></span><br><span class="line">a=100</span><br><span class="line">b=10</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> å…³ç³»è¿ç®—ç¬¦è¦é…åˆ<span class="keyword">if</span>è¯­å¥æˆ–è€…å¾ªç¯è¯­å¥ä½¿ç”¨</span></span><br><span class="line">if [ $a -gt $b ]</span><br><span class="line">then</span><br><span class="line">	echo aå¤§äºb</span><br><span class="line">else </span><br><span class="line">	echo aä¸å¤§äºb</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="3ï¼‰å¸ƒå°”è¿ç®—ç¬¦-é€»è¾‘è¿ç®—ç¬¦"><a href="#3ï¼‰å¸ƒå°”è¿ç®—ç¬¦-é€»è¾‘è¿ç®—ç¬¦" class="headerlink" title="3ï¼‰å¸ƒå°”è¿ç®—ç¬¦(é€»è¾‘è¿ç®—ç¬¦)"></a>3ï¼‰å¸ƒå°”è¿ç®—ç¬¦(é€»è¾‘è¿ç®—ç¬¦)</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> !    --  é€»è¾‘éè¿ç®—</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -o   --  é€»è¾‘æˆ–è¿ç®—</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> -a   --  é€»è¾‘ä¸è¿ç®—</span></span><br><span class="line"></span><br><span class="line">age=18</span><br><span class="line">score=95</span><br><span class="line"><span class="meta">#</span><span class="bash"> å‚åŠ æ¯”èµ›çš„æ¡ä»¶ï¼šåˆ†æ•°å¤§äº90åˆ†å¹¶ä¸”å¹´é¾„å¤§äºç­‰äº18å²</span></span><br><span class="line">if [ $age -ge 18 -a $score -gt 90 ]</span><br><span class="line">then</span><br><span class="line">	echo å¯ä»¥å‚è§æ¯”èµ›</span><br><span class="line">else</span><br><span class="line">	echo ä¸èƒ½å‚åŠ æ¯”èµ›</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h2 id="4ï¼‰å­—ç¬¦ä¸²è¿ç®—ç¬¦"><a href="#4ï¼‰å­—ç¬¦ä¸²è¿ç®—ç¬¦" class="headerlink" title="4ï¼‰å­—ç¬¦ä¸²è¿ç®—ç¬¦"></a>4ï¼‰å­—ç¬¦ä¸²è¿ç®—ç¬¦</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> [ å­—ç¬¦ä¸²1 = å­—ç¬¦ä¸²2 ]    -- åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> [ å­—ç¬¦ä¸²1 != å­—ç¬¦ä¸²2 ]   -- ä¸ç›¸ç­‰</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> [ -z å­—ç¬¦ä¸²]   -- åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸º0</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> [ -n <span class="string">"å­—ç¬¦ä¸²"</span> ]    -- åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦ä¸ä¸º0</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> [ $ å­—ç¬¦ä¸² ]   -- åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ˜¯ç©ºä¸²</span></span><br><span class="line"></span><br><span class="line">a="abc"</span><br><span class="line">b="123"</span><br><span class="line"></span><br><span class="line">if [ $a = $b ]</span><br><span class="line">then</span><br><span class="line">    echo aå’Œbç›¸ç­‰</span><br><span class="line">else</span><br><span class="line">    echo aå’Œbä¸ç›¸ç­‰</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">a=""</span><br><span class="line">if [ -n "$&#123;a&#125;" ]</span><br><span class="line">then</span><br><span class="line">    echo açš„é•¿åº¦ä¸ä¸º0</span><br><span class="line">else</span><br><span class="line">    echo açš„é•¿åº¦ä¸º0</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>



<h1 id="6-ifè¯­å¥"><a href="#6-ifè¯­å¥" class="headerlink" title="6. ifè¯­å¥"></a>6. ifè¯­å¥</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³•1ï¼š</span><br><span class="line">if æ¡ä»¶è¯­å¥</span><br><span class="line">then</span><br><span class="line">    æ»¡è¶³æ¡ä»¶æ‰§è¡Œçš„ä»£ç </span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">è¯­æ³•2:</span><br><span class="line">if æ¡ä»¶è¯­å¥</span><br><span class="line">then</span><br><span class="line">    æ»¡è¶³æ¡ä»¶æ‰§è¡Œçš„ä»£ç </span><br><span class="line">else</span><br><span class="line">    ä¸æ»¡è¶³æ¡ä»¶æ‰§è¡Œçš„ä»£ç </span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">è¯­æ³•3ï¼š</span><br><span class="line">if æ¡ä»¶è¯­å¥1</span><br><span class="line">then </span><br><span class="line">    ä»£ç å—1</span><br><span class="line">elif æ¡ä»¶è¯­å¥2</span><br><span class="line">then</span><br><span class="line">    ä»£ç å—2</span><br><span class="line">elif æ¡ä»¶è¯­å¥3</span><br><span class="line">then </span><br><span class="line">    ä»£ç å—3</span><br><span class="line">else</span><br><span class="line">    ä»£ç å—N</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>



<h1 id="7-forå¾ªç¯"><a href="#7-forå¾ªç¯" class="headerlink" title="7. forå¾ªç¯"></a>7. forå¾ªç¯</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³•:</span><br><span class="line">for å˜é‡ in åºåˆ—</span><br><span class="line">do</span><br><span class="line">    å¾ªç¯ä½“</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> éå†å­—ç¬¦ä¸²</span></span><br><span class="line">for char in "hello word"</span><br><span class="line">do</span><br><span class="line">    echo å¾ªç¯ä½“char: $&#123;char&#125;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> éå†æ•°ç»„</span></span><br><span class="line">arr1=(10 20 "abc")</span><br><span class="line">for x in $&#123;arr1[@]&#125;</span><br><span class="line">do</span><br><span class="line">    echo å¾ªç¯ä½“2x: $&#123;x&#125;</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> éå†å¤šä¸ªå€¼</span></span><br><span class="line">for x in 10 20 "ä½ å¥½" 123</span><br><span class="line">do</span><br><span class="line">    echo å¾ªç¯ä½“3ï¼š$&#123;x&#125;</span><br><span class="line">done</span><br></pre></td></tr></table></figure>



<h1 id="8-whileå¾ªç¯"><a href="#8-whileå¾ªç¯" class="headerlink" title="8. whileå¾ªç¯"></a>8. whileå¾ªç¯</h1><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">è¯­æ³•:</span><br><span class="line">while æ¡ä»¶è¯­å¥</span><br><span class="line">do</span><br><span class="line">    å¾ªç¯ä½“</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> éå†å­—ç¬¦ä¸²</span></span><br><span class="line">str1="helloWorld!"</span><br><span class="line">index=0</span><br><span class="line">len=$&#123;#str1&#125;</span><br><span class="line">while [ $index -lt $len ]</span><br><span class="line">do</span><br><span class="line">    echo $&#123;str1:$&#123;index&#125;:1&#125;</span><br><span class="line">    index=`expr $&#123;index&#125; + 1`</span><br><span class="line">done</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è®¡ç®—1+2+3+...+100</span></span><br><span class="line">num=1</span><br><span class="line">sum=0</span><br><span class="line">while [ $&#123;num&#125; -le 100 ]</span><br><span class="line">do</span><br><span class="line">    sum=`expr $&#123;sum&#125; + $&#123;num&#125;`</span><br><span class="line">    num=`expr $&#123;num&#125; + 1`</span><br><span class="line">done</span><br><span class="line">echo 1+2+3+...+100 = $&#123;sum&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ­»å¾ªç¯</span></span><br><span class="line">while true</span><br><span class="line">do</span><br><span class="line">    read -p "è¯·è¾“å…¥ä¸€ä¸ªæ•°å­—:" num</span><br><span class="line">    if [ $&#123;num&#125; == 100 ]</span><br><span class="line">    then</span><br><span class="line">        break</span><br><span class="line">    fi</span><br><span class="line">done</span><br></pre></td></tr></table></figure>



<h1 id="9-å‡½æ•°"><a href="#9-å‡½æ•°" class="headerlink" title="9.å‡½æ•°"></a>9.å‡½æ•°</h1><h2 id="1ï¼‰å‡½æ•°çš„å£°æ˜å’Œè°ƒç”¨"><a href="#1ï¼‰å‡½æ•°çš„å£°æ˜å’Œè°ƒç”¨" class="headerlink" title="1ï¼‰å‡½æ•°çš„å£°æ˜å’Œè°ƒç”¨"></a>1ï¼‰å‡½æ•°çš„å£°æ˜å’Œè°ƒç”¨</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1.å‡½æ•°çš„å£°æ˜</span></span><br><span class="line">å£°æ˜çš„è¯­æ³•ï¼š</span><br><span class="line">å‡½æ•°å()&#123;</span><br><span class="line">    å‡½æ•°ä½“</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è°ƒç”¨å‡½æ•°è¯­æ³•:  å‡½æ•°å</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">å£°æ˜å‡½æ•°</span></span><br><span class="line">func1()&#123;</span><br><span class="line">    echo ä½ å¥½å‡½æ•°1</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash">è°ƒç”¨å‡½æ•°</span></span><br><span class="line">func1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.æœ‰å‚æ•°çš„å‡½æ•°</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å£°æ˜çš„æ—¶å€™ä¸éœ€è¦å½¢å‚, ç›´æ¥åœ¨å‡½æ•°ä½“ä¸­é€šè¿‡<span class="string">'$&#123;N&#125;'</span>æ¥è·å–ç¬¬Nä¸ªå®å‚</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> è°ƒç”¨çš„æ—¶å€™:  å‡½æ•°å å®å‚1 å®å‚2 å®å‚3 ...</span></span><br><span class="line">func2()&#123;</span><br><span class="line">    echo å‡½æ•°2è¢«è°ƒç”¨</span><br><span class="line">    echo ç¬¬ä¸€ä¸ªå‚æ•°: $&#123;1&#125;</span><br><span class="line">    echo ç¬¬äºŒä¸ªå‚æ•°: $&#123;2&#125;</span><br><span class="line">    echo ç¬¬ä¸‰ä¸ªå‚æ•°: $&#123;3&#125; </span><br><span class="line">&#125;</span><br><span class="line">func2 10 20 "abc"</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3.å‡½æ•°çš„è¿”å›å€¼</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">return</span> æ•°å­—   - æ•°å­—çš„èŒƒå›´æ˜¯0~255</span></span><br><span class="line">func3()&#123;</span><br><span class="line">    echo å‡½æ•°3è¢«è°ƒç”¨</span><br><span class="line">    return 256</span><br><span class="line">    #a=`expr 100 + 200`</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func3</span><br><span class="line">echo $&#123;?&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Shell</category>
      </categories>
      <tags>
        <tag>shell</tag>
        <tag>è„šæœ¬</tag>
        <tag>åŸºç¡€</tag>
        <tag>ç¼–ç¨‹è¯­è¨€</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå¸¸ç”¨æŒ‡ä»¤</title>
    <url>/2019/12/22/Linux%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<p>Linuxå¸¸ç”¨æŒ‡ä»¤é›†</p>
<a id="more"></a>

<h1 id="1-cdæŒ‡ä»¤-è¿›å…¥æ–‡ä»¶å¤¹"><a href="#1-cdæŒ‡ä»¤-è¿›å…¥æ–‡ä»¶å¤¹" class="headerlink" title="1. cdæŒ‡ä»¤  -  è¿›å…¥æ–‡ä»¶å¤¹"></a>1. cdæŒ‡ä»¤  -  è¿›å…¥æ–‡ä»¶å¤¹</h1><p><strong>cd</strong>   â€”â€”&gt;æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆè·¯å¾„å¯ä»¥æ˜¯ç»å¯¹åœ°å€ä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹åœ°å€ï¼‰-è¿›å…¥åˆ°æŒ‡å®šè·¯å¾„å¯¹åº”çš„æ–‡ä»¶å¤¹<br><strong>cd  ..</strong>  â€”â€”&gt;è¿”å›ä¸Šå±‚ç›®å½•<br><strong>cd  /</strong>   â€”â€”&gt;è¿›å…¥ç³»ç»Ÿæ ¹ç›®å½•<br><strong>cd  ~</strong>  â€”â€”&gt;è¿›å…¥ç”µè„‘æ ¹ç›®å½•</p>
<h1 id="2-lsæŒ‡ä»¤-æ˜¾ç¤ºå½“å‰ç›®å½•ä¸­çš„å†…å®¹"><a href="#2-lsæŒ‡ä»¤-æ˜¾ç¤ºå½“å‰ç›®å½•ä¸­çš„å†…å®¹" class="headerlink" title="2. lsæŒ‡ä»¤  -  æ˜¾ç¤ºå½“å‰ç›®å½•ä¸­çš„å†…å®¹"></a>2. lsæŒ‡ä»¤  -  æ˜¾ç¤ºå½“å‰ç›®å½•ä¸­çš„å†…å®¹</h1><p><strong>ls</strong>   â€”â€”&gt;ç›´æ¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹çš„åå­—ï¼ˆéšè—æ–‡ä»¶å’Œæ–‡ä»¶å¤¹`        çœ‹ä¸åˆ°ï¼‰<br><strong>ls  -l</strong>   â€”â€”&gt;ç›´æ¥æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹çš„åå­—ï¼ˆéšè—æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çœ‹ä¸åˆ°ï¼‰<br><strong>ls  -lh</strong>   â€”â€”&gt;æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸­çš„å†…å®¹å’Œå†…å®¹çš„åŸºæœ¬ä¿¡æ¯ï¼ˆéšè—æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çœ‹ä¸åˆ°ï¼‰<br><strong>ls  -a</strong>   â€”â€”&gt;æ˜¾ç¤ºå½“å‰æ–‡ä»¶å¤¹ä¸­æ‰€æœ‰çš„å†…å®¹ï¼ˆåŒ…æ‹¬éšè—æ–‡ä»¶ï¼‰<br><strong>ls  -R</strong>   â€”â€”&gt;é€’å½’æ˜¾ç¤ºå½“å‰ç›®å½•ä»¥åŠå½“å‰ç›®å½•ä¸‹æ‰€æœ‰çš„å­ç›®å½•ä¸­çš„å†…å®¹<br><strong>ls  -r</strong>   â€”â€”&gt;å†…å®¹å€’åºæ˜¾ç¤º<br><strong>ls  -S/-t</strong>  â€”â€”&gt;æ˜¾ç¤ºæ–‡ä»¶å¤¹ä¸­çš„å†…å®¹ï¼Œå¹¶ä¸”å†…å®¹æŒ‰å¤§å°/æ—¶é—´ä»å¤§åˆ°å°æ’åº<br><strong>ls  -Sr</strong>   â€”â€”&gt;æŒ‰æ–‡ä»¶å¤§å°ä»å°åˆ°å¤§æ’åº<br><strong>ls  -Srlh</strong>   â€”â€”&gt;æŒ‰æ–‡ä»¶å¤§å°ä»å°åˆ°å¤§æ’åºï¼Œå¹¶ä¸”æ˜¾ç¤ºå†…å®¹çš„åŸºæœ¬ä¿¡æ¯</p>
<h1 id="3-pwdæŒ‡ä»¤"><a href="#3-pwdæŒ‡ä»¤" class="headerlink" title="3. pwdæŒ‡ä»¤"></a>3. pwdæŒ‡ä»¤</h1><p><strong>pwd</strong>   â€”â€”&gt;æŸ¥çœ‹å½“å‰ç›®å½•çš„ç»å¯¹è·¯å¾„</p>
<h1 id="4-æ–‡ä»¶æ“ä½œ"><a href="#4-æ–‡ä»¶æ“ä½œ" class="headerlink" title="4.æ–‡ä»¶æ“ä½œ"></a>4.æ–‡ä»¶æ“ä½œ</h1><h2 id="1-touchæŒ‡ä»¤-æ–°å»ºæ–‡ä»¶"><a href="#1-touchæŒ‡ä»¤-æ–°å»ºæ–‡ä»¶" class="headerlink" title="1)touchæŒ‡ä»¤  æ–°å»ºæ–‡ä»¶"></a>1)touchæŒ‡ä»¤  æ–°å»ºæ–‡ä»¶</h2><p><strong>touch æ–‡ä»¶è·¯å¾„æ–‡ä»¶å</strong>â€”â€”&gt;åœ¨æŒ‡å®šä½ç½®åˆ›å»ºæŒ‡å®šæ–‡ä»¶</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">touch <span class="keyword">a</span>.txt-åœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶<span class="keyword">a</span>.txt</span><br><span class="line">touch ../<span class="keyword">a</span>.txt   <span class="comment">------&gt;åœ¨å½“å‰ç›®å½•çš„ä¸Šå±‚ç›®å½•æ–°å»ºä¸€ä¸ªæ–‡ä»¶a.txt</span></span><br><span class="line">touch /home/<span class="keyword">a</span>/<span class="keyword">a</span>.txt   <span class="comment">------&gt;åœ¨æ ¹ç›®å½•ä¸‹homeç›®å½•ä¸­çš„aç›®å½•é‡Œé¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶a.txtl</span></span><br></pre></td></tr></table></figure>
<h2 id="2-catæŒ‡ä»¤-æŸ¥çœ‹æ–‡ä»¶å†…å®¹-è¯»æ–‡ä»¶"><a href="#2-catæŒ‡ä»¤-æŸ¥çœ‹æ–‡ä»¶å†…å®¹-è¯»æ–‡ä»¶" class="headerlink" title="2)catæŒ‡ä»¤  æŸ¥çœ‹æ–‡ä»¶å†…å®¹(è¯»æ–‡ä»¶)"></a>2)catæŒ‡ä»¤  æŸ¥çœ‹æ–‡ä»¶å†…å®¹(è¯»æ–‡ä»¶)</h2><p><strong>cat æ–‡ä»¶è·¯å¾„æ–‡ä»¶å</strong>   â€”â€”&gt;è¯»å–æŒ‡å®šè·¯å¾„å¯¹åº”çš„æ–‡ä»¶çš„å†…å®¹</p>
<h2 id="3-vimæŒ‡ä»¤"><a href="#3-vimæŒ‡ä»¤" class="headerlink" title="3)vimæŒ‡ä»¤"></a>3)vimæŒ‡ä»¤</h2><p><strong>vim æ–‡ä»¶è·¯å¾„æ–‡ä»¶å</strong>   â€”â€”&gt;ä½¿ç”¨vimæ‰“å¼€æ–‡ä»¶</p>
<h1 id="5-æ–‡ä»¶æ“ä½œ"><a href="#5-æ–‡ä»¶æ“ä½œ" class="headerlink" title="5.æ–‡ä»¶æ“ä½œ"></a>5.æ–‡ä»¶æ“ä½œ</h1><p><strong>mkdir  æ–°æ–‡ä»¶å¤¹è·¯å¾„æ–‡ä»¶å¤¹å</strong>   â€”â€”&gt;åœ¨æŒ‡å®šä½ç½®åˆ›å»ºæ–‡ä»¶å¤¹,è‹¥æ²¡æœ‰ä¼šæŠ¥é”™<br><strong>mkdir  -p  æ–°æ–‡ä»¶å¤¹è·¯å¾„æ–‡ä»¶å¤¹å</strong>   â€”â€”&gt;åœ¨æŒ‡å®šè·¯å¾„åˆ›å»ºæŒ‡å®šæ–‡ä»¶å¤¹,è‹¥æ²¡æœ‰å°±åˆ›å»º<br><strong>mkdir -p  a/{b,c,â€¦}/{d,e,f,g,â€¦}</strong>   â€”â€”&gt;åœ¨å½“å‰ä½ç½®åˆ›å»ºa,åœ¨aå†…åˆ›å»ºå¤šä¸ªæ–‡ä»¶å¤¹,åœ¨å¤šä¸ªæ–‡ä»¶å¤¹å†…å†åˆ›å»ºå¤šä¸ªç›¸åŒçš„æ–‡ä»¶å¤¹</p>
<h1 id="6-åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹"><a href="#6-åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹" class="headerlink" title="6.åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹"></a>6.åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</h1><h2 id="1-rmæŒ‡ä»¤-åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹"><a href="#1-rmæŒ‡ä»¤-åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹" class="headerlink" title="1)rmæŒ‡ä»¤  åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹"></a>1)rmæŒ‡ä»¤  åˆ é™¤æ–‡ä»¶å’Œæ–‡ä»¶å¤¹</h2><p><strong>rm æ–‡ä»¶è·¯å¾„æ–‡ä»¶å</strong>   â€”â€”&gt;åˆ é™¤æŒ‡å®šæ–‡ä»¶ï¼ˆåˆ é™¤çš„æ—¶å€™ä¼šå¾ªç¯æ˜¯å¦ç¡®å®šåˆ é™¤ï¼Œy-åŒæ„ï¼Œn-ä¸åŒæ„ï¼‰<br><strong>rm  -f  æ–‡ä»¶è·¯å¾„æ–‡ä»¶å</strong>   â€”â€”&gt;åˆ é™¤æŒ‡å®šæ–‡ä»¶ï¼ˆåˆ é™¤çš„æ—¶å€™ä¸è¯¢é—®ï¼‰<br><strong>rm  -r  æ–‡ä»¶å¤¹è·¯å¾„æ–‡ä»¶å¤¹å</strong>   â€”â€”&gt;åˆ é™¤æŒ‡å®šæ–‡ä»¶å¤¹</p>
<h2 id="2-rmdiræŒ‡ä»¤-åˆ é™¤ç©ºæ–‡ä»¶å¤¹"><a href="#2-rmdiræŒ‡ä»¤-åˆ é™¤ç©ºæ–‡ä»¶å¤¹" class="headerlink" title="2)rmdiræŒ‡ä»¤  åˆ é™¤ç©ºæ–‡ä»¶å¤¹"></a>2)rmdiræŒ‡ä»¤  åˆ é™¤ç©ºæ–‡ä»¶å¤¹</h2><p><strong>rmdir æ–‡ä»¶å¤¹è·¯å¾„</strong>â€”â€”&gt;åˆ é™¤ç©ºæ–‡ä»¶å¤¹</p>
<h1 id="7æ‹·è´å’Œç§»åŠ¨"><a href="#7æ‹·è´å’Œç§»åŠ¨" class="headerlink" title="7æ‹·è´å’Œç§»åŠ¨"></a>7æ‹·è´å’Œç§»åŠ¨</h1><h2 id="1-æ‹·è´"><a href="#1-æ‹·è´" class="headerlink" title="1)æ‹·è´"></a>1)æ‹·è´</h2><p><strong>cp æ–‡ä»¶è·¯å¾„1 æ–‡ä»¶è·¯å¾„2</strong>â€”â€”&gt;å°†æ–‡ä»¶1ä¸­çš„å†…å®¹å¤åˆ¶ç²˜è´´åˆ°æ–‡ä»¶2ï¼ˆå¦‚æœæ–‡ä»¶2ä¸å­˜ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºï¼›å¦‚æœå­˜åœ¨ä¼šè¯¢é—®æ˜¯å¦è¦†ç›–ï¼‰<br><strong>cp æ–‡ä»¶è·¯å¾„ æ–‡ä»¶å¤¹è·¯å¾„</strong>â€”â€”&gt;å°†æŒ‡å®šæ–‡ä»¶å¤åˆ¶ç²˜è´´åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ä¸­<br><strong>cp -r æ–‡ä»¶å¤¹è·¯å¾„1 æ–‡ä»¶å¤¹è·¯å¾„2</strong>â€”â€”&gt;å°†æ–‡ä»¶å¤¹1å¤åˆ¶ç²˜è´´åˆ°æ–‡ä»¶å¤¹2ä¸­</p>
<h2 id="2-ç§»åŠ¨"><a href="#2-ç§»åŠ¨" class="headerlink" title="2)ç§»åŠ¨"></a>2)ç§»åŠ¨</h2><p><strong>mv æ–‡ä»¶è·¯å¾„1 æ–‡ä»¶è·¯å¾„2</strong>   â€”â€”&gt;å°†æ–‡ä»¶1ç§»åŠ¨åˆ°æ–‡ä»¶2æ‰€åœ¨çš„ä½ç½®<br><strong>mv æ–‡ä»¶å1 æ–‡ä»¶å2 **  â€”â€”&gt;å°†æ–‡ä»¶1é‡å‘½åä¸ºæ–‡ä»¶2(è‹¥ä¸¤ä¸ªæ–‡ä»¶åŒæ—¶å­˜åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸­,åˆ™é‡å‘½ååæ–‡ä»¶2ä¼šè¢«åˆ é™¤,æ–‡ä»¶1ä¼šè¢«é‡å‘½å)<br>**mv æ–‡ä»¶è·¯å¾„ æ–‡ä»¶å¤¹è·¯å¾„</strong>   â€”â€”&gt;å°†æ–‡ä»¶ç›´æ¥ç§»åŠ¨åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ä¸­<br>*<em>mv æ–‡ä»¶å¤¹è·¯å¾„1 æ–‡ä»¶å¤¹è·¯å¾„2 *</em>  â€”â€”&gt;å°†æ–‡ä»¶å¤¹1ç§»åŠ¨åˆ°æ–‡ä»¶å¤¹2ä¸­</p>
<h1 id="8è·å–æŒ‡ä»¤çš„å†å²è®°å½•"><a href="#8è·å–æŒ‡ä»¤çš„å†å²è®°å½•" class="headerlink" title="8è·å–æŒ‡ä»¤çš„å†å²è®°å½•"></a>8è·å–æŒ‡ä»¤çš„å†å²è®°å½•</h1><p><strong>history</strong>   â€”â€”&gt;æ˜¾ç¤ºå½“å‰ç³»ç»Ÿå·²ç»æ‰§è¡Œè¿‡çš„æ‰€æœ‰æŒ‡ä»¤</p>
<blockquote>
<p>å¦‚æœæƒ³è¦æ˜¾ç¤ºå†å²è®°å½•çš„æ—¶å€™æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œçš„æ—¶é—´éœ€è¦ä¿®æ”¹~/.bashrcæ–‡ä»¶ï¼š<br>export HISTTIMEFORMAT=â€[%y-%m-%d_%T%M%S]â€<br>ä¿®æ”¹å®Œæˆåéœ€è¦é€šè¿‡æŒ‡ä»¤ï¼šsource ~/.bashrcå»æ‰§è¡Œè¿™ä¸ªé…ç½®æ–‡ä»¶ï¼Œæœ€åå†å²è®°å½•çš„æ—¶é—´æ‰ä¼šç”Ÿæ•ˆ</p>
</blockquote>
<h1 id="9åˆ›å»ºé“¾æ¥"><a href="#9åˆ›å»ºé“¾æ¥" class="headerlink" title="9åˆ›å»ºé“¾æ¥"></a>9åˆ›å»ºé“¾æ¥</h1><h2 id="1-åˆ›å»ºè½¯é“¾æ¥"><a href="#1-åˆ›å»ºè½¯é“¾æ¥" class="headerlink" title="1)åˆ›å»ºè½¯é“¾æ¥"></a>1)åˆ›å»ºè½¯é“¾æ¥</h2><p><strong>ln -s æºæ–‡ä»¶è·¯å¾„  å…¥å£æ–‡ä»¶ä½ç½®</strong>    â€”â€”&gt; ç»™æºæ–‡ä»¶åœ¨æŒ‡å®šä½ç½®åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥(è½¯è¿æ¥æœ¬è´¨å°±æ˜¯ç”¨æ¥ä¿å­˜æºæ–‡ä»¶ç»å¯¹åœ°å€çš„ä¸€ä¸ªæ–‡ä»¶)</p>
<blockquote>
<p>æ³¨:æºæ–‡ä»¶è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„,å¦‚æœåˆ é™¤æˆ–è€…ç§»åŠ¨æºæ–‡ä»¶ï¼Œè½¯è¿æ¥ä¼šç›´æ¥æ— æ•ˆ</p>
</blockquote>
<h2 id="2-åˆ›å»ºç¡¬é“¾æ¥"><a href="#2-åˆ›å»ºç¡¬é“¾æ¥" class="headerlink" title="2)åˆ›å»ºç¡¬é“¾æ¥"></a>2)åˆ›å»ºç¡¬é“¾æ¥</h2><p><strong>ln æºæ–‡ä»¶è·¯å¾„  ç¡¬è¿æ¥æ–‡ä»¶åœ°å€</strong>   â€”â€“&gt;ç»™æºæ–‡ä»¶åœ¨æŒ‡å®šä½ç½®åˆ›å»ºä¸€ä¸ªç¡¬é“¾æ¥ç¡¬é“¾æ¥çš„æœ¬è´¨å°±æ˜¯æºæ–‡ä»¶å†…å®¹çš„å¦å¤–ä¸€ä¸ªå¼•ç”¨(ç›¸å½“äºæ–‡ä»¶çš„å¦ä¸€ä¸ªæ–‡ä»¶å)ï¼Œæ‰€ä»¥åˆ é™¤æˆ–è€…ç§»åŠ¨æºæ–‡ä»¶ç¡¬é“¾æ¥ä»ç„¶æœ‰æ•ˆï¼Œåªæ˜¯åˆ é™¤ç¡¬é“¾æ¥ä¼šå˜æˆæ™®é€šæ–‡ä»¶</p>
<h1 id="10è¿›ç¨‹ç›¸å…³æŒ‡ä»¤"><a href="#10è¿›ç¨‹ç›¸å…³æŒ‡ä»¤" class="headerlink" title="10è¿›ç¨‹ç›¸å…³æŒ‡ä»¤"></a>10è¿›ç¨‹ç›¸å…³æŒ‡ä»¤</h1><h2 id="1-psæŒ‡ä»¤"><a href="#1-psæŒ‡ä»¤" class="headerlink" title="1)psæŒ‡ä»¤"></a>1)psæŒ‡ä»¤</h2><p><strong>ps</strong>   â€”â€”&gt;æŸ¥çœ‹å½“å‰è¿›ç¨‹çŠ¶æ€<br><strong>ps -aux</strong>   â€”â€”&gt;æŸ¥çœ‹å½“å‰è¿›ç¨‹æ‰€æœ‰çŠ¶æ€<br><strong>ps grep  è¿›ç¨‹å/id</strong>   â€”â€”&gt;æ ¹æ®è¿›ç¨‹å/è¿›ç¨‹IDæŸ¥çœ‹æŒ‡å®šè¿›ç¨‹</p>
<h2 id="2-topæŒ‡ä»¤"><a href="#2-topæŒ‡ä»¤" class="headerlink" title="2)topæŒ‡ä»¤"></a>2)topæŒ‡ä»¤</h2><p><strong>top</strong>  â€”â€”&gt;å®æ—¶æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„è¿›ç¨‹ä¿¡æ¯å’Œç³»ç»Ÿä¿¡æ¯<br><strong>top -p PID1,PID2,â€¦</strong>   â€”â€”&gt;å®æ—¶ç›‘æµ‹æŒ‡å®šçš„è¿›ç¨‹</p>
<h2 id="3-freeæŒ‡ä»¤"><a href="#3-freeæŒ‡ä»¤" class="headerlink" title="3)freeæŒ‡ä»¤"></a>3)freeæŒ‡ä»¤</h2><p><strong>free</strong>   â€”â€”&gt;æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„å†…å­˜ä¿¡æ¯ï¼Œæ˜¾ç¤ºçš„æ—¶å€™ä»¥kbä¸ºå•ä½<br><strong>free  -å•ä½</strong>   â€”â€”&gt;æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„å†…å­˜ä¿¡æ¯ï¼Œä»¥æŒ‡å®šå•ä½æ¥æ˜¾ç¤º</p>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="built_in">free</span> -m    - æ˜¾ç¤ºå½“å‰ç³»ç»Ÿçš„å†…å­˜ä¿¡æ¯ï¼Œä»¥Mbä¸ºå•ä½</span><br></pre></td></tr></table></figure>

<h2 id="4-killæŒ‡ä»¤"><a href="#4-killæŒ‡ä»¤" class="headerlink" title="4)killæŒ‡ä»¤"></a>4)killæŒ‡ä»¤</h2><p><strong>kill è¿›ç¨‹ID</strong>   â€”â€”&gt;æ€æ‰æŒ‡å®šIDå¯¹åº”çš„è¿›ç¨‹<br>kill -1/-9/-15è¿›ç¨‹ID   â€”â€”&gt;ä»¥æŒ‡å®šçš„æ–¹å¼æ€æ‰è¿›ç¨‹(-1è¡¨ç¤ºä¸é—´æ–­é‡å¯ï¼›-9è¡¨ç¤ºå¼ºåˆ¶æ€æ­»è¿›ç¨‹ï¼›-15è¡¨ç¤ºæ­£å¸¸ç»“æŸè¿›ç¨‹)<br><strong>pkill  è¿›ç¨‹å</strong>   â€”â€”&gt;æ€æ­»æŒ‡å®šè¿›ç¨‹åå¯¹åº”çš„è¿›ç¨‹ï¼ˆä¸­é—´å¯ä»¥åŠ -1/-9/-15ï¼‰<br><strong>killall  è¿›ç¨‹å</strong>   â€”â€”&gt;æ€æ­»å’Œè¿›ç¨‹åç›¸å…³çš„æ‰€æœ‰è¿›ç¨‹</p>
<h2 id="5-uptimeæŒ‡ä»¤"><a href="#5-uptimeæŒ‡ä»¤" class="headerlink" title="5)uptimeæŒ‡ä»¤"></a>5)uptimeæŒ‡ä»¤</h2><p><strong>uptime</strong>   â€”â€”&gt;æŸ¥çœ‹ç³»ç»Ÿçš„åŸºæœ¬ä¿¡æ¯(å¯åŠ¨æ—¶é—´ç­‰)</p>
<h1 id="11ç”¨æˆ·ç®¡ç†"><a href="#11ç”¨æˆ·ç®¡ç†" class="headerlink" title="11ç”¨æˆ·ç®¡ç†"></a>11ç”¨æˆ·ç®¡ç†</h1><p>ä¸€ä¸ªLinuxæ“ä½œç³»ç»Ÿå¯ä»¥æœ‰å¤šä¸ªç”¨æˆ·ï¼ˆuserï¼‰ï¼Œä¹Ÿå¯ä»¥æœ‰å¤šä¸ªç”¨æˆ·ç»„ï¼ˆgroupï¼‰ï¼›<br><strong>users</strong>   â€”â€”&gt;æŸ¥çœ‹å½“å‰ç”¨æˆ·<br><strong>groups</strong>   â€”â€”&gt;æŸ¥çœ‹å½“å‰åˆ†ç»„<br><strong>groupadd  åˆ†ç»„å</strong>   â€”â€”&gt;åˆ›å»ºåˆ†ç»„(ç®¡ç†å‘˜æ‰èƒ½åˆ›å»º;å¯ä»¥é€šè¿‡æŸ¥çœ‹/etc/groupæ–‡ä»¶æ¥æŸ¥çœ‹å½“å‰ç³»ç»Ÿæ‰€æœ‰çš„åˆ†ç»„)<br><strong>useradd  ç”¨æˆ·å</strong>    â€”â€”&gt;åˆ›å»ºæŒ‡å®šç”¨æˆ·(1.ç”¨æˆ·åˆ›å»ºæˆåŠŸåç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨/homeç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå’Œç”¨æˆ·ååŒåçš„æ–‡ä»¶å¤¹;2.ä¼šè‡ªåŠ¨åˆ›å»ºå’Œç”¨æˆ·ååŒåçš„åˆ†ç»„,å¹¶ä¸”å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªåˆ†ç»„ä¸­)<br><strong>useradd  -G  åˆ†ç»„1,åˆ†ç»„2â€¦   ç”¨æˆ·å</strong>  â€”â€”&gt;åˆ›å»ºæŒ‡å®šç”¨æˆ·,å¹¶ä¸”å°†ç”¨æˆ·æ·»åŠ åˆ°æŒ‡å®šåˆ†ç»„<br><strong>usermod  -G  åˆ†ç»„1,åˆ†ç»„2   ç”¨æˆ·å</strong>â€”â€”&gt;ä¿®æ”¹ç”¨æˆ·åˆ†ç»„<br><strong>password  ç”¨æˆ·å</strong>   â€”â€”&gt;ä¿®æ”¹ç”¨æˆ·å¯†ç (éœ€è¦rootæƒé™)<br><strong>su  ç”¨æˆ·å</strong>   â€”â€”&gt;åˆ‡æ¢è´¦å·(rootç™»å½•çš„æ—¶å€™åˆ‡æ¢ä¸éœ€è¦å¯†ç )<br><strong>exit</strong>   â€”â€”&gt;é€€å‡ºå½“å‰è´¦å·</p>
<p>sudo  -åœ¨å‘½ä»¤å‰sudoæ˜¯ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡ŒæŒ‡ä»¤<br>æ³¨æ„ï¼šä¸æ˜¯æ‰€æœ‰çš„ç”¨æˆ·éƒ½å¯ä»¥é€šè¿‡sudoæ¥ä»¥ç®¡ç†å‘˜èº«ä»½æ‰§è¡ŒæŒ‡ä»¤ï¼Œå¦‚æœæƒ³è¦èƒ½å¤Ÿä½¿ç”¨sudoå¿…é¡»æ·»åŠ é…ç½®<br>  â‘ .  ubuntuï¼šå°†éœ€è¦æœ‰ç®¡ç†å‘˜èº«ä»½çš„è´¦å·æ·»åŠ åˆ°sudoåˆ†ç»„ä¸­<br>  â‘¡.  redhatå’Œcontosï¼šåœ¨/etc/sudoersé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä»£ç ï¼š</p>
<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Allow root to run any commands anywhere</span></span><br><span class="line"><span class="attribute">root</span> <span class="literal">ALL</span>=ï¼ˆ<span class="literal">ALL</span>ï¼‰<span class="literal">ALL</span>#ï¼ˆé»˜è®¤æœ‰çš„ï¼‰</span><br><span class="line"><span class="attribute">xiaoming</span> <span class="literal">ALL</span>=ï¼ˆ<span class="literal">ALL</span>ï¼‰<span class="literal">ALL</span>#ï¼ˆè‡ªå·±æ·»åŠ çš„ï¼Œxiaomingæ˜¯ç”¨æˆ·åï¼‰</span><br></pre></td></tr></table></figure>

<h1 id="12æ–‡ä»¶æƒé™"><a href="#12æ–‡ä»¶æƒé™" class="headerlink" title="12æ–‡ä»¶æƒé™"></a>12æ–‡ä»¶æƒé™</h1><p>é»˜è®¤æƒ…å†µä¸‹æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„æƒé™:æ–‡ä»¶æ‰€æœ‰è€…æœ‰è¯»å†™æƒé™,åŒç»„ç”¨æˆ·å’Œå…¶ä»–ç”¨æˆ·éƒ½æ˜¯åªè¯»æƒé™.</p>
<table>
<thead>
<tr>
<th>æ–‡ä»¶ç±»å‹</th>
<th>æ‰€æœ‰è€…æƒé™</th>
<th>åŒç»„ç”¨æˆ·æƒé™</th>
<th>å…¶ä»–ç”¨æˆ·æƒé™</th>
</tr>
</thead>
<tbody><tr>
<td>dï¼ˆç›®å½•ï¼‰</td>
<td>rwx</td>
<td>râ€“</td>
<td>â€”</td>
</tr>
<tr>
<td>-ï¼ˆæ–‡ä»¶ï¼‰</td>
<td>rwx</td>
<td>râ€“</td>
<td>â€”</td>
</tr>
<tr>
<td>lï¼ˆè¿æ¥ï¼‰</td>
<td>rwx</td>
<td>râ€“</td>
<td>â€”</td>
</tr>
</tbody></table>
<p><strong>chmod  æƒé™å€¼  æ–‡ä»¶è·¯å¾„</strong>   â€”â€”&gt;å°†æŒ‡å®šæ–‡ä»¶çš„æƒé™ä¿®æ”¹æˆæŒ‡å®šå€¼<br><strong>chmod  [a,u,g,o]/[+-]/[r,w,x] æ–‡ä»¶åœ°å€</strong>   â€”â€”&gt;ç»™æŒ‡å®šæ–‡ä»¶å¯¹åº”æŒ‡å®šç”¨æˆ·æ·»åŠ æˆ–è€…åˆ é™¤æŒ‡å®šæƒé™(a-æ‰€æœ‰ç”¨æˆ·,u-æ–‡ä»¶æ‰€æœ‰è€…,g-åŒç»„ç”¨æˆ·,o-å…¶ä»–ç”¨æˆ·;+è¡¨ç¤ºæ·»åŠ æƒé™,è¡¨ç¤ºåˆ é™¤æƒé™;r-è¡¨ç¤ºè¯»æƒé™,wè¡¨ç¤ºå†™æƒé™,xè¡¨ç¤ºæ‰§è¡Œæƒé™)</p>
<figure class="highlight perl"><table><tr><td class="code"><pre><span class="line"><span class="keyword">chmod</span> a-<span class="keyword">x</span> æ–‡ä»¶åœ°å€  <span class="comment">#åˆ é™¤æ‰€æœ‰ç”¨æˆ·çš„æ‰§è¡Œæƒé™</span></span><br><span class="line"><span class="keyword">chmod</span> u+w æ–‡ä»¶åœ°å€  <span class="comment">#ç»™æ–‡ä»¶æ‰€æœ‰è€…æ·»åŠ å†™çš„æƒé™</span></span><br></pre></td></tr></table></figure>

<h1 id="13æ—¥å¿—ç®¡ç†"><a href="#13æ—¥å¿—ç®¡ç†" class="headerlink" title="13æ—¥å¿—ç®¡ç†"></a>13æ—¥å¿—ç®¡ç†</h1><h2 id="1-æŸ¥çœ‹æ–‡ä»¶"><a href="#1-æŸ¥çœ‹æ–‡ä»¶" class="headerlink" title="1)æŸ¥çœ‹æ–‡ä»¶"></a>1)æŸ¥çœ‹æ–‡ä»¶</h2><p><strong>cat æ–‡ä»¶</strong>   â€”â€”&gt;ç›´æ¥æŸ¥çœ‹æ–‡ä»¶æ‰€æœ‰å†…å®¹(æŸ¥çœ‹æ–‡ä»¶å†…å®¹çš„æ—¶å€™å¯ä»¥åŠ å‚æ•°-nï¼Œè®©å†…å®¹åœ¨æ˜¾ç¤ºçš„æ—¶å€™æ˜¾ç¤ºè¡Œå·)</p>
<p><strong>head  -N æ–‡ä»¶åœ°å€æ–‡ä»¶å</strong>   â€”â€”&gt;æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶å‰Nè¡Œå†…å®¹<br><strong>tail -N æ–‡ä»¶åœ°å€æ–‡ä»¶å</strong>   â€”â€”&gt;æ˜¾ç¤ºæŒ‡å®šæ–‡ä»¶åNè¡Œå†…å®¹</p>
<p><strong>less  æ–‡ä»¶</strong>   â€”â€”&gt;æŒ‰é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹(é€šè¿‡å¿«æ·é”®æ§åˆ¶å†…å®¹æ˜¾ç¤ºè¿‡ç¨‹;æ–‡ä»¶å†…å®¹ä¸ä¼šæ‰“å°åˆ°shel/ç»ˆç«¯é‡Œ)<br><strong>less -N æ–‡ä»¶</strong>   â€”â€”&gt;æŒ‰é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹,æ¯æ¬¡ç¿»é¡µçš„æ—¶å€™ç¿»Nè¡Œ<br><strong>more æ–‡ä»¶</strong>   â€”â€”&gt;æŒ‰é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹(é€šè¿‡å¿«æ·é”®æ§åˆ¶å†…å®¹æ˜¾ç¤ºè¿‡ç¨‹;æ–‡ä»¶å†…å®¹ä¼šæ‰“å°åˆ°shell/ç»ˆç«¯é‡Œ)<br><strong>more -N æ–‡ä»¶</strong>   â€”â€”&gt;æŒ‰é¡µæ˜¾ç¤ºæ–‡ä»¶å†…å®¹,æ¯æ¬¡ç¿»é¡µçš„æ—¶å€™ç¿»Nè¡Œ</p>
<figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">å¿«æ·é”®:</span><br><span class="line">æŒ‰<span class="keyword">jå‘ä¸‹ä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">æŒ‰kå‘ä¸Šä¸€è¡Œ</span></span><br><span class="line"><span class="keyword">æŒ‰få‘ä¸‹ç¿»ä¸€é¡µ</span></span><br><span class="line"><span class="keyword">æŒ‰bå‘ä¸Šç¿»ä¸€é¡µ</span></span><br><span class="line"><span class="keyword">æŒ‰gåˆ°å…¨æ–‡å¼€å¤´</span></span><br><span class="line"><span class="keyword">æŒ‰Gåˆ°å…¨æ–‡ç»“å°¾</span></span><br><span class="line"><span class="keyword">æŒ‰Qé€€å‡º</span></span><br></pre></td></tr></table></figure>

<h2 id="2-æ–‡ä»¶å¤„ç†"><a href="#2-æ–‡ä»¶å¤„ç†" class="headerlink" title="2)æ–‡ä»¶å¤„ç†"></a>2)æ–‡ä»¶å¤„ç†</h2><p>å‡¡æ˜¯æœ‰çš„æ‰“å°ç»“æœçš„æŒ‡ä»¤,æˆ‘ä»¬éƒ½å¯ä»¥é€šè¿‡ç›¸å…³æŒ‡ä»¤å¯¹åº”ç»“æœè¿›è¡Œå¤„ç†<br>å¦‚æœéœ€è¦å¯¹æŸä¸€ä¸ªæŒ‡ä»¤çš„ç»“æœä½¿ç”¨å¦å¤–çš„æŒ‡ä»¤è¿›è¡ŒäºŒæ¬¡å¤„ç†çš„æ—¶å€™ï¼Œå°±éœ€è¦ç”¨åˆ°<strong>ç®¡é“ |</strong></p>
<p><strong>sort-æ’åº</strong><br>sort   â€”â€”&gt;ä»å°åˆ°å¤§æ’åº(å°†ä¸€è¡Œå†…å®¹ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²,æŒ‰å­—ç¬¦ä¸²å¤§å°å¯¹åº”å†…å®¹è¿›è¡Œæ’åº,é»˜è®¤ä¸åŒºåˆ†å¤§å°å†™)</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">cat <span class="keyword">a</span>.txt | <span class="built_in">sort</span>   <span class="comment">------&gt;å¯¹a.txtçš„æ–‡ä»¶å†…å®¹ä»å°åˆ°å¤§æ’åºæ˜¾ç¤º</span></span><br><span class="line"></span><br><span class="line">å‚æ•°:</span><br><span class="line">-r  <span class="comment">------&gt; é€†åº</span></span><br><span class="line">-nk <span class="number">1</span>  <span class="comment">------&gt;æ•°å€¼å¤§å°æ’åº</span></span><br><span class="line">-nk <span class="number">2</span>  <span class="comment">------&gt;å­—ç¬¦å¤§å°æ’åº(é»˜è®¤)</span></span><br><span class="line">cat <span class="keyword">a</span>.txt|<span class="built_in">sort</span> -nk <span class="number">1</span>  <span class="comment">------&gt;å¯¹a.txtçš„æ–‡ä»¶å†…å®¹æŒ‰æ•°å­—å¤§å°ä»å°åˆ°å¤§æ’åº</span></span><br><span class="line">cat <span class="keyword">a</span>.txt|<span class="built_in">sort</span> -rnk <span class="number">1</span>  <span class="comment">------&gt;å¯¹a.txtçš„æ–‡ä»¶å†…å®¹æŒ‰æ•°å­—å¤§å°ä»å¤§åˆ°å°æ’åº</span></span><br><span class="line">cat <span class="keyword">a</span>.txt|<span class="built_in">sort</span> -nk <span class="number">2</span>  <span class="comment">------&gt;å¯¹a.txtçš„æ–‡ä»¶å†…å®¹æŒ‰å­—ç¬¦å¤§å°ä»å°åˆ°å¤§æ’åº(é»˜)</span></span><br><span class="line">cat <span class="keyword">a</span>.txt|<span class="built_in">sort</span> -rnk <span class="number">2</span>  <span class="comment">------&gt;å¯¹a.txtçš„æ–‡ä»¶å†…å®¹æŒ‰å­—ç¬¦å¤§å°ä»å¤§åˆ°å°æ’åº</span></span><br></pre></td></tr></table></figure>

<p><strong>uniq-å»é‡</strong><br>uniq   â€”â€”&gt;åªèƒ½å°†ç´§æŒ¨ç€çš„ç›¸åŒè¡Œå»æ‰é‡å¤çš„(å¦‚æœéœ€è¦å»æ‰æ‰€æœ‰é‡å¤çš„è¡Œ,å…ˆæ’åºå°†ç›¸åŒçš„è¡Œæ”¾åˆ°ä¸€èµ·)</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">cat <span class="keyword">a</span>.txt | unkq   <span class="comment">------&gt;å»æ‰a.txtæ–‡ä»¶å†…å®¹ä¸­ç›¸é‚»é‡å¤çš„è¡Œ</span></span><br><span class="line">cat <span class="keyword">a</span>.txt | sortluniq   <span class="comment">------&gt;å»æ‰a.txtæ–‡ä»¶å†…å®¹ä¸­æ‰€æœ‰é‡å¤çš„è¡Œ</span></span><br><span class="line">-c   <span class="comment">------&gt;é‡å¤æ¬ æ•°</span></span><br></pre></td></tr></table></figure>

<p><strong>awk-è·å–åˆ—</strong><br>awk â€˜{print $N}â€™   â€”â€”&gt;è·å–å†…å®¹ä¸­ç¬¬Nåˆ—çš„æ•°æ®</p>
<figure class="highlight lsl"><table><tr><td class="code"><pre><span class="line">historylawk '&#123;print $<span class="number">2</span>&#125;'------&gt;è·å–å†å²è®°å½•ç¬¬<span class="number">2</span>åˆ—çš„å†…å®¹</span><br><span class="line">historylawk'&#123;print $<span class="number">2</span>,$<span class="number">3</span>&#125;'------&gt;è·å–å†å²è®°å½•ç¬¬<span class="number">2</span>åˆ—å’Œç¬¬<span class="number">3</span>åˆ—çš„å†…å®¹</span><br></pre></td></tr></table></figure>

<blockquote>
<p>ç»ƒä¹ :<br>history | awk â€˜{print $4}â€™|sort|uniq -c|sort -rnk 1|head -5<br>æ˜¾ç¤ºæœ€å¸¸ç”¨çš„æŒ‡ä»¤å’Œä½¿ç”¨æ¬¡æ•°</p>
</blockquote>
<h2 id="3-è¾“å‡ºé‡å®šå‘"><a href="#3-è¾“å‡ºé‡å®šå‘" class="headerlink" title="3)è¾“å‡ºé‡å®šå‘"></a>3)è¾“å‡ºé‡å®šå‘</h2><p><strong>æ‰§è¡Œæœ‰æ‰“å°ç»“æœçš„æŒ‡ä»¤  &gt;  æ–‡ä»¶åœ°å€</strong>   â€”â€”&gt;å°†æŒ‡å®šæŒ‡ä»¤æ‰§è¡Œçš„ç»“æœä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ä¸­(å…ˆæ¸…é™¤åŸæ–‡ä»¶å†…å®¹å†æ·»åŠ )<br><strong>æ‰§è¡Œæœ‰æ‰“å°ç»“æœçš„æŒ‡ä»¤  &gt;&gt;  æ–‡ä»¶åœ°å€</strong>   â€”â€”&gt;å°†æŒ‡å®šæŒ‡ä»¤æ‰§è¡Œçš„ç»“æœä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ä¸­(ç›´æ¥å°†ç»“æœè¿½åŠ åˆ°åŸæ–‡ä»¶ä¸­)</p>
<blockquote>
<p>history &gt; a.txt   â€”â€”&gt;å°†å½“å‰å†å²è®°å½•ç›´æ¥ä¿å­˜åˆ°a.txtæ–‡ä»¶ä¸­</p>
<p>å°†æœ€å¸¸ç”¨çš„3ä¸ªæŒ‡ä»¤åŠå…¶ä½¿ç”¨æ¬¡æ•°ä¿å­˜åˆ°a.txtæ–‡ä»¶ä¸­<br>history l awkâ€™{print $4}â€™lsort luniq-c I sort-rnk 1 I head-n3&gt;a.txt</p>
</blockquote>
<h2 id="4-ç»Ÿè®¡"><a href="#4-ç»Ÿè®¡" class="headerlink" title="4)ç»Ÿè®¡"></a>4)ç»Ÿè®¡</h2><p>wc   -c/-w/-l  æ–‡ä»¶åœ°å€   â€”â€”&gt;ç»Ÿè®¡æŒ‡å®šæ–‡ä»¶ä¸­å­—ç¬¦/å•è¯/è¡Œçš„æ•°é‡</p>
<h2 id="5-æŸ¥æ‰¾"><a href="#5-æŸ¥æ‰¾" class="headerlink" title="5)æŸ¥æ‰¾"></a>5)æŸ¥æ‰¾</h2><ul>
<li><strong>æŸ¥æ‰¾æ–‡ä»¶å†…å®¹  grep</strong></li>
</ul>
<p>â‘ :  <strong>grep  å†…å®¹  æ–‡ä»¶åœ°å€æ–‡ä»¶å</strong>   â€”â€”&gt;åœ¨æŒ‡å®šæ–‡ä»¶ä¸­æŸ¥æ‰¾æŒ‡å®šå†…å®¹(è¿”å›æ–‡ä»¶ä¸­æ‰€æœ‰åŒ…å«æŒ‡å®šå†…å®¹çš„è¡Œ)</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">grep you <span class="keyword">a</span>.txt  <span class="comment">------&gt;è·å–a.txtä¸­åŒ…å«youçš„æ‰€æœ‰çš„è¡Œ</span></span><br><span class="line"></span><br><span class="line">grepçš„å‚æ•°:</span><br><span class="line">-n  <span class="comment">------&gt;æ˜¾ç¤ºç»“æœçš„æ—¶å€™æ˜¾ç¤ºè¡Œå·</span></span><br><span class="line">-i  <span class="comment">------&gt;æŸ¥æ‰¾å†…å®¹çš„æ—¶å€™å¿½ç•¥å¤§å°å†™</span></span><br><span class="line">-E  <span class="comment">------&gt;æŒ‰æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…</span></span><br><span class="line">		 ä½¿ç”¨æ–¹æ³•: grep -E <span class="string">'æ­£åˆ™è¡¨è¾¾å¼'</span> æ–‡ä»¶</span><br><span class="line">æ³¨æ„:Linuxæ“ä½œç³»ç»Ÿä¸­æ­£åˆ™è¡¨è¾¾å¼ä¸æ”¯æŒ:\d,\D,\w,\w,\s,\S,\b,\B;å…¶ä»–è¯­æ³•éƒ½æ”¯æŒ</span><br><span class="line">-v  <span class="comment">------&gt;å¿½ç•¥å­—æ®µ</span></span><br><span class="line">         grep you <span class="keyword">a</span>.txt-v<span class="comment">------&gt;è·å–a.txtä¸­ä¸åŒ…å«youçš„æ‰€æœ‰çš„è¡Œ</span></span><br></pre></td></tr></table></figure>

<p>â‘¡:  <strong>æ‰§è¡Œæœ‰æ‰“å°ç»“æœçš„æŒ‡ä»¤  |</strong><br>  *<em>grep å†…å®¹ *</em>  â€”â€”&gt;åœ¨æŒ‡ä»¤æ‰§è¡Œç»“æœä¸­æŸ¥æ‰¾æŒ‡å®šå†…å®¹</p>
<p>â‘¢:  <strong>grep  -r  å†…å®¹  æ–‡ä»¶å¤¹åœ°å€</strong>   â€”â€”&gt;åœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ‰€æœ‰çš„æ–‡ä»¶å†…å®¹ä¸­æŸ¥æ‰¾æŒ‡å®šå†…å®¹</p>
<ul>
<li><strong>æŸ¥æ‰¾æ–‡ä»¶å   find</strong></li>
</ul>
<p>â‘ :  <strong>find  æ–‡ä»¶å¤¹è·¯å¾„  -name  æ–‡ä»¶å</strong>   â€”â€”&gt;åœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹æŒ‰æ–‡ä»¶åæ‰¾æŒ‡å®šæ–‡ä»¶</p>
<figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">æ‰¾æŒ‡å®šæ–‡ä»¶å</span><br><span class="line"><span class="builtin-name">find</span> dirl -name <span class="string">'test1.py'</span>  #åœ¨æ–‡ä»¶å¤¹dir1æ‰¾åå­—æ˜¯test1.pyçš„æ–‡ä»¶</span><br><span class="line"><span class="builtin-name">find</span> dirl -name <span class="string">'*.txt'</span>  #åœ¨æ–‡ä»¶å¤¹dir1æ‰¾åç¼€æ˜¯txtçš„æ‰€æœ‰æ–‡ä»¶</span><br><span class="line"><span class="builtin-name">find</span> dirl -name <span class="string">' test*. txt'</span></span><br><span class="line"><span class="builtin-name">find</span> dirl -name <span class="string">' test*'</span></span><br><span class="line"><span class="builtin-name">find</span> dirl -name <span class="string">'*c. txt'</span></span><br></pre></td></tr></table></figure>

<p>â‘¡:  <strong>find  æ–‡ä»¶å¤¹è·¯å¾„  -size  +/-æ–‡ä»¶å¤§å°</strong>   â€”â€”&gt;åœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸‹æ‰¾æ–‡ä»¶å¤§å°æ»¡è¶³æ¡ä»¶çš„æ‰€æœ‰çš„æ–‡ä»¶</p>
<figure class="highlight sqf"><table><tr><td class="code"><pre><span class="line"><span class="built_in">find</span> dirl -<span class="built_in">size</span> +<span class="number">4</span>k------&gt;æŸ¥æ‰¾åœ¨æ–‡ä»¶å¤¹dir1ä¸­æ‰€æœ‰å¤§äº<span class="number">4</span>kçš„æ–‡ä»¶</span><br><span class="line"><span class="built_in">find</span> dirl -<span class="built_in">size</span> -<span class="number">4</span>k------&gt;æŸ¥æ‰¾åœ¨æ–‡ä»¶å¤¹dir1ä¸­æ‰€æœ‰å°äº<span class="number">4</span>kçš„æ–‡ä»¶</span><br><span class="line"><span class="built_in">find</span> dirl -<span class="built_in">size</span> +<span class="number">5</span>k -<span class="built_in">size</span> -<span class="number">10</span>k ------&gt;æŸ¥æ‰¾åœ¨æ–‡ä»¶å¤¹dir1ä¸­æ‰€æœ‰å¤§äº<span class="number">5</span>kå¹¶ä¸”å°äº<span class="number">10</span>kçš„æ–‡ä»¶(æ–‡ä»¶å¤§å°å¦‚æœæ˜¯å°æ•°,ç®—</span><br><span class="line">çš„æ—¶å€™å‘ä¸Šå–æ•´)</span><br><span class="line"><span class="built_in">find</span> dirl -<span class="built_in">size</span> +<span class="number">4</span>k -<span class="built_in">name</span> <span class="string">'*.txt'</span>------&gt;æŸ¥æ‰¾åœ¨æ–‡ä»¶å¤¹dir1ä¸­æ‰€æœ‰å¤§äº<span class="number">4</span>kçš„txtæ–‡ä»¶</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>æŸ¥æŒ‡ä»¤</strong></li>
</ul>
<p><strong>which æŒ‡ä»¤å</strong>    â€”â€”&gt;ç²¾ç¡®æŸ¥æ‰¾å½“å‰æŒ‡ä»¤å¯¹åº”çš„æ–‡ä»¶çš„è·¯å¾„<br><strong>whereis  æŒ‡ä»¤å</strong>   â€”â€”&gt;æŸ¥æ‰¾å’ŒæŒ‡å®šæŒ‡ä»¤ç›¸å…³çš„æ‰€æœ‰çš„æ–‡ä»¶çš„è·¯å¾„<br><strong>man  æŒ‡ä»¤å</strong>   â€”â€”&gt;è·å–æŒ‡å®šæŒ‡å®šçš„ä½¿ç”¨æ‰‹å†Œ<br><strong>æŒ‡ä»¤å  â€“help</strong>   â€”â€”&gt;è·å–æŒ‡å®šæŒ‡ä»¤çš„å¸®åŠ©æ–‡æ¡£</p>
<h1 id="14ç½‘ç»œç®¡ç†"><a href="#14ç½‘ç»œç®¡ç†" class="headerlink" title="14ç½‘ç»œç®¡ç†"></a>14ç½‘ç»œç®¡ç†</h1><p><strong>ifconfig</strong>   â€”â€”&gt;æŸ¥çœ‹ç½‘å¡çŠ¶æ€<br><strong>netstat  -natp</strong>   â€”â€”&gt;æŸ¥çœ‹ç½‘ç»œè¿æ¥çŠ¶æ€<br><strong>netstat  -natp | grep</strong>  ç«¯å£å·   â€”â€”&gt;æŸ¥çœ‹æŒ‡å®šç«¯å£çš„ç½‘ç»œè¿æ¥çŠ¶æ€</p>
<p><strong>ping ipåœ°å€</strong>   â€”â€”&gt;ç»™æŒ‡å®šåœ°å€çš„æœåŠ¡å™¨å‘é€æ•°æ®(ä¸»è¦ç”¨æ¥æ£€æµ‹å½“å‰ç½‘ç»œé€šä¸é€š)<br><strong>ping  -i  æ—¶é—´(ç§’)  IPåœ°å€</strong>   â€”â€”&gt;æ¯éš”æŒ‡å®šæ—¶é—´pingä¸€æ¬¡ï¼ˆæ—¶é—´å¯ä»¥æ˜¯å°æ•°ï¼‰<br><strong>ping  -c  æ¬¡æ•°  IPåœ°å€</strong>   â€”â€”&gt;pingæŒ‡å®šæ¬¡æ•°(ä¸é™åˆ¶æ¬¡æ•°çš„æ—¶å€™ä¼šä¸æ–­çš„ping)</p>
<p><strong>wget åœ°å€</strong>â€”â€”&gt;ä¸‹è½½</p>
<h1 id="15å‹ç¼©å’Œå½’æ¡£"><a href="#15å‹ç¼©å’Œå½’æ¡£" class="headerlink" title="15å‹ç¼©å’Œå½’æ¡£"></a>15å‹ç¼©å’Œå½’æ¡£</h1><p>å‹ç¼©å¯ä»¥è®©æ–‡ä»¶å˜å°,ä¸€èˆ¬åœ¨éœ€è¦ä¼ è¾“å‰éƒ½ä¼šå…ˆå¯¹æ–‡ä»¶è¿›è¡Œå‹ç¼©.æ³¨æ„,å‹ç¼©æŒ‡ä»¤åªé’ˆå¯¹æ–‡ä»¶æœ‰æ•ˆ,å¹¶ä¸”ä¸€æ¬¡åªèƒ½å‹ç¼©ä¸€ä¸ªæ–‡ä»¶.<br>å½’æ¡£å¯ä»¥å°†ä¸€ä¸ªæ–‡ä»¶å¤¹å˜æˆä¸€ä¸ªæ–‡ä»¶(taræ–‡ä»¶)</p>
<h2 id="1-å½’æ¡£å’Œè§£å½’æ¡£"><a href="#1-å½’æ¡£å’Œè§£å½’æ¡£" class="headerlink" title="1)å½’æ¡£å’Œè§£å½’æ¡£"></a>1)å½’æ¡£å’Œè§£å½’æ¡£</h2><p><strong>tar  -cvf  å½’æ¡£åæ–‡ä»¶å­˜æ”¾çš„åœ°å€(å½’æ¡£åçš„æ–‡ä»¶å)  éœ€è¦å½’æ¡£çš„æ–‡ä»¶</strong>   â€”â€”&gt;å°†æ–‡ä»¶è¿›è¡Œå½’æ¡£æ“ä½œ(æ—¢å¯ä»¥å¯¹æ–‡ä»¶è¿›è¡Œå½’æ¡£ä¹Ÿå¯ä»¥å¯¹æ–‡ä»¶å¤¹å½’æ¡£)<br><strong>tar -xvf  å½’æ¡£æ–‡ä»¶åœ°å€</strong>   â€”â€”&gt;å°†æŒ‡å®šçš„å½’æ¡£æ–‡ä»¶è§£å½’æ¡£</p>
<h2 id="2-å‹ç¼©å’Œè§£å‹ç¼©"><a href="#2-å‹ç¼©å’Œè§£å‹ç¼©" class="headerlink" title="2)å‹ç¼©å’Œè§£å‹ç¼©"></a>2)å‹ç¼©å’Œè§£å‹ç¼©</h2><p><strong>gzip  æ–‡ä»¶åœ°å€   *<em>â€”â€”&gt;å‹ç¼©æŒ‡å®šæ–‡ä»¶(å‹ç¼©åä¼šç”Ÿæˆä¸€ä¸ªgzæ–‡ä»¶,å¹¶ä¸”ä¼šåˆ é™¤åŸæ–‡ä»¶)<br>*</em>gzip  -c  éœ€è¦å‹ç¼©çš„æ–‡ä»¶åœ°å€æ–‡ä»¶å  &gt;  å‹ç¼©æ–‡ä»¶åœ°å€</strong>   â€”â€”&gt;å°†æŒ‡å®šæ–‡ä»¶å‹ç¼©åˆ°æŒ‡å®šä½ç½®,å¹¶ä¸”ä¿ç•™åŸæ–‡ä»¶<br><strong>gzip  -d  å‹ç¼©æ–‡ä»¶åœ°å€</strong>   â€”â€”&gt;è§£å‹æŒ‡å®šæ–‡ä»¶(è§£å‹å®Œæˆåä¼šåˆ é™¤åŸå‹ç¼©æ–‡ä»¶)<br><strong>gzip  -l   å‹ç¼©æ–‡ä»¶åœ°å€</strong>   â€”â€”&gt;åˆ—å‡ºå‹ç¼©æ–‡ä»¶ä¸­çš„å†…å®¹</p>
<p><strong>xz æ–‡ä»¶åœ°å€</strong>   â€”â€”&gt;å‹ç¼©æŒ‡å®šæ–‡ä»¶(å‹ç¼©æ–‡ä»¶åç¼€æ˜¯xz)<br><strong>xz  -d  å‹ç¼©æ–‡ä»¶åœ°å€</strong>   â€”â€”&gt;è§£å‹æŒ‡å®šæ–‡ä»¶</p>
<p><strong>gunzip  å‹ç¼©æ–‡ä»¶åœ°å€</strong>    â€”â€”&gt;è§£å‹æŒ‡å®šæ–‡ä»¶(è§£å‹å®Œæˆåä¼šåˆ é™¤åŸå‹ç¼©æ–‡ä»¶)</p>
<h1 id="16åŒ…ç®¡ç†å·¥å…·-è½¯ä»¶å®‰è£…"><a href="#16åŒ…ç®¡ç†å·¥å…·-è½¯ä»¶å®‰è£…" class="headerlink" title="16åŒ…ç®¡ç†å·¥å…·(è½¯ä»¶å®‰è£…)"></a>16åŒ…ç®¡ç†å·¥å…·(è½¯ä»¶å®‰è£…)</h1><p>åŒ…ç®¡ç†å·¥å…·: yum</p>
<ul>
<li>yum search: æœç´¢è½¯ä»¶åŒ…,ä¾‹å¦‚yum search nginx.</li>
<li>yun list installed:åˆ—å‡ºå·²ç»å®‰è£…çš„è½¯ä»¶åŒ…,ä¾‹å¦‚yum list installed I grep z1ib.</li>
<li>yum instal1:å®‰è£…è½¯ä»¶åŒ…,ä¾‹å¦‚yum insta11 nginx.</li>
<li>yum remove:åˆ é™¤è½¯ä»¶åŒ…,ä¾‹å¦‚yum remove nginx.</li>
<li>yum update:æ›´æ–°è½¯ä»¶åŒ…,ä¾‹å¦‚yum updateå¯ä»¥æ›´æ–°æ‰€æœ‰è½¯ä»¶åŒ…,è€Œyum update taråªä¼šæ›´æ–°tar.</li>
<li>yum check-update:æ£€æŸ¥æœ‰å“ªäº›å¯ä»¥æ›´æ–°çš„è½¯ä»¶åŒ….</li>
<li>yum info:æ˜¾ç¤ºè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯,ä¾‹å¦‚yum info nginx.</li>
</ul>
<p>æºä»£ç æ„å»ºå®‰è£…è½¯ä»¶:</p>
<ol>
<li>wget  å®‰è£…åŒ…çš„è·¯å¾„        -ä¸‹è½½å®‰è£…åŒ…</li>
<li>gunzip/tar  å‹ç¼©åŒ…         - è§£å‹ã€è§£å½’æ¡£</li>
<li>(è®¾ç½®å®‰è£…è·¯å¾„)</li>
<li>cd å®‰è£…åŒ…ç›®å½• æ‰§è¡Œ: make &amp;&amp; make install       -ç¼–è¯‘å®‰è£…åŒ…ç¨‹åº</li>
<li>ç»™å¯æ‰§è¡Œæ–‡ä»¶æ·»åŠ è½¯è¿æ¥åˆ°usr/binç›®å½•ä¸‹            -æ·»åŠ å¿«æ·æ–¹å¼</li>
</ol>
<figure class="highlight cs"><table><tr><td class="code"><pre><span class="line"><span class="meta">#æºä»£ç æ„å»ºpython3.x</span></span><br><span class="line"></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># yum install gcc     (å®‰è£…ç¼–è¯‘ç¯å¢ƒ)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># wget https://www.python.org/ftp/python/3.6.5/Python-3.6.5.tgz    (ä¸‹è½½å®‰è£…åŒ…)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># gunzip Python-3.6.5.tgz     (è§£å‹)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># tar -xvf Python-3.6.5.tar    (è§£å½’æ¡£)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># cd Python-3.6.5            (è¿›å…¥å®‰è£…åŒ…)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># ./configure --prefix=/usr/local/python36 --enable-optimizations   (è®¾ç½®å®‰è£…è·¯å¾„)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel    (å®‰è£…ç›¸å…³ä¾èµ–åº“)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># make &amp;&amp; make install       (ç¼–è¯‘æ‰§è¡Œå®‰è£…æ–‡ä»¶)</span></span><br><span class="line">...</span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># ln -s /usr/local/python36/bin/python3.6 /usr/bin/python3      (ç»™pythonæŒ‡ä»¤æ–‡ä»¶åˆ›å»ºå¿«æ·æ–¹å¼python3)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># python3 --version</span></span><br><span class="line">Python <span class="number">3.6</span><span class="number">.5</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># python3 -m pip install -U pip     (å®‰è£…pip)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># ln -s /usr/local/python36/bin/pip /usr/bin/pip3      (ç»™pipæŒ‡ä»¤åˆ›å»ºå¿«æ·æ–¹å¼pip3)</span></span><br><span class="line">[<span class="meta">root ~</span>]<span class="meta"># pip3 --version</span></span><br></pre></td></tr></table></figure>


]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>æŒ‡ä»¤</tag>
      </tags>
  </entry>
  <entry>
    <title>gitå¸¸ç”¨æŒ‡ä»¤</title>
    <url>/2019/12/22/git%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/</url>
    <content><![CDATA[<p>gitçš„åŸºæœ¬å¸¸ç”¨æŒ‡ä»¤é›†</p>
<a id="more"></a>
<h1 id="1-åŸºæœ¬æŒ‡ä»¤"><a href="#1-åŸºæœ¬æŒ‡ä»¤" class="headerlink" title="1.åŸºæœ¬æŒ‡ä»¤"></a>1.åŸºæœ¬æŒ‡ä»¤</h1><p>git init        â€”â€”&gt;æ–°å»ºgitä»“åº“<br>git add æ–‡ä»¶/æ–‡ä»¶å¤¹       â€”â€”&gt;  å°†æ–‡ä»¶æ·»åŠ åˆ°ç¼“å­˜åŒºä¸­<br>git add -A   â€”â€”&gt;  æ·»åŠ æ‰€æœ‰å†…å®¹åˆ°ç¼“å­˜åŒºä¸­</p>
<p>git status      â€”â€”&gt;    æŸ¥çœ‹gitçŠ¶æ€<br>git commit -m  â€˜æäº¤ä¿¡æ¯â€™       â€”â€”&gt;  å°†ç¼“å­˜åŒºä¸­çš„å†…å®¹å…¨éƒ¨æäº¤åˆ°gitæœ¬åœ°ä»“åº“ä¸­<br>git log        â€”â€”&gt; æŸ¥çœ‹æäº¤æ—¥å¿— </p>
<p>git reset  â€“ hard   HEAD       â€”â€”&gt;   è®©å·¥ä½œç›®å½•ä¸­çš„å†…å®¹å’Œä»“åº“ä¸­çš„å†…å®¹ä¿æŒä¸€è‡´<br>git reset  â€“hard HEAD^  â€”â€”&gt;  å›åˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬<br>git  reset  â€“ hard ç‰ˆæœ¬å·  â€”â€”&gt;  å›åˆ°æŒ‡å®šçš„ç‰ˆæœ¬ </p>
<p>git checkout  æ–‡ä»¶å   â€”â€”&gt;  ä»æš‚å­˜åŒºä¸­æ¢å¤å·¥ä½œç›®å½•ä¸­çš„å†…å®¹(è®©å·¥ä½œåŒºä¸­çš„æŒ‡å®šæ–‡ä»¶ï¼Œå›åˆ°ä¸Šæ¬¡æäº¤çš„æ—¶å€™çš„çŠ¶æ€) </p>
<p>git clone <url>    â€”â€”&gt;  å°†æœåŠ¡å™¨ä¸Šçš„é¡¹ç›®(ä»“åº“)å…‹éš† (ä½¿ç”¨httpsåœ°å€éœ€è¦è¾“å…¥å¯†ç ï¼Œä½¿ç”¨sshåœ°å€éœ€è¦æ·»åŠ å…¬é’¥) </p>
<p>git remote add origin åœ°å€    â€”â€”&gt;  å…³è”è¿œç¨‹ä»“åº“(åªéœ€è¦å…³è”ä¸€æ¬¡)</p>
<p>git push [-u] origin master   â€”â€”&gt;  æäº¤(-uåœ¨ç¬¬ä¸€æ¬¡æäº¤åˆ†æ”¯çš„æ—¶å€™æ‰ç”¨) </p>
<p>git push   â€”â€”&gt;  å°†æœ¬åœ°ä»“åº“çš„å†…å®¹æäº¤åˆ°è¿œç¨‹ä»“åº“masteråˆ†æ”¯ä¸Š</p>
<p>git push origin åˆ†æ”¯å     â€”â€”&gt;  å°†æœ¬åœ°ä»“åº“çš„å†…å®¹æäº¤åˆ°è¿œç¨‹ä»“åº“å¯¹åº”çš„åˆ†æ”¯ä¸Š, å¦‚æœåˆ†æ”¯ä¸å­˜åœ¨ä¼šè‡ªåŠ¨åˆ›å»º</p>
<p>git pull   â€”â€”&gt;  å°†è¿œç¨‹ä»“åº“ä¸­çš„å†…å®¹æ›´æ–°åˆ°æœ¬åœ°ä»“åº“å’Œå·¥ä½œåŒºä¸­</p>
<h1 id="2-åˆ†ä¹‹ç®¡ç†"><a href="#2-åˆ†ä¹‹ç®¡ç†" class="headerlink" title="2.åˆ†ä¹‹ç®¡ç†"></a>2.åˆ†ä¹‹ç®¡ç†</h1><p>åˆ›å»ºä»“åº“ä¼šé»˜è®¤ç»™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªmasteråˆ†ä¹‹,è¿™ä¸ªåˆ†ä¹‹ä¸€èˆ¬ä½œä¸ºæäº¤å’Œå‘å¸ƒåˆ†ä¹‹;å¼€å‘ä¸€èˆ¬ä¼šè‡ªå·±åˆ›å»ºä¸€ä¸ªdevelopåˆ†ä¹‹ï¼Œç”¨æ¥å¼€å‘å’Œæµ‹è¯•;å¤šäººåä½œçš„æ—¶å€™è¿˜å¯èƒ½æ ¹æ®ä¸åŒçš„äººæˆ–è€…(ä¸åŒçš„åŠŸèƒ½)åˆ›å»ºä¸åŒçš„åˆ†ä¹‹ï¼Œç”¨æ¥ç‹¬ç«‹å¼€å‘ </p>
<p>å¸¸è§åˆ†ä¹‹ï¼š master(ä¸»è¦æ˜¯åˆå¹¶develop), develop(ä¸»è¦åˆå¹¶ä¸‹é¢çš„å…¶ä»–åˆ†æ”¯), åŠŸèƒ½/äººå‘˜åˆ†ä¹‹(å¼€å‘)  </p>
<p>git branch [-a]   â€”â€”&gt;æŸ¥çœ‹åˆ†ä¹‹<br>git branch åˆ†ä¹‹åâ€”â€”&gt;åˆ›å»ºåˆ†ä¹‹<br>git checkout   åˆ†æ”¯åâ€”â€”&gt;  åˆ‡æ¢åˆ†ä¹‹<br>git checkout -b åˆ†ä¹‹å    â€”â€”&gt;åˆ‡æ¢å¹¶åˆ›å»ºæ–°çš„åˆ†ä¹‹<br>git diff  åˆ†ä¹‹1  åˆ†ä¹‹2â€”â€”&gt;æŸ¥çœ‹ä¸¤ä¸ªåˆ†ä¹‹ä¹‹é—´çš„å·®å¼‚<br>git merge åˆ†ä¹‹åâ€”â€”&gt;è®©å½“å‰åˆ†ä¹‹å’ŒæŒ‡å®šåˆ†ä¹‹è¿›è¡Œåˆå¹¶</p>
<p>æ³¨æ„: åˆ‡æ¢åˆ†ä¹‹ã€pushã€pullï¼Œè¿™äº›æ“ä½œå‰è¦ä¿è¯å·¥ä½œåŒºæ˜¯clean<br>æ€ä¹ˆé¿å…å†²çªï¼š  ä¸è¦å‘ç”Ÿå¤šä¸ªåˆ†ä¹‹å¯¹åŒä¸€ä¸ªæ–‡ä»¶åœ¨åŒä¸€ä¸ªç‰ˆæœ¬ä¸‹è¿›è¡Œä¿®æ”¹(å’ŒåŒä¼´ç¡®è®¤å’Œå•†é‡)</p>
]]></content>
      <categories>
        <category>Git</category>
      </categories>
      <tags>
        <tag>æŒ‡ä»¤</tag>
        <tag>æŠ€æœ¯æ–‡æ¡£</tag>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxå®šæ—¶ä»»åŠ¡</title>
    <url>/2019/12/20/Linux%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/</url>
    <content><![CDATA[<p>é€šè¿‡åˆ¶å®š <code>crontab -e</code> ç¼–è¾‘å’Œå¼€å¯å®šæ—¶ä»»åŠ¡</p>
<a id="more"></a>


<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„å®šæ—¶ä»»åŠ¡ï¼Œéœ€è¦ç¡®å®šæ—¶é—´å’Œä»»åŠ¡</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1.æ—¶é—´</span></span><br><span class="line"> .---------------- minute (0 - 59)   # åˆ†</span><br><span class="line"> |  .------------- hour (0 - 23)     # æ—¶</span><br><span class="line"> |  |  .---------- day of month (1 - 31)  # æ—¥</span><br><span class="line"> |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...  # æœˆ</span><br><span class="line"> |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"> |  |  |  |  |</span><br><span class="line"> *  *  *  *  * user-name  command to be executed</span><br><span class="line"></span><br><span class="line"> * * * * *   		- æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡(æ¯éš”ä¸€åˆ†é’Ÿ)</span><br><span class="line"> */1 * * * *        - æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡(æ¯éš”ä¸€åˆ†é’Ÿ)</span><br><span class="line"> */2 * * * *        - æ¯2åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡(æ¯éš”2åˆ†é’Ÿ)</span><br><span class="line"> * */1 * * *        - æ¯éš”1å°æ—¶</span><br><span class="line"> * * */1 * *        - æ¯éš”1å¤©</span><br><span class="line"> * * * */2 *        - æ¯éš”ä¸¤ä¸ªæœˆ</span><br><span class="line"> * * * *  fri       - æ¯å‘¨äº”æ‰§è¡Œä»»åŠ¡</span><br><span class="line"></span><br><span class="line"> 30 * * * *         - æ—¶é—´ç‚¹åˆ°30åˆ†çš„æ—¶å€™åš</span><br><span class="line"> 0  * * * *         - æ—¶é—´ç‚¹åˆ°æ•´ç‚¹çš„æ—¶å€™æ‰§è¡Œä»»åŠ¡</span><br><span class="line"> 30 2 * * *         - æ—¶é—´åˆ° 02:30 çš„æ—¶å€™æ‰§è¡Œä»»åŠ¡</span><br><span class="line"> 0  12 28 * *       - æ¯æœˆ28å·12:00æ‰§è¡Œä»»åŠ¡</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2.ä»»åŠ¡</span></span><br><span class="line">å†™LinuxæŒ‡ä»¤, æŒ‡ä»¤å¦‚æœæœ‰ç»“æœï¼Œç»“æœçœ‹ä¸åˆ°</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>shell</tag>
        <tag>è„šæœ¬</tag>
      </tags>
  </entry>
  <entry>
    <title>Linuxä¸­pythonç›¸å…³è½¯ä»¶å®‰è£…è®°å½•</title>
    <url>/2019/12/20/linux%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85/</url>
    <content><![CDATA[<p>Linuxä¸­çš„Python, MySQL, Redis, Nginxå®‰è£…,åŸºç¡€ç¯å¢ƒé…ç½®</p>
<a id="more"></a>

<h1 id="LinuxåŸºæœ¬é…ç½®"><a href="#LinuxåŸºæœ¬é…ç½®" class="headerlink" title="LinuxåŸºæœ¬é…ç½®"></a>LinuxåŸºæœ¬é…ç½®</h1><h2 id="é…ç½®vimç¼–è¾‘å™¨"><a href="#é…ç½®vimç¼–è¾‘å™¨" class="headerlink" title="é…ç½®vimç¼–è¾‘å™¨"></a>é…ç½®vimç¼–è¾‘å™¨</h2><figure class="highlight applescript"><table><tr><td class="code"><pre><span class="line">cd ~</span><br><span class="line">vim .vimrc</span><br><span class="line">    <span class="keyword">set</span> nu   <span class="comment"># è¡Œå·</span></span><br><span class="line">    <span class="keyword">set</span> ts=<span class="number">4</span>   <span class="comment"># è®¾ç½®åˆ¶è¡¨é”®ç©ºæ ¼æ•°é‡</span></span><br><span class="line">    <span class="keyword">set</span> autoindent   <span class="comment"># è‡ªåŠ¨ç¼©è¿›</span></span><br><span class="line">    <span class="keyword">set</span> expandtab   <span class="comment"># åˆ¶è¡¨é”®è‡ªåŠ¨å˜ç©ºæ ¼</span></span><br><span class="line">    <span class="keyword">set</span> ruler   <span class="comment"># æ˜¾ç¤ºå…‰æ ‡ä½ç½®</span></span><br><span class="line">    <span class="keyword">set</span> nohls   <span class="comment"># é€‰ä¸­çš„ä»£ç ä¸é«˜äº®</span></span><br><span class="line">    syntax <span class="keyword">on</span>   <span class="comment"># è¯­æ³•é«˜äº®</span></span><br></pre></td></tr></table></figure>

<h2 id="æŸ¥çœ‹å‘½ä»¤åˆ«å"><a href="#æŸ¥çœ‹å‘½ä»¤åˆ«å" class="headerlink" title="æŸ¥çœ‹å‘½ä»¤åˆ«å"></a>æŸ¥çœ‹å‘½ä»¤åˆ«å</h2><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cd</span> ~</span><br><span class="line">vim <span class="string">.bashrc</span></span><br></pre></td></tr></table></figure>

<h2 id="ä¿®æ”¹ç”¨æˆ·åå‰çš„ä¸€é•¿ä¸²"><a href="#ä¿®æ”¹ç”¨æˆ·åå‰çš„ä¸€é•¿ä¸²" class="headerlink" title="ä¿®æ”¹ç”¨æˆ·åå‰çš„ä¸€é•¿ä¸²"></a>ä¿®æ”¹ç”¨æˆ·åå‰çš„ä¸€é•¿ä¸²</h2><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">vim /etc/bashrc</span><br><span class="line"><span class="number">41</span>è¡Œåˆ é™¤@\h</span><br></pre></td></tr></table></figure>


<h1 id="åç«¯ç›¸å…³çš„å¼€å‘å·¥å…·å®‰è£…"><a href="#åç«¯ç›¸å…³çš„å¼€å‘å·¥å…·å®‰è£…" class="headerlink" title="åç«¯ç›¸å…³çš„å¼€å‘å·¥å…·å®‰è£…"></a>åç«¯ç›¸å…³çš„å¼€å‘å·¥å…·å®‰è£…</h1><h2 id="Linuxè½¯ä»¶å®‰è£…æ–¹æ³•"><a href="#Linuxè½¯ä»¶å®‰è£…æ–¹æ³•" class="headerlink" title="Linuxè½¯ä»¶å®‰è£…æ–¹æ³•"></a>Linuxè½¯ä»¶å®‰è£…æ–¹æ³•</h2><figure class="highlight haml"><table><tr><td class="code"><pre><span class="line">1.Â åŒ…ç®¡ç†å·¥å…·Â </span><br><span class="line">Â Â Â Â -<span class="ruby">Â yumÂ CentOS</span></span><br><span class="line"><span class="ruby">Â Â Â Â Â Â Â Â ~Â yumÂ searchÂ nginx   ---&gt;   æŸ¥çœ‹å®‰è£…åº“å†…æ˜¯å¦å·²ç»å®‰è£…nginx</span></span><br><span class="line"><span class="ruby">Â Â Â Â Â Â Â Â ~Â yumÂ installÂ nginx   ---&gt;   å®‰è£…</span></span><br><span class="line"><span class="ruby">Â Â Â Â Â Â Â Â ~Â yumÂ eraseÂ nginxÂ /Â yumÂ removeÂ nginx   ---&gt;   å¸è½½</span></span><br><span class="line"><span class="ruby">Â Â Â Â Â Â Â Â ~Â yumÂ infoÂ nginx   ---&gt;   æŸ¥çœ‹è½¯ä»¶ä¿¡æ¯</span></span><br><span class="line"><span class="ruby">Â Â Â Â Â Â Â Â ~Â yumÂ listÂ installedÂ <span class="params">|Â grepÂ nginx   ---&gt;   æŸ¥çœ‹æ˜¯å¦å·²ç»å®‰è£…</span></span></span><br><span class="line"><span class="ruby">Â Â Â Â -Â rpmÂ Redhat</span></span><br><span class="line"><span class="ruby">Â Â Â Â Â Â Â Â ~Â rpmÂ -ivhÂ ä¸‹è½½çš„rpmåŒ…æ–‡ä»¶å</span></span><br><span class="line"><span class="ruby">Â Â Â Â Â Â Â Â ~Â rpmÂ -e</span></span><br><span class="line"><span class="ruby">Â Â Â Â Â Â Â Â ~Â rpmÂ -qa</span></span><br><span class="line"><span class="ruby">Â Â Â Â -Â aptÂ Ubuntu</span></span><br><span class="line"><span class="ruby"><span class="number">2</span>.Â æºä»£ç æ„å»ºå®‰è£…</span></span><br></pre></td></tr></table></figure>

<h2 id="Nginxå®‰è£…"><a href="#Nginxå®‰è£…" class="headerlink" title="Nginxå®‰è£…"></a>Nginxå®‰è£…</h2><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">yum</span> <span class="string">install -y nginx</span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">start nginx</span></span><br><span class="line"><span class="attr">systemctl</span> <span class="string">stop nginx</span></span><br></pre></td></tr></table></figure>
<h2 id="MariaDBå®‰è£…-MySQL-5-x-çš„ä¸€ä¸ªåˆ†æ”¯-å’Œ5-xç‰ˆæœ¬åŸºæœ¬ç›¸åŒ"><a href="#MariaDBå®‰è£…-MySQL-5-x-çš„ä¸€ä¸ªåˆ†æ”¯-å’Œ5-xç‰ˆæœ¬åŸºæœ¬ç›¸åŒ" class="headerlink" title="MariaDBå®‰è£…(MySQL 5.x çš„ä¸€ä¸ªåˆ†æ”¯,å’Œ5.xç‰ˆæœ¬åŸºæœ¬ç›¸åŒ)"></a>MariaDBå®‰è£…(MySQL 5.x çš„ä¸€ä¸ªåˆ†æ”¯,å’Œ5.xç‰ˆæœ¬åŸºæœ¬ç›¸åŒ)</h2><figure class="highlight armasm"><table><tr><td class="code"><pre><span class="line"><span class="symbol">yum</span> install -y <span class="keyword">mariadb </span><span class="keyword">mariadb-server</span></span><br><span class="line"><span class="keyword">systemctl </span>start <span class="keyword">mariadb</span></span><br><span class="line"><span class="keyword">mysql </span>-u root</span><br></pre></td></tr></table></figure>
<h2 id="MySQLå®‰è£…"><a href="#MySQLå®‰è£…" class="headerlink" title="MySQLå®‰è£…"></a>MySQLå®‰è£…</h2><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> æ¸…é™¤æ‰æ‰€æœ‰è·Ÿmariadbç›¸å…³çš„ä¸œè¥¿</span><br><span class="line">  yum list installed | grep mariadb | awk <span class="string">'&#123;print $1&#125;'</span> | xargs yum erase -y</span><br><span class="line"><span class="number">2.</span> æ¸…ç†ä¹‹å‰çš„æ•°æ®å’Œæ—¥å¿—æ–‡ä»¶ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span><br><span class="line">  rm -rf /var/lib/mysql</span><br><span class="line">  rm -f /var/log/mysqld.log</span><br><span class="line"><span class="number">3.</span> ä¸‹è½½MySQLå®˜æ–¹æä¾›çš„RPMåŒ…å¹¶è§£å½’æ¡£</span><br><span class="line">  wget https:<span class="comment">//dev.mysql.com/get/Downloads/MySQL-5.7/mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar</span></span><br><span class="line">  tar -xvf mysql<span class="number">-5.7</span><span class="number">.28</span><span class="number">-1.</span>el7.x86_64.rpm-bundle.tar</span><br><span class="line"><span class="number">4.</span> å®‰è£…ä¾èµ–åº“</span><br><span class="line">  yum install -y libaio</span><br><span class="line"><span class="number">5.</span> ä½¿ç”¨rpmåŒ…ç®¡ç†å·¥å…·å®‰è£…MySQL</span><br><span class="line">  rpm -ivh mysql-community-common<span class="number">-5.7</span><span class="number">.28</span><span class="number">-1.</span>el7.x86_64.rpm</span><br><span class="line">  rpm -ivh mysql-community-libs<span class="number">-5.7</span><span class="number">.28</span><span class="number">-1.</span>el7.x86_64.rpm</span><br><span class="line">  rpm -ivh mysql-community-client<span class="number">-5.7</span><span class="number">.28</span><span class="number">-1.</span>el7.x86_64.rpm</span><br><span class="line">  rpm -ivh mysql-community-server<span class="number">-5.7</span><span class="number">.28</span><span class="number">-1.</span>el7.x86_64.rpm</span><br><span class="line"><span class="number">6.</span> å¯åŠ¨æœåŠ¡æŸ¥çœ‹éšæœºå¯†ç </span><br><span class="line">  systemctl start mysqld</span><br><span class="line">  cat /var/log/mysqld.log | grep password</span><br><span class="line"><span class="number">7.</span> ç”¨å®¢æˆ·ç«¯å·¥å…·è¿æ¥MySQL</span><br><span class="line">  mysql -u root -p</span><br><span class="line"><span class="number">8.</span> ä¿®æ”¹rootç”¨æˆ·å£ä»¤</span><br><span class="line">  <span class="keyword">set</span> global validate_password_policy=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">set</span> global validate_password_length=<span class="number">6</span>;</span><br><span class="line">  alter user <span class="string">'root'</span>@<span class="string">'localhost'</span> identified by <span class="string">'123456'</span>;</span><br></pre></td></tr></table></figure>
<h2 id="Rediså®‰è£…"><a href="#Rediså®‰è£…" class="headerlink" title="Rediså®‰è£…"></a>Rediså®‰è£…</h2><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">å®‰è£…Rediså®˜æ–¹æœ€æ–°ç‰ˆ</span><br><span class="line">wgetÂ http:<span class="comment">//download.redis.io/releases/redis-5.0.7.tar.gz</span></span><br><span class="line">gunzipÂ redis<span class="number">-5.0</span><span class="number">.7</span>.tar.gz</span><br><span class="line">tarÂ -xvfÂ redis<span class="number">-5.0</span><span class="number">.7</span>.tar</span><br><span class="line">cdÂ redis<span class="number">-5.0</span><span class="number">.7</span></span><br><span class="line">makeÂ &amp;&amp;Â makeÂ install</span><br></pre></td></tr></table></figure>
<h2 id="GItå®‰è£…"><a href="#GItå®‰è£…" class="headerlink" title="GItå®‰è£…"></a>GItå®‰è£…</h2><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">å®‰è£…Gitå®˜æ–¹æœ€æ–°ç‰ˆ</span><br><span class="line">wgetÂ https:<span class="comment">//mirrors.edge.kernel.org/pub/software/scm/git/git-2.24.1.tar.xz</span></span><br><span class="line">xzÂ -dÂ git<span class="number">-2.24</span><span class="number">.1</span>.tar.xz</span><br><span class="line">tarÂ -xfÂ git<span class="number">-2.24</span><span class="number">.1</span>.tar</span><br><span class="line">cdÂ git<span class="number">-2.24</span><span class="number">.1</span></span><br><span class="line">yumÂ installÂ -yÂ curlÂ libcurl-devel</span><br><span class="line">./configureÂ --prefix=/usr/local</span><br><span class="line">makeÂ &amp;&amp;Â makeÂ install</span><br></pre></td></tr></table></figure>
<h2 id="Python3å®‰è£…"><a href="#Python3å®‰è£…" class="headerlink" title="Python3å®‰è£…"></a>Python3å®‰è£…</h2><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> å®‰è£…ä¾èµ–é¡¹</span><br><span class="line">    yum install -y zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel</span><br><span class="line"><span class="number">2.</span> ä¸‹è½½Python3æºä»£ç </span><br><span class="line">    wget https:<span class="comment">//www.python.org/ftp/python/3.7.6/Python-3.7.6.tar.xz</span></span><br><span class="line"><span class="number">3.</span> è§£å‹ç¼©å’Œè§£å½’æ¡£</span><br><span class="line">    xz -d Python<span class="number">-3.7</span><span class="number">.6</span>.tar.xz</span><br><span class="line">    tar -xvf Python<span class="number">-3.7</span><span class="number">.6</span>.tar</span><br><span class="line"><span class="number">4.</span> æ‰§è¡Œå®‰è£…å‰çš„é…ç½®</span><br><span class="line">    cd Python<span class="number">-3.7</span><span class="number">.6</span></span><br><span class="line">    ./configure --prefix=/usr/local/python37 --enable-optimizations</span><br><span class="line"><span class="number">5.</span> æ„å»ºå’Œå®‰è£…</span><br><span class="line">    make &amp;&amp; make install</span><br><span class="line"><span class="number">6.</span> æ³¨å†Œç¯å¢ƒå˜é‡</span><br><span class="line">    vim ~/.bash_profile</span><br><span class="line">        PATH=$PATH:/usr/local/python37/bin</span><br><span class="line">        export PATH</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>Linuxè½¯ä»¶</tag>
        <tag>æœåŠ¡å™¨</tag>
        <tag>é…ç½®</tag>
        <tag>æŠ€æœ¯æ–‡æ¡£</tag>
      </tags>
  </entry>
</search>
