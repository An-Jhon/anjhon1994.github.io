<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="非关系型数据库RedisRedis是为了实现高速缓存服务,减小MySQL数据库的压力">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis及其应用">
<meta property="og:url" content="https://anjhon1994.github.io/2019/12/27/radis/index.html">
<meta property="og:site_name" content="Anjhon&#39;s Blog">
<meta property="og:description" content="非关系型数据库RedisRedis是为了实现高速缓存服务,减小MySQL数据库的压力">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-12-26T16:00:00.000Z">
<meta property="article:modified_time" content="2020-01-08T15:21:56.451Z">
<meta property="article:author" content="Anjhon">
<meta property="article:tag" content="基础">
<meta property="article:tag" content="数据库">
<meta property="article:tag" content="redis">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Redis及其应用</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 4.1.1"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/projects_url">项目</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2019/12/28/%E6%B5%85%E6%B5%85%E6%B5%85%E8%B0%88%E6%95%B0%E6%8D%AE%E5%BA%93/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2019/12/25/SQL%E5%9F%BA%E7%A1%80/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://anjhon1994.github.io/2019/12/27/radis/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://anjhon1994.github.io/2019/12/27/radis/&text=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://anjhon1994.github.io/2019/12/27/radis/&is_video=false&description=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Redis及其应用&body=Check out this article: https://anjhon1994.github.io/2019/12/27/radis/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://anjhon1994.github.io/2019/12/27/radis/&name=Redis及其应用&description=&lt;p&gt;非关系型数据库Redis&lt;br&gt;Redis是为了实现高速缓存服务,减小MySQL数据库的压力&lt;/p&gt;" target="_blank" rel="noopener"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://anjhon1994.github.io/2019/12/27/radis/&t=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux服务起停"><span class="toc-number">1.</span> <span class="toc-text">Linux服务起停</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#进程查杀"><span class="toc-number">2.</span> <span class="toc-text">进程查杀</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#redis命令"><span class="toc-number">3.</span> <span class="toc-text">redis命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#redis的数据类型"><span class="toc-number">4.</span> <span class="toc-text">redis的数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-字符串-string"><span class="toc-number">4.1.</span> <span class="toc-text">1.字符串 - string</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-哈希-hash"><span class="toc-number">4.2.</span> <span class="toc-text">2.哈希 - hash</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-列表-list"><span class="toc-number">4.3.</span> <span class="toc-text">3.列表 - list</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-集合-set"><span class="toc-number">4.4.</span> <span class="toc-text">4.集合 - set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-有序集合-zset-元素自带一个值-可以修改"><span class="toc-number">4.5.</span> <span class="toc-text">5.有序集合 - zset(元素自带一个值,可以修改)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-地理位置-LBS应用-Location-Based-Service-基于位置的服务"><span class="toc-number">4.6.</span> <span class="toc-text">6.地理位置(LBS应用-Location-Based Service - 基于位置的服务)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#加密技术"><span class="toc-number">5.</span> <span class="toc-text">加密技术</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python中的redis"><span class="toc-number">6.</span> <span class="toc-text">Python中的redis</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Redis及其应用
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Anjhon's Blog</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-12-26T16:00:00.000Z" itemprop="datePublished">2019-12-27</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a> › <a class="category-link" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/Redis/">Redis</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/redis/" rel="tag">redis</a>, <a class="tag-link" href="/tags/%E5%9F%BA%E7%A1%80/" rel="tag">基础</a>, <a class="tag-link" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag">数据库</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>非关系型数据库Redis<br>Redis是为了实现高速缓存服务,减小MySQL数据库的压力</p>
<a id="more"></a>


<h1 id="Linux服务起停"><a href="#Linux服务起停" class="headerlink" title="Linux服务起停"></a>Linux服务起停</h1><p>CentOS<br>    systemctl start 服务名   -&gt;   启动<br>    systemctl stop 服务名   -&gt;   停止<br>    systemctl restart 服务名   -&gt;   重启<br>    systemctl status 服务名   -&gt;   查看状态<br>    systemctl enable 服务名   -&gt;   开机自启<br>    systemctl disable 服务名   -&gt;   禁止自启</p>
<p>Ubuntu<br>    service 服务名 start   -&gt;   启动</p>
<h1 id="进程查杀"><a href="#进程查杀" class="headerlink" title="进程查杀"></a>进程查杀</h1><p>ps -ef | grep “”  -&gt;  搜索全部包含字符串的内容<br>ps -ef | grep “” | grep -v “grep” -&gt;  搜索全部包含字符串的内容并且过滤掉包含grep的内容<br>ps -ef | grep -E正则表达式  -&gt;  搜索全部包含符合正则表达式的内容<br>xargs  -&gt;  将列变成行<br>ps -ef | grep “redis-server” | grep -v “grep” | awk ‘{print $2}’ | xargs kill  -&gt;  精准查杀进程</p>
<p>pkill 进程名  -&gt;  根据名字杀掉进程<br>killall 进程名  -&gt;  根据名字杀掉进程</p>
<h1 id="redis命令"><a href="#redis命令" class="headerlink" title="redis命令"></a>redis命令</h1><p>ttl key ——&gt; 查看key的存活时间<br>set key value ex N ——&gt; 设置key的存活时间为N秒<br>set key value px N ——&gt; 设置key的存活时间为N毫秒<br>shutdown  ——&gt; 关闭redis服务器<br>shutdown save ——&gt; 保存并关闭redis服务器<br>save ——&gt; 保存<br>bgsave ——&gt; 后台保存<br>dbsize ——&gt; 查看数据库大小<br>keys *  ——&gt; 获取所有的key<br>keys ta*  ——&gt; 获取ta开头的key</p>
<p><strong>redis默认开启了16个数据库</strong><br>select 0-15 ——&gt; 切换数据库<br>flushdb ——&gt; 清空当前数据库<br>flushall ——&gt; 清空所有数据库</p>
<p>type keyp ——&gt; 判断key的类型</p>
<h1 id="redis的数据类型"><a href="#redis的数据类型" class="headerlink" title="redis的数据类型"></a>redis的数据类型</h1><h2 id="1-字符串-string"><a href="#1-字符串-string" class="headerlink" title="1.字符串 - string"></a>1.字符串 - string</h2><pre><code>set key value
get key
strlen key
append key value ------&gt; 追加
mset key1 value1 key2 value2 ... ------&gt; 同时设置多组值
mget key1 key2 ...
incr key ------&gt; 当key的值为数字时,数值加一
incrby key N ------&gt; 为key的值加N
decr key ------&gt; 减一
decrby key N ------&gt; 减N
getrange key m n ------&gt; 从m取到n
setrange key N value ------&gt; 从n开始用value覆盖key的value值</code></pre><h2 id="2-哈希-hash"><a href="#2-哈希-hash" class="headerlink" title="2.哈希 - hash"></a>2.哈希 - hash</h2><pre><code>hset key field value 设置键和值
hmset key field1 value1 field2 value2 同时设置多个键和值
hget key field  查看指定的键对应的值
hmget key fieldl field2 同时查看多个键和值
hgetall key 获取所有的值和键
hkeys key 获取所有的键
hvals key 获取所有的值
hexists key filed 判断是否存在对应的值</code></pre><h2 id="3-列表-list"><a href="#3-列表-list" class="headerlink" title="3.列表 - list"></a>3.列表 - list</h2><pre><code>lpush list value1 value2 ... 插入到最左边
rpush list value1 value2 ... 插入到最右边
lpop list 取最左边
rpop list 取最右边
lrange list start end 查看列表片段
lindex list index 查看指定下标对应的元素
llen list 列表长度
lrem list count value 删除指定个数的元素</code></pre><h2 id="4-集合-set"><a href="#4-集合-set" class="headerlink" title="4.集合 - set"></a>4.集合 - set</h2><pre><code>sadd set value1 value2 ... 添加元素
srem set value 移除元素
spop set 获取随机元素
smembers set 查看所有元素
sismember set value 查看元素是否在集合内
scard set 查看元素个数
sinter set1 set2 交集
sunion set1 set2 并集
sdiff set1 set2 差集</code></pre><h2 id="5-有序集合-zset-元素自带一个值-可以修改"><a href="#5-有序集合-zset-元素自带一个值-可以修改" class="headerlink" title="5.有序集合 - zset(元素自带一个值,可以修改)"></a>5.有序集合 - zset(元素自带一个值,可以修改)</h2><pre><code>zadd zset score1 mem1 score2 mem2 ... 添加
zrem zset mem 移除
zrange zset start end 按score升序查看
zrevrange zset start end 按score降序查看
zscore zset mem 查看score值
zincrby zset value mem 改变score的值</code></pre><h2 id="6-地理位置-LBS应用-Location-Based-Service-基于位置的服务"><a href="#6-地理位置-LBS应用-Location-Based-Service-基于位置的服务" class="headerlink" title="6.地理位置(LBS应用-Location-Based Service - 基于位置的服务)"></a>6.地理位置(LBS应用-Location-Based Service - 基于位置的服务)</h2><pre><code>geoadd zset longitude1 latitude1 member1 longitude2 latitude2 member2 ...   添加经纬度信息
geopos zset member1 member2 ... 获取指定的位置的经纬度
geodist zset member1 member2 [unit] 计算两点间的距离,默认单位是米,[unit]是单位,可以修改为m,km,mi英里,ft英尺
georadius zset longitude1 latitude1 radius m/km/mi/ft 获取以点zset为圆心,radius为半径的圆的范围内的所有的坐标点;后面加withdist,可同时获取距离,加withcoord,可同时获取点的经纬度</code></pre><h1 id="加密技术"><a href="#加密技术" class="headerlink" title="加密技术"></a>加密技术</h1><p><strong>对称加密 : 加密和解密使用相同的密钥 - AES<br>非对称加密 : 加密和解密使用不同的密钥(公钥和私钥)  -  适合互连网 - RSA</strong></p>
<p><strong>免密操作</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">ssh-keygen</span> <span class="selector-tag">-t</span> <span class="selector-tag">rsa</span> <span class="selector-tag">-b</span> 2048 <span class="selector-tag">-c</span> <span class="selector-tag">anjhon</span><span class="keyword">@163</span>.com   -   生成公钥和私钥</span><br><span class="line">t 指定算法; <span class="selector-tag">b</span> 指定强度; <span class="selector-tag">c</span> 指定邮箱</span><br><span class="line"></span><br><span class="line">进入到<span class="selector-class">.ssh</span>文件,</span><br><span class="line"><span class="selector-tag">id_rsa</span>  <span class="selector-tag">-</span>   私钥</span><br><span class="line"><span class="selector-tag">id_rsa</span><span class="selector-class">.pub</span>  <span class="selector-tag">-</span>   公钥</span><br><span class="line"></span><br><span class="line">将公钥复制到网站的公钥设置</span><br><span class="line"></span><br><span class="line">若有<span class="selector-tag">known-hosts</span>文件,且网站链接不上,直接删除<span class="selector-tag">known-hosts</span>文件</span><br></pre></td></tr></table></figure>



<h1 id="Python中的redis"><a href="#Python中的redis" class="headerlink" title="Python中的redis"></a>Python中的redis</h1><p><strong>连接redis服务器:</strong></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">redis.Redis(<span class="attribute">host</span>=<span class="string">''</span>, <span class="attribute">password</span>=<span class="string">''</span>, <span class="attribute">prot</span>=<span class="string">''</span>)</span><br><span class="line">	host : redis所在服务器公网地址;</span><br><span class="line">	password : 登录口令;</span><br><span class="line"><span class="built_in">	port </span>: redis的服务端口</span><br><span class="line">	</span><br><span class="line">连接时会返回一个连接对象:</span><br><span class="line">redis_cli = redis.Redis(<span class="attribute">host</span>=<span class="string">''</span>, <span class="attribute">password</span>=<span class="string">''</span>, <span class="attribute">prot</span>=<span class="string">''</span>)</span><br><span class="line">使用redis完成相应的操作</span><br></pre></td></tr></table></figure>

<p><strong>python中使用redis的数据类型:</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis   <span class="comment"># 导入redis模块</span></span><br><span class="line"></span><br><span class="line">redis_cli = redis.Redis(host=<span class="string">'10.10.10.10'</span>, password=<span class="string">'123456'</span>, port=<span class="string">'6379'</span>)   <span class="comment"># 连接redis服务器</span></span><br><span class="line"><span class="comment"># print(redis_cli)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> redis_cli.ping():</span><br><span class="line">    <span class="comment"># hash的使用</span></span><br><span class="line">    redis_cli.hmset(<span class="string">'stu1'</span>, &#123;</span><br><span class="line">        <span class="string">'stuname'</span>: <span class="string">'xiaoming'</span>,</span><br><span class="line">        <span class="string">'stuid'</span>: <span class="string">'001'</span>,</span><br><span class="line">        <span class="string">'stusex'</span>: <span class="string">'1'</span>,</span><br><span class="line">        <span class="string">'stuaddr'</span>: <span class="string">'肖家河'</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    print(redis_cli.hget(<span class="string">'stu1'</span>, <span class="string">'stuname'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 有序集合的使用</span></span><br><span class="line">    redis_cli.zadd(<span class="string">'zset1'</span>, &#123;</span><br><span class="line">        <span class="string">'an'</span>: <span class="number">100</span>,</span><br><span class="line">        <span class="string">'yong'</span>: <span class="number">200</span>,</span><br><span class="line">        <span class="string">'duan'</span>: <span class="number">300</span></span><br><span class="line">    &#125;)</span><br><span class="line">    items = redis_cli.zrevrange(<span class="string">'zset1'</span>, <span class="number">0</span>, <span class="number">-1</span>)</span><br><span class="line">    print(list(map(bytes.decode, items)))</span><br><span class="line">    print(redis_cli.zscore(<span class="string">'zset1'</span>, <span class="string">'an'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 列表的使用</span></span><br><span class="line">    redis_cli.rpush(<span class="string">'list1'</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>)</span><br><span class="line">    list1 = redis_cli.lrange(<span class="string">'list1'</span>, <span class="number">0</span>, <span class="number">-1</span>)</span><br><span class="line">    print(list(map(int, list1)))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 字符串的使用</span></span><br><span class="line">    redis_cli.set(<span class="string">'username'</span>, <span class="string">'an'</span>)</span><br><span class="line">    print(redis_cli.ttl(<span class="string">'username'</span>))</span><br><span class="line">    print(redis_cli.get(<span class="string">'username'</span>).decode(<span class="string">'utf-8'</span>))</span><br><span class="line">    redis_cli.set(<span class="string">'user_age'</span>, <span class="string">'25'</span>)</span><br><span class="line">    redis_cli.set(<span class="string">'user_tel'</span>, <span class="string">'133'</span>)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'连接失败'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>扩展:</strong></p>
<pre><code>pip freeze &gt; requirement.txt   将虚拟环境依赖项写入到文件
pip install -r requirement.txt   按照文件安装依赖项

序列化:  把一个对象变成字符串(str)或字节串(bytes)
反序列化:  把字符串或者字节串还原成对象
json.dumps()   序列化(字符串转换成字节串)
json.loads()   反序列化(字节串转换成字符串)
pickle.dumps()   序列化(字符串转换成字节串)
pickle.loads()   反序列化(字节串转换成字符串)</code></pre><p><strong>数据上传redis服务器并从redis获取数据</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name, age, sex, addr)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.age = age</span><br><span class="line">        self.sex = sex</span><br><span class="line">        self.addr = addr</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span><span class="params">(self)</span>:</span>   <span class="comment"># 魔法方法(将数据显示出来)</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">'%s, %d, %s, %s'</span> % (self.name, self.age, self.sex, self.addr)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">stu1 = Student(<span class="string">'小明'</span>, <span class="number">20</span>, <span class="string">'男'</span>, <span class="string">'昆明'</span>)</span><br><span class="line">stu2 = Student(<span class="string">'小黄'</span>, <span class="number">30</span>, <span class="string">'女'</span>, <span class="string">'上海'</span>)</span><br><span class="line"></span><br><span class="line">list1 = [stu1, stu2]   <span class="comment"># 将学生对象添加到列表中</span></span><br><span class="line"></span><br><span class="line">redis_cli = redis.Redis(host=<span class="string">'10.10.10.10'</span>, password=<span class="string">'123456'</span>, port=<span class="string">'6379'</span>)   <span class="comment"># 连接redis服务器</span></span><br><span class="line"><span class="keyword">if</span> redis_cli.ping():</span><br><span class="line">    <span class="comment"># redis_cli.set('student_all', pickle.dumps(list1))   -   将本地的数据添加到redis</span></span><br><span class="line">    redis_stu = pickle.loads(redis_cli.get(<span class="string">'student_all'</span>))   <span class="comment"># 获取redis内的数据并进行反序列化</span></span><br><span class="line">    print(redis_stu)</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'连接失败'</span>)</span><br></pre></td></tr></table></figure>

<p><strong>将redis作为用户请求和数据库之间的缓存介质</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"><span class="keyword">import</span> pickle</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_depts_from_db</span><span class="params">()</span>:</span></span><br><span class="line">    conn = pymysql.connect(   <span class="comment"># 连接本地的MySQL服务器</span></span><br><span class="line">        host=<span class="string">'localhost'</span>,</span><br><span class="line">        port=<span class="number">3306</span>,</span><br><span class="line">        user=<span class="string">'root'</span>,</span><br><span class="line">        password=<span class="string">'123456'</span>,</span><br><span class="line">        charset=<span class="string">'utf8'</span>,</span><br><span class="line">        autocommit=<span class="literal">True</span>,</span><br><span class="line">        database=<span class="string">'hrs'</span></span><br><span class="line">    )</span><br><span class="line">    depts = ()</span><br><span class="line">    <span class="keyword">try</span>:   <span class="comment"># 异常捕获</span></span><br><span class="line">        <span class="keyword">with</span> conn.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            cursor.execute(<span class="string">'select dno, dname, dloc from tb_dept'</span>)   <span class="comment"># 获取数据</span></span><br><span class="line">            depts = cursor.fetchall()</span><br><span class="line">    <span class="keyword">except</span> pymysql.MySQLError <span class="keyword">as</span> err:</span><br><span class="line">        print(err)</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        conn.close()</span><br><span class="line">    <span class="keyword">return</span> depts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    redis_cli = redis.Redis(host=<span class="string">'10.10.10.10'</span>, password=<span class="string">'123456'</span>, port=<span class="string">'6379'</span>)</span><br><span class="line">    start = time.time()</span><br><span class="line">    data = redis_cli.get(<span class="string">'depts'</span>)   <span class="comment"># 获取redis的depts对应的数据</span></span><br><span class="line">    <span class="keyword">if</span> data:</span><br><span class="line">        depts = pickle.loads(data)   <span class="comment"># 若获取到数据,将数据反序列化并保存下来</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        depts = load_depts_from_db()   <span class="comment"># 若没有数据,从数据库获取数据,并将数据保存到redis中,以便下次使用时优先从redis中获取,以减轻服务器的压力并且提高数据获取效率</span></span><br><span class="line">        redis_cli.set(<span class="string">'depts'</span>, pickle.dumps(depts))</span><br><span class="line"></span><br><span class="line">    end = time.time()</span><br><span class="line">    print(depts)</span><br><span class="line">    print(<span class="string">f'执行时间: <span class="subst">&#123;end - start&#125;</span>秒'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>


  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/projects_url">项目</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux服务起停"><span class="toc-number">1.</span> <span class="toc-text">Linux服务起停</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#进程查杀"><span class="toc-number">2.</span> <span class="toc-text">进程查杀</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#redis命令"><span class="toc-number">3.</span> <span class="toc-text">redis命令</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#redis的数据类型"><span class="toc-number">4.</span> <span class="toc-text">redis的数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-字符串-string"><span class="toc-number">4.1.</span> <span class="toc-text">1.字符串 - string</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-哈希-hash"><span class="toc-number">4.2.</span> <span class="toc-text">2.哈希 - hash</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-列表-list"><span class="toc-number">4.3.</span> <span class="toc-text">3.列表 - list</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-集合-set"><span class="toc-number">4.4.</span> <span class="toc-text">4.集合 - set</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-有序集合-zset-元素自带一个值-可以修改"><span class="toc-number">4.5.</span> <span class="toc-text">5.有序集合 - zset(元素自带一个值,可以修改)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-地理位置-LBS应用-Location-Based-Service-基于位置的服务"><span class="toc-number">4.6.</span> <span class="toc-text">6.地理位置(LBS应用-Location-Based Service - 基于位置的服务)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#加密技术"><span class="toc-number">5.</span> <span class="toc-text">加密技术</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Python中的redis"><span class="toc-number">6.</span> <span class="toc-text">Python中的redis</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://anjhon1994.github.io/2019/12/27/radis/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://anjhon1994.github.io/2019/12/27/radis/&text=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://anjhon1994.github.io/2019/12/27/radis/&is_video=false&description=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Redis及其应用&body=Check out this article: https://anjhon1994.github.io/2019/12/27/radis/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://anjhon1994.github.io/2019/12/27/radis/&title=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://anjhon1994.github.io/2019/12/27/radis/&name=Redis及其应用&description=&lt;p&gt;非关系型数据库Redis&lt;br&gt;Redis是为了实现高速缓存服务,减小MySQL数据库的压力&lt;/p&gt;" target="_blank" rel="noopener"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://anjhon1994.github.io/2019/12/27/radis/&t=Redis及其应用" target="_blank" rel="noopener"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2020 Anjhon
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/projects_url">项目</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/ Relative)","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":180,"height":350},"mobile":{"show":false},"react":{"opacityDefault":0.7}});</script></body>
</html>
