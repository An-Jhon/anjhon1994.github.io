<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Djangoæ˜¯é«˜æ°´å‡†çš„Pythonç¼–ç¨‹è¯­è¨€é©±åŠ¨çš„ä¸€ä¸ªå¼€æºæ¡†æ¶">
<meta property="og:type" content="article">
<meta property="og:title" content="Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ">
<meta property="og:url" content="https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/index.html">
<meta property="og:site_name" content="Anjhon&#39;s Blog">
<meta property="og:description" content="Djangoæ˜¯é«˜æ°´å‡†çš„Pythonç¼–ç¨‹è¯­è¨€é©±åŠ¨çš„ä¸€ä¸ªå¼€æºæ¡†æ¶">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/anjhon1994/some_image/blob/master/Django-MTV%E6%A8%A1%E5%BC%8F%E5%9B%BE.png?raw=true">
<meta property="og:image" content="https://github.com/anjhon1994/some_image/blob/master/Django%E8%BF%90%E8%A1%8C%E5%9B%BE.Png?raw=true">
<meta property="article:published_time" content="2020-01-05T12:48:50.000Z">
<meta property="article:modified_time" content="2020-01-12T10:21:54.800Z">
<meta property="article:author" content="Anjhon">
<meta property="article:tag" content="æ¡†æ¶">
<meta property="article:tag" content="åç«¯">
<meta property="article:tag" content="Django">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/anjhon1994/some_image/blob/master/Django-MTV%E6%A8%A1%E5%BC%8F%E5%9B%BE.png?raw=true">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 4.1.1"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="/projects_url">é¡¹ç›®</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2020/01/12/Django%E8%BF%9B%E9%98%B6%E7%94%A8%E6%B3%95/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2019/12/28/%E6%B5%85%E6%B5%85%E6%B5%85%E8%B0%88%E6%95%B0%E6%8D%AE%E5%BA%93/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/" target="_blank" rel="noopener"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&text=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&is_video=false&description=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ&body=Check out this article: https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&name=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ&description=&lt;p&gt;Djangoæ˜¯é«˜æ°´å‡†çš„Pythonç¼–ç¨‹è¯­è¨€é©±åŠ¨çš„ä¸€ä¸ªå¼€æºæ¡†æ¶&lt;/p&gt;" target="_blank" rel="noopener"><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&t=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ä¸€ä¸¶Djangoç®€è¿°"><span class="toc-number">1.</span> <span class="toc-text">ä¸€ä¸¶Djangoç®€è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹"><span class="toc-number">1.1.</span> <span class="toc-text">Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ"><span class="toc-number">2.</span> <span class="toc-text">äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®"><span class="toc-number">2.1.</span> <span class="toc-text">1. åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ç®€å•çš„æ–‡ä»¶é…ç½®"><span class="toc-number">2.2.</span> <span class="toc-text">2. ç®€å•çš„æ–‡ä»¶é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¾ç½®è¯­è¨€æ—¶åŒº"><span class="toc-number">2.2.1.</span> <span class="toc-text">è®¾ç½®è¯­è¨€æ—¶åŒº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„"><span class="toc-number">2.2.2.</span> <span class="toc-text">è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-åˆ›å»ºDjangoåº”ç”¨"><span class="toc-number">2.3.</span> <span class="toc-text">3. åˆ›å»ºDjangoåº”ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢"><span class="toc-number">2.4.</span> <span class="toc-text">4. è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢?</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ"><span class="toc-number">3.</span> <span class="toc-text">ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ç¯å¢ƒå‡†å¤‡"><span class="toc-number">3.1.</span> <span class="toc-text">1.  ç¯å¢ƒå‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-åˆ›å»ºæ•°æ®æ¨¡å‹"><span class="toc-number">3.2.</span> <span class="toc-text">2. åˆ›å»ºæ•°æ®æ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆ›å»ºæ•°æ®æ¨¡å‹"><span class="toc-number">3.2.1.</span> <span class="toc-text">åˆ›å»ºæ•°æ®æ¨¡å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼"><span class="toc-number">3.2.2.</span> <span class="toc-text">å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¿œç«¯æ•°æ®åº“è®¾ç½®"><span class="toc-number">3.2.3.</span> <span class="toc-text">è¿œç«¯æ•°æ®åº“è®¾ç½®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-åå°ç®¡ç†"><span class="toc-number">3.3.</span> <span class="toc-text">3. åå°ç®¡ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ç½‘é¡µæˆå‹"><span class="toc-number">3.4.</span> <span class="toc-text">4. ç½‘é¡µæˆå‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-å†è¡¥å……ä¸€ç‚¹"><span class="toc-number">3.5.</span> <span class="toc-text">5. å†è¡¥å……ä¸€ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cookieå’Œsessionçš„å…³ç³»"><span class="toc-number">3.5.1.</span> <span class="toc-text">cookieå’Œsessionçš„å…³ç³»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç¼–ç å°çŸ¥è¯†"><span class="toc-number">3.5.2.</span> <span class="toc-text">ç¼–ç å°çŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#BASE64ç¼–ç "><span class="toc-number">3.5.2.1.</span> <span class="toc-text">BASE64ç¼–ç </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç™¾åˆ†å·ç¼–ç -Urlç¼–ç "><span class="toc-number">3.5.2.2.</span> <span class="toc-text">ç™¾åˆ†å·ç¼–ç (Urlç¼–ç )</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¸¸ç”¨çŸ¥è¯†ç‚¹"><span class="toc-number">3.5.2.3.</span> <span class="toc-text">å¸¸ç”¨çŸ¥è¯†ç‚¹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-æœ€åå°ç»“"><span class="toc-number">3.6.</span> <span class="toc-text">6. æœ€åå°ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#é¡¹ç›®æµç¨‹"><span class="toc-number">3.6.1.</span> <span class="toc-text">é¡¹ç›®æµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç‰ˆæœ¬æ§åˆ¶"><span class="toc-number">3.6.2.</span> <span class="toc-text">ç‰ˆæœ¬æ§åˆ¶</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Anjhon's Blog</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-01-05T12:48:50.000Z" itemprop="datePublished">2020-01-05</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Django/">Django</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/Django/" rel="tag">Django</a>, <a class="tag-link" href="/tags/%E5%90%8E%E7%AB%AF/" rel="tag">åç«¯</a>, <a class="tag-link" href="/tags/%E6%A1%86%E6%9E%B6/" rel="tag">æ¡†æ¶</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>Djangoæ˜¯é«˜æ°´å‡†çš„Pythonç¼–ç¨‹è¯­è¨€é©±åŠ¨çš„ä¸€ä¸ªå¼€æºæ¡†æ¶</p>
<a id="more"></a>


<h1 id="ä¸€ä¸¶Djangoç®€è¿°"><a href="#ä¸€ä¸¶Djangoç®€è¿°" class="headerlink" title="ä¸€ä¸¶Djangoç®€è¿°"></a>ä¸€ä¸¶Djangoç®€è¿°</h1><p>Django æœ€åˆç”±2003å¹´åˆ°2005å¹´é—´ç”±è´Ÿè´£åˆ›å»ºå’Œç»´æŠ¤æŠ¥çº¸ç½‘ç«™çš„ç½‘ç»œå›¢é˜Ÿå¼€å‘ã€‚å®ƒæ˜¯ä¸€ä¸ªé«˜çº§çš„ Python ç½‘ç»œæ¡†æ¶ï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘å®‰å…¨å’Œå¯ç»´æŠ¤çš„ç½‘ç«™ã€‚</p>
<h2 id="Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹"><a href="#Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹" class="headerlink" title="Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹"></a>Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹</h2><p>åœ¨ä¼ ç»Ÿçš„æ•°æ®é©±åŠ¨ç½‘ç«™ä¸­ï¼ŒWebåº”ç”¨ç¨‹åºä¼šç­‰å¾…æ¥è‡ªWebæµè§ˆå™¨ï¼ˆæˆ–å…¶ä»–å®¢æˆ·ç«¯ï¼‰çš„ HTTP è¯·æ±‚ã€‚å½“æ¥æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œåº”ç”¨ç¨‹åºæ ¹æ® URL å’Œå¯èƒ½çš„ POST æ•°æ®æˆ– GET æ•°æ®ä¸­çš„ä¿¡æ¯ç¡®å®šéœ€è¦çš„å†…å®¹ã€‚æ ¹æ®éœ€è¦ï¼Œå¯ä»¥ä»æ•°æ®åº“è¯»å–æˆ–å†™å…¥ä¿¡æ¯ï¼Œæˆ–æ‰§è¡Œæ»¡è¶³è¯·æ±‚æ‰€éœ€çš„å…¶ä»–ä»»åŠ¡ã€‚ç„¶åï¼Œè¯¥åº”ç”¨ç¨‹åºå°†è¿”å›å¯¹Webæµè§ˆå™¨çš„å“åº”ï¼Œé€šå¸¸é€šè¿‡å°†æ£€ç´¢åˆ°çš„æ•°æ®æ’å…¥ HTMLæ¨¡æ¿ä¸­çš„å ä½ç¬¦æ¥åŠ¨æ€åˆ›å»ºç”¨äºæµè§ˆå™¨æ˜¾ç¤ºçš„ HTML é¡µé¢ã€‚</p>
<p>MVCæ¶æ„æ¨¡å¼<br>æ¶æ„è§„èŒƒ: æ•°æ®å’Œæ˜¾ç¤ºè¦åˆ†ç¦»(æ¨¡å‹å’Œè§†å›¾è§£è€¦åˆ)<br>åŒä¸€ä¸ªæ¨¡å‹å¯ä»¥æ¸²æŸ“æˆä¸åŒçš„è§†å›¾,åŒä¸€ä¸ªè§†å›¾å¯ä»¥åŠ è½½ä¸åŒçš„æ¨¡å‹</p>
<figure class="highlight brainfuck"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">M</span>   --<span class="literal">-</span>&gt;   <span class="comment">model</span>          --<span class="literal">-</span>&gt;   <span class="comment">æ¨¡å‹</span>     --<span class="literal">-</span>&gt;   <span class="comment">æ•°æ®</span></span><br><span class="line"><span class="comment">V</span>   --<span class="literal">-</span>&gt;   <span class="comment">View</span>           --<span class="literal">-</span>&gt;   <span class="comment">è§†å›¾</span>     --<span class="literal">-</span>&gt;   <span class="comment">æ•°æ®æ˜¾ç¤º</span></span><br><span class="line"><span class="comment">C</span>   --<span class="literal">-</span>&gt;   <span class="comment">Contyoller</span>     --<span class="literal">-</span>&gt;   <span class="comment">æ§åˆ¶å™¨</span>    --<span class="literal">-</span>&gt;   <span class="comment">è¿æ¥æ•°æ®å’Œæ˜¾ç¤ºçš„ä¸­é—´å•†</span></span><br></pre></td></tr></table></figure>

<p>Django (MTVæ¶æ„æ¨¡å¼)ç½‘ç»œåº”ç”¨ç¨‹åºé€šå¸¸å°†å¤„ç†æ¯ä¸ªæ­¥éª¤çš„ä»£ç åˆ†ç»„åˆ°å•ç‹¬çš„æ–‡ä»¶ä¸­;å¦‚å›¾æ‰€ç¤º:</p>
<p><img src="https://github.com/anjhon1994/some_image/blob/master/Django-MTV%E6%A8%A1%E5%BC%8F%E5%9B%BE.png?raw=true" alt="DjangoMTVæ¶æ„"></p>
<p>ğŸ“Œ URLæ˜ å°„å™¨ç”¨äºæ ¹æ®è¯·æ±‚URLå°†HTTPè¯·æ±‚é‡å®šå‘åˆ°ç›¸åº”çš„è§†å›¾ã€‚URLæ˜ å°„å™¨è¿˜å¯ä»¥åŒ¹é…å‡ºç°åœ¨URLä¸­çš„å­—ç¬¦ä¸²æˆ–æ•°å­—çš„ç‰¹å®šæ¨¡å¼ï¼Œå¹¶å°†å…¶ä½œä¸ºæ•°æ®ä¼ é€’ç»™è§†å›¾åŠŸèƒ½ã€‚<br>ğŸ“Œ View:  è§†å›¾ æ˜¯ä¸€ä¸ªè¯·æ±‚å¤„ç†å‡½æ•°ï¼Œå®ƒæ¥æ”¶HTTPè¯·æ±‚å¹¶è¿”å›HTTPå“åº”ã€‚è§†å›¾é€šè¿‡æ¨¡å‹è®¿é—®æ»¡è¶³è¯·æ±‚æ‰€éœ€çš„æ•°æ®ï¼Œå¹¶å°†å“åº”çš„æ ¼å¼å§”æ‰˜ç»™  æ¨¡æ¿ã€‚<br>ğŸ“Œ Models:  æ¨¡å‹ æ˜¯å®šä¹‰åº”ç”¨ç¨‹åºæ•°æ®ç»“æ„çš„Pythonå¯¹è±¡ï¼Œå¹¶æä¾›åœ¨æ•°æ®åº“ä¸­ç®¡ç†ï¼ˆæ·»åŠ ï¼Œä¿®æ”¹ï¼Œåˆ é™¤ï¼‰å’ŒæŸ¥è¯¢è®°å½•çš„æœºåˆ¶ã€‚<br>ğŸ“Œ Templates: æ¨¡æ¿ æ˜¯å®šä¹‰æ–‡ä»¶ï¼ˆä¾‹å¦‚HTMLé¡µé¢ï¼‰çš„ç»“æ„æˆ–å¸ƒå±€çš„æ–‡æœ¬æ–‡ä»¶ï¼Œç”¨äºè¡¨ç¤ºå®é™…å†…å®¹çš„å ä½ç¬¦ã€‚ä¸€ä¸ªè§†å›¾å¯ä»¥ä½¿ç”¨HTMLæ¨¡æ¿ï¼Œä»æ•°æ®å¡«å……å®ƒåŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªHTMLé¡µé¢æ¨¡å‹ã€‚å¯ä»¥ä½¿ç”¨æ¨¡æ¿æ¥å®šä¹‰ä»»ä½•ç±»å‹çš„æ–‡ä»¶çš„ç»“æ„; å®ƒä¸ä¸€å®šæ˜¯HTMLï¼</p>
<br>
<hr>

<h1 id="äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ"><a href="#äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ" class="headerlink" title="äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ"></a>äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ</h1><h2 id="1-åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®"><a href="#1-åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®" class="headerlink" title="1. åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®"></a>1. åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®</h2><p>åˆ›å»ºDjangoé¡¹ç›®çš„æ–¹å¼å¾ˆå¤š,è¿™é‡Œç®€å•ä»‹ç»ä¸‰ç§</p>
  <!-- tab æ–¹æ³•ä¸€ -->
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">   django-admin   -   djangoåŒ…ç®¡ç†å‘˜å·¥å…·</span><br><span class="line"></span><br><span class="line">1. åœ¨å‘½ä»¤æç¤ºç¬¦å†…(æˆ‘ç”¨äº†Git)è¾“å…¥</span><br><span class="line">	~ django-admin startproject polls   # åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®</span><br><span class="line">2. ä½¿ç”¨PyCharmæ‰“å¼€é¡¹ç›®å¹¶åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">	~ cd polls   # è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹</span><br><span class="line">	~ python3 -m venv venv   # æ–°å»ºè™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">	~ source venv/bin/activate   # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ</span><br><span class="line">3. å®‰è£…é¡¹ç›®ä¾èµ–é¡¹:</span><br><span class="line">	æ‰“å¼€Pycharmåº•éƒ¨çš„Terminal,è¾“å…¥</span><br><span class="line">	~ pip install django mysqlclient django-redis pillow requests</span><br><span class="line">	ä½¿ç”¨pipå®‰è£…ä¸‰æ–¹åº“æ—¶ï¼Œå¯ä»¥é€šè¿‡å¦‚<span class="attribute">django</span>==1.11.27çš„æ–¹å¼æ¥æŒ‡å®šä¸‰æ–¹åº“çš„ç‰ˆæœ¬ã€‚</span><br><span class="line">4. è¿è¡Œdjangoé¡¹ç›®</span><br><span class="line">	~ python manage.py runserver</span><br><span class="line">	~ python manage.py runserver 127.0.0.1:80   # æŒ‡å®šç«¯å£ä¸º80</span><br><span class="line">5. æ·»åŠ é¡¹ç›®è¿è¡Œå¿«æ·æ–¹å¼</span><br><span class="line">	<span class="builtin-name">Add</span> Configuration  ---&gt;  +  ---&gt;  Python  ---&gt; <span class="built_in"> Script </span>Path (manage.py)  --&gt;  Parameters (runserver)</span><br></pre></td></tr></table></figure>
  <!-- endtab -->
  <!-- tab æ–¹æ³•äºŒ -->
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> ç”¨PyCharmåˆ›å»ºä¸€ä¸ªæ™®é€šçš„Pythoné¡¹ç›®</span><br><span class="line"><span class="number">2.</span> å®‰è£…Djangoæ‰€éœ€çš„ä¾èµ–é¡¹</span><br><span class="line">    ~ pip install django==<span class="number">2.1</span><span class="number">.14</span> -i https:<span class="comment">//pypi.doubanio.com/simple</span></span><br><span class="line"><span class="number">3.</span> æŠŠPythoné¡¹ç›®å˜æˆDjangoé¡¹ç›®</span><br><span class="line">    ~ django-admin startproject polls .</span><br><span class="line"><span class="number">4.</span> è¿è¡Œé¡¹ç›®</span><br><span class="line">	~ python manage.py runserver</span><br></pre></td></tr></table></figure>
  <!-- endtab -->
  <!-- tab æ–¹æ³•ä¸‰ -->
<figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">å­˜åœ¨è¿œç«¯ä»“åº“æ—¶éœ€è¦å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°</span><br><span class="line"><span class="number">1</span>. å…‹éš†</span><br><span class="line">    ä½¿ç”¨PyCharmæ–°å»ºé¡µé¢çš„<span class="string">"get from version control"</span></span><br><span class="line">    ~ git <span class="keyword">clone</span> <span class="title">git</span>@gitee.com:anjhon/polls.git   <span class="comment"># åœ°å€éœ€è¦è‡ªè¡Œæ›´æ¢</span></span><br><span class="line"><span class="number">2</span>. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ(é¡¹ç›®ä¸­ä¸€èˆ¬ä¸ä¼šå°†è™šæ‹Ÿç¯å¢ƒçº³å…¥ç‰ˆæœ¬æ§åˆ¶)</span><br><span class="line">    ~ Linux/macOS: source venv/bin/activate</span><br><span class="line">    ~ Windows: <span class="string">"venv/Scripts/activate"</span></span><br><span class="line"><span class="number">3</span>. é‡å»ºä¾èµ–é¡¹</span><br><span class="line">    ~ pip install -r requirements.txt   <span class="comment"># requirementsæ–‡ä»¶ä¸ºä¾èµ–é¡¹æ¸…å•</span></span><br></pre></td></tr></table></figure>
  <!-- endtab -->


<p>åˆ›å»ºå¥½æ–°é¡¹ç›®ä¹‹åå°±èƒ½çœ‹åˆ°é£å‡çš„å°ç«ç®­äº†</p>
<p><img src="https://github.com/anjhon1994/some_image/blob/master/Django%E8%BF%90%E8%A1%8C%E5%9B%BE.Png?raw=true" alt="è¿è¡Œå›¾"></p>
<h2 id="2-ç®€å•çš„æ–‡ä»¶é…ç½®"><a href="#2-ç®€å•çš„æ–‡ä»¶é…ç½®" class="headerlink" title="2. ç®€å•çš„æ–‡ä»¶é…ç½®"></a>2. ç®€å•çš„æ–‡ä»¶é…ç½®</h2><h3 id="è®¾ç½®è¯­è¨€æ—¶åŒº"><a href="#è®¾ç½®è¯­è¨€æ—¶åŒº" class="headerlink" title="è®¾ç½®è¯­è¨€æ—¶åŒº"></a>è®¾ç½®è¯­è¨€æ—¶åŒº</h3><figure class="highlight diff"><figcaption><span>polls/setting.py </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">- LANGUAGE_CODE = 'en-us'</span></span><br><span class="line"><span class="addition">+ LANGUAGE_CODE = 'zh-hans'</span></span><br><span class="line"><span class="deletion">- TIME_ZONE = 'UTC'</span></span><br><span class="line"><span class="addition">+ TIME_ZONE = 'Asia/Chongqing'</span></span><br></pre></td></tr></table></figure>

<h3 id="è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„"><a href="#è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„" class="headerlink" title="è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„"></a>è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„</h3><figure class="highlight diff"><figcaption><span>polls/setting.py </span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATES = [</span><br><span class="line">    &#123;</span><br><span class="line">        'BACKEND': 	'django.template.backends.django.DjangoTemplates',</span><br><span class="line"><span class="deletion">-       'DIRS': [],</span></span><br><span class="line"><span class="addition">+       'DIRS': [os.path.join(BASE_DIR, 'templates')],</span></span><br><span class="line">        'APP_DIRS': True,</span><br><span class="line">	...</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="3-åˆ›å»ºDjangoåº”ç”¨"><a href="#3-åˆ›å»ºDjangoåº”ç”¨" class="headerlink" title="3. åˆ›å»ºDjangoåº”ç”¨"></a>3. åˆ›å»ºDjangoåº”ç”¨</h2><p>åœ¨æ§åˆ¶å°è¾“å…¥:</p>
<figure class="highlight haml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">æ–¹æ³•ä¸€</span><br><span class="line">~ python manage.py startapp app</span><br><span class="line">æ–¹æ³•äºŒ</span><br><span class="line">~ django-admin startapp app</span><br><span class="line">åœ¨æ–°å»ºå¥½çš„åº”ç”¨æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºtemplatesæ–‡ä»¶å¤¹(ç”¨æ¥å­˜æ”¾å‰ç«¯é¡µé¢)</span><br></pre></td></tr></table></figure>
<p>åˆ›å»ºå¥½åº”ç”¨å,åº”ç”¨æ–‡ä»¶å¤¹è§†å›¾å¦‚ä¸‹:</p>
<figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- <span class="string">app</span></span><br><span class="line"><span class="string"> </span>    |<span class="built_in">--migrations</span></span><br><span class="line"><span class="built_in"></span>     |		|<span class="built_in">--__init__.py</span>   <span class="comment"># ä¸€ä¸ªç©ºæ–‡ä»¶ï¼Œå‘Šè¯‰Pythonè§£é‡Šå™¨è¿™ä¸ªç›®å½•åº”è¯¥è¢«è§†ä¸ºä¸€ä¸ªPythonçš„åŒ…ã€‚</span></span><br><span class="line">     |<span class="built_in">--__init__.py</span>   </span><br><span class="line">     |<span class="built_in">--admin.py</span>   <span class="comment"># å¯ä»¥ç”¨æ¥æ³¨å†Œæ¨¡å‹ï¼Œç”¨äºåœ¨Djangoçš„ç®¡ç†ç•Œé¢ç®¡ç†æ¨¡å‹ã€‚</span></span><br><span class="line">     |<span class="built_in">--apps.py</span>   <span class="comment"># å½“å‰åº”ç”¨çš„é…ç½®æ–‡ä»¶ã€‚</span></span><br><span class="line">     |<span class="built_in">--models.py</span>   <span class="comment"># å­˜æ”¾åº”ç”¨çš„æ•°æ®æ¨¡å‹ï¼Œå³å®ä½“ç±»åŠå…¶ä¹‹é—´çš„å…³ç³»ï¼ˆMVC/MTVä¸­çš„Mï¼‰ã€‚</span></span><br><span class="line">     |<span class="built_in">--tests.py</span>   <span class="comment"># åŒ…å«æµ‹è¯•åº”ç”¨å„é¡¹åŠŸèƒ½çš„æµ‹è¯•ç±»å’Œæµ‹è¯•å‡½æ•°ã€‚</span></span><br><span class="line">     |<span class="built_in">--views.py</span>   <span class="comment"># å¤„ç†è¯·æ±‚å¹¶è¿”å›å“åº”çš„å‡½æ•°ï¼ˆMVCä¸­çš„Cï¼ŒMTVä¸­çš„Vï¼‰ã€‚</span></span><br></pre></td></tr></table></figure>
<p>æœ€ååˆ«å¿˜äº†é…ç½®ä¸€ä¸‹æ–°å»ºçš„åº”ç”¨</p>
<figure class="highlight diff"><figcaption><span>polls/setting.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    'django.contrib.admin',</span><br><span class="line">    'django.contrib.auth',</span><br><span class="line">    'django.contrib.contenttypes',</span><br><span class="line">    'django.contrib.sessions',</span><br><span class="line">    'django.contrib.messages',</span><br><span class="line">    'django.contrib.staticfiles',</span><br><span class="line"><span class="addition">+   'polls',</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="4-è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢"><a href="#4-è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢" class="headerlink" title="4. è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢?"></a>4. è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢?</h2><p>ç¬¬ä¸€æ­¥: é…ç½®urlæ§åˆ¶å™¨</p>
<figure class="highlight diff"><figcaption><span>polls/urls.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path</span><br><span class="line">from app.views import index   # è¿™é‡Œå¯¼å…¥äº†è§†å›¾é‡Œçš„å‡½æ•°index</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path('admin/', admin.site.urls),</span><br><span class="line"><span class="addition">+   path('', index)   # è¿™é‡Œè°ƒç”¨äº†è§†å›¾é‡Œçš„å‡½æ•°index</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒéƒ¨: å†™è§†å›¾å‡½æ•°</p>
<figure class="highlight diff"><figcaption><span>app/views.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">from random import sample</span><br><span class="line">from django.http import HttpRequest</span><br><span class="line">from django.shortcuts import render</span><br><span class="line"></span><br><span class="line">def index(request: HttpRequest):   # å®šä¹‰ä¸€ä¸ªindexå‡½æ•°</span><br><span class="line">    musics = ['åš£å¼ ', 'è®©ä¸–é—´ç¾å¥½ä¸ä½ ç¯ç¯ç›¸æ‰£', 'æ— é—®', 'è†¨èƒ€', 'é‡å­©å­', 'æµ·é˜”å¤©ç©º', 'çˆ±æƒ…ä¹°å–', 'å¿«ä¹ç”·å­©', ]</span><br><span class="line">    context = &#123;</span><br><span class="line">        'musics': sample(musics, 3),</span><br><span class="line">        'greeting': 'Hello, Django'</span><br><span class="line">    &#125;</span><br><span class="line">    return render(request, "index.html", context)   # è¿”å›äº†ä¸€ä¸ªhtmlé¡µé¢</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ­¥: ç¼–å†™å‰ç«¯æ¨¡æ¿é¡µ</p>
<figure class="highlight diff"><figcaption><span>templates/index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;é¦–é¡µ&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; greeting &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;hr/&gt;</span><br><span class="line">&lt;!--    djangoæ¨¡æ¿é¡µ,å¯ä»¥ä½¿ç”¨djangoæ¨¡æ¿è¯­æ³•å’Œæ¨¡æ¿æŒ‡ä»¤ç”ŸæˆåŠ¨æ€å†…å®¹  --&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &#123;% for music in musics %&#125;</span><br><span class="line">        &lt;li&gt;&#123;&#123; music &#125;&#125;&lt;/li&gt;</span><br><span class="line">        &#123;% endfor %&#125;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>å¥½äº†,ä¸€ä¸ªç®€å•çš„ç½‘é¡µäº§ç”Ÿäº†!</p>
<br>
<hr>

<h1 id="ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ"><a href="#ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ" class="headerlink" title="ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ"></a>ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ</h1><p>é‚“çˆ·çˆ·è¯´: å®è·µæ‰æ˜¯æ£€éªŒçœŸç†çš„å”¯ä¸€æ ‡å‡†</p>
<p>åœ¨ç¬¬äºŒèŠ‚æˆ‘ä»¬å®ç°äº†ç®€å•ç½‘é¡µ,ä½†æ˜¯åªæ˜¯ç”¨åˆ°äº†è§†å›¾å’Œæ¨¡æ¿,å¹¶æ²¡æœ‰æ¶‰åŠåˆ°æ•°æ®; è¦çŸ¥é“,åœ¨çœŸæ­£çš„é¡¹ç›®ä¸­,è¿™æ˜¯ä¸å¯èƒ½å­˜åœ¨çš„,æ‰€ä»¥æœ¬èŠ‚æˆ‘ä»¬å°†é€šè¿‡å®æ“ä¸€ä¸ªå°å‹çš„é¡¹ç›®æ¥å¸¦å¤§å®¶å¿«é€Ÿç†Ÿæ‚‰Djangoæ¡†æ¶</p>
<h2 id="1-ç¯å¢ƒå‡†å¤‡"><a href="#1-ç¯å¢ƒå‡†å¤‡" class="headerlink" title="1.  ç¯å¢ƒå‡†å¤‡"></a>1.  ç¯å¢ƒå‡†å¤‡</h2><p>â‘ : å®‰è£…Pythonæ“ä½œMySQLçš„ä¾èµ–åº“</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ pip <span class="keyword">install</span> pymysql</span><br></pre></td></tr></table></figure>

<p>â‘¡: è®¾ç½®æ•°æ®åº“è¿æ¥å‚æ•°</p>
<figure class="highlight diff"><figcaption><span>polls/setting.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    'default': &#123;</span><br><span class="line"><span class="deletion">-       'ENGINE': 'django.db.backends.sqlite3',</span></span><br><span class="line"><span class="addition">+       'ENGINE': 'django.db.backends.mysql',</span></span><br><span class="line"><span class="deletion">-       'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),</span></span><br><span class="line"><span class="addition">+       'NAME': 'anjhon',</span></span><br><span class="line"><span class="addition">+       'HOST': '0.0.0.0',   # è¿™é‡Œåœ°å€éœ€è¦è‡ªè¡Œæ›´æ”¹,å¯ä»¥è¿æ¥æœ¬åœ°æ•°æ®åº“,å‚æ•°ä¸º:localhost</span></span><br><span class="line"><span class="addition">+       'PORT': 3306,</span></span><br><span class="line"><span class="addition">+       'USER': 'anjhon',</span></span><br><span class="line"><span class="addition">+       'PASSWORD': '123456',</span></span><br><span class="line"><span class="addition">+       'CHARSET': 'utf8',</span></span><br><span class="line"><span class="addition">+       'TIME_ZONE': 'Asia/Chongqing',</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-åˆ›å»ºæ•°æ®æ¨¡å‹"><a href="#2-åˆ›å»ºæ•°æ®æ¨¡å‹" class="headerlink" title="2. åˆ›å»ºæ•°æ®æ¨¡å‹"></a>2. åˆ›å»ºæ•°æ®æ¨¡å‹</h2><h3 id="åˆ›å»ºæ•°æ®æ¨¡å‹"><a href="#åˆ›å»ºæ•°æ®æ¨¡å‹" class="headerlink" title="åˆ›å»ºæ•°æ®æ¨¡å‹"></a>åˆ›å»ºæ•°æ®æ¨¡å‹</h3><figure class="highlight diff"><figcaption><span>app/models.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">from django.db import models</span><br><span class="line"></span><br><span class="line">class Subject(models.Model):</span><br><span class="line">    """å­¦ç§‘æ¨¡å‹ç±»"""</span><br><span class="line">    nums = models.AutoField(primary_key=True, verbose_name='ç¼–å·')   # è‡ªå¢,ä¸»é”®</span><br><span class="line">    name = models.CharField(max_length=20, verbose_name='åç§°')   # 20é•¿åº¦çš„å­—ç¬¦ä¸²</span><br><span class="line">    intro = models.CharField(max_length=1000, verbose_name='ä»‹ç»')   # 1000é•¿åº¦çš„å­—ç¬¦ä¸²</span><br><span class="line">    is_hot = models.BooleanField(default=False, verbose_name='æ˜¯å¦çƒ­é—¨')</span><br><span class="line"></span><br><span class="line">    def __str__(self):</span><br><span class="line">        return self.name</span><br><span class="line"></span><br><span class="line">    class Meta:</span><br><span class="line">        db_table = 'tb_subject'</span><br><span class="line">        verbose_name = 'å­¦ç§‘'</span><br><span class="line">        verbose_name_plural = 'å­¦ç§‘'</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class Teacher(models.Model):</span><br><span class="line">    """è€å¸ˆæ¨¡å‹"""</span><br><span class="line">    nums = models.AutoField(primary_key=True, verbose_name='æ•™å¸ˆç¼–å·')</span><br><span class="line">    name = models.CharField(max_length=20, verbose_name='æ•™å¸ˆå§“å')</span><br><span class="line">    sex = models.BooleanField(default=True, verbose_name='æ€§åˆ«')</span><br><span class="line">    birth = models.DateField(verbose_name='æ•™å¸ˆç”Ÿæ—¥')</span><br><span class="line">    photo = models.ImageField(upload_to='images', default='', max_length=512, verbose_name='å¤´åƒ')</span><br><span class="line">    intro = models.CharField(default='', max_length=1000, verbose_name='æ•™å¸ˆä»‹ç»')</span><br><span class="line">    good_count = models.PositiveIntegerField(default=0, verbose_name='å¥½è¯„æ•°')</span><br><span class="line">    bad_count = models.IntegerField(default=0, verbose_name='å·®è¯„æ•°')</span><br><span class="line">    subject  = models.ForeignKey(to=Subject, on_delete=models.PROTECT, db_column='snums', verbose_name='æ‰€å±å­¦ç§‘')   # è¯¥æ•™å¸ˆå­¦ç§‘çš„åå­—</span><br><span class="line"></span><br><span class="line">    class Meta:   # å…ƒä¿¡æ¯,å…ƒæ•°æ®(æè¿°æ•°æ®çš„æ•°æ®)</span><br><span class="line">        db_table = 'tb_teacher'</span><br><span class="line">        verbose_name = 'æ•™å¸ˆ'</span><br><span class="line">        verbose_name_plural = 'æ•™å¸ˆ'</span><br></pre></td></tr></table></figure>

<p>å‚æ•°å°ç»“:<br>    IntegerField   å¯¹åº”æ•°æ®åº“ä¸­çš„integerç±»å‹ï¼Œ<br>    CharField   å¯¹åº”æ•°æ®åº“çš„varcharç±»å‹ï¼Œ<br>    DecimalField   å¯¹åº”æ•°æ®åº“çš„decimalç±»å‹ï¼Œ<br>    ForeignKey   ç”¨æ¥å»ºç«‹å¤šå¯¹ä¸€å¤–é”®å…³è”ã€‚<br>    primary_key   ç”¨äºè®¾ç½®ä¸»é”®ï¼Œ<br>    max_length   ç”¨æ¥è®¾ç½®å­—æ®µçš„æœ€å¤§é•¿åº¦ï¼Œ<br>    db_column   ç”¨æ¥è®¾ç½®æ•°æ®åº“ä¸­ä¸å­—æ®µå¯¹åº”çš„åˆ—ï¼Œ<br>    verbose_name   åˆ™è®¾ç½®äº†Djangoåå°ç®¡ç†ç³»ç»Ÿä¸­è¯¥å­—æ®µæ˜¾ç¤ºçš„åç§°ã€‚</p>
<h3 id="å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼"><a href="#å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼" class="headerlink" title="å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼"></a>å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼</h3><figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># ç”Ÿæˆè¿ç§»æ–‡ä»¶</span><br><span class="line">~ python manage.py makemigrations polls</span><br><span class="line"># æ‰§è¡Œè¿ç§»</span><br><span class="line">~ python manage.py migrate</span><br></pre></td></tr></table></figure>
<p>åˆ°è¿™ä¸€æ­¥,æˆ‘ä»¬çš„æ•°æ®åº“é‡Œå°±å·²ç»ç”Ÿæˆå¥½äº†å­¦ç§‘å’Œè€å¸ˆçš„æ•°æ®è¡¨æ ¼,è¿™æ—¶æˆ‘ä»¬éœ€è¦è¿›å…¥åˆ°Djangoè‡ªå¸¦çš„åå°ç®¡ç†ç³»ç»Ÿ,ç®¡ç†æ•°æ®;</p>
<p>æ‰©å±•:<br>æ•°æ®è¡¨å»ºå¥½ä»¥å,åå‘å»ºæ¨¡å‹åˆ°models.pyæ–‡ä»¶:</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">python</span> manage.<span class="keyword">py</span> inspectdb &gt; common/models.<span class="keyword">py</span></span><br></pre></td></tr></table></figure>

<h3 id="è¿œç«¯æ•°æ®åº“è®¾ç½®"><a href="#è¿œç«¯æ•°æ®åº“è®¾ç½®" class="headerlink" title="è¿œç«¯æ•°æ®åº“è®¾ç½®"></a>è¿œç«¯æ•°æ®åº“è®¾ç½®</h3><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">create database djangocase default charset utf8 collate utf8_bin;   ---&gt;   åˆ›å»ºæ•°æ®åº“</span><br><span class="line">grant all privileges on djangocase.<span class="symbol">*</span> to 'anjhon'<span class="meta">@'%';</span>   ---&gt;   ç»™ç”¨æˆ·æƒé™</span><br><span class="line"></span><br><span class="line">(venv) C:\djangocase&gt;</span><br><span class="line">    python manage.py migrate   ---&gt;   æ‰§è¡Œè¿ç§»</span><br><span class="line"></span><br><span class="line">use djangocase;   ---&gt;   åˆ‡æ¢æ•°æ®åº“</span><br><span class="line">show tables;   ---&gt;   æ˜¾ç¤ºè¡¨æ ¼</span><br><span class="line">+----------------------------+</span><br><span class="line">|<span class="string"> Tables_in_djangocase       </span>|</span><br><span class="line">+----------------------------+</span><br><span class="line">|<span class="string"> auth_group                 </span>|</span><br><span class="line">|<span class="string"> auth_group_permissions     </span>|</span><br><span class="line">|<span class="string"> auth_permission            </span>|</span><br><span class="line">|<span class="string"> auth_user                  </span>|</span><br><span class="line">|<span class="string"> auth_user_groups           </span>|</span><br><span class="line">|<span class="string"> auth_user_user_permissions </span>|</span><br><span class="line">|<span class="string"> django_admin_log           </span>|</span><br><span class="line">|<span class="string"> django_content_type        </span>|</span><br><span class="line">|<span class="string"> django_migrations          </span>|</span><br><span class="line">|<span class="string"> django_session             </span>|</span><br><span class="line">|<span class="string"> jet_bookmark               </span>|</span><br><span class="line">|<span class="string"> jet_pinnedapplication      </span>|</span><br><span class="line">+----------------------------+</span><br><span class="line">12 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">(venv) C:\polls&gt;</span><br><span class="line">	python manage.py createsuperuser   ---&gt;   åˆ›å»ºè¶…çº§ç®¡ç†å‘˜</span><br></pre></td></tr></table></figure>

<h2 id="3-åå°ç®¡ç†"><a href="#3-åå°ç®¡ç†" class="headerlink" title="3. åå°ç®¡ç†"></a>3. åå°ç®¡ç†</h2><p>â‘ :  åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦å·</p>
<figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">~ python manage.py createsuperuser</span><br><span class="line">Username : anjhon</span><br><span class="line">Email address: anjhon@163.com</span><br><span class="line">Password:       # å¯†ç ä¸æ˜¾ç¤º</span><br><span class="line">Password (again): </span><br><span class="line">Superuser created successfully.</span><br></pre></td></tr></table></figure>

<p>â‘¡:  æ³¨å†Œæ¨¡å‹</p>
<figure class="highlight diff"><figcaption><span>polls/admin.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from django.contrib import admin</span><br><span class="line">from polls.models import Subject, Teacher</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class SubjectAdmin(admin.ModelAdmin):</span><br><span class="line">    list_display = ('nums', 'name', 'intro', 'is_hot')   # é»˜è®¤æ˜¾ç¤ºå­¦ç§‘å¯¹è±¡,è¯¥è¯­å¥å¯ä»¥æ˜¾ç¤ºå­¦ç§‘ç¼–å·,åç§°,ä»‹ç».</span><br><span class="line">    list_display_links = ('name', 'nums', )</span><br><span class="line">    search_fields = ('name', )   # å¯ä»¥æŒ‰åå­—æœç´¢</span><br><span class="line">    ordering = ('nums', )   # æ ¹æ®numsæ’å‡åº</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class TeacherAdmin(admin.ModelAdmin):</span><br><span class="line">    list_display = ('nums', 'name', 'sex', 'birth', 'intro', 'good_count', 'bad_count', 'subject')</span><br><span class="line">    search_fields = ('name', )</span><br><span class="line">    ordering = ('nums',)</span><br></pre></td></tr></table></figure>

<p>â‘¢: ç™»å½•ç®¡ç†å‘˜åå°</p>
<figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å¼€å¯æœåŠ¡å™¨</span><br><span class="line">~ python manage.py runserver</span><br><span class="line"># è®¿é—®</span><br><span class="line">http://127.0.0.1:8000/admin</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè¾“å…¥åˆšåˆšçš„è¶…çº§ç®¡ç†å‘˜çš„å¯†ç å°±èƒ½ç™»å½•äº†;ä¸è¿‡ç”±äºç•Œé¢å®åœ¨ä¸å¿ç›´è§†,æ‰€ä»¥æˆ‘å†³å®šç»™ä»–æ¢ä¸ªjetä¸»é¢˜!</p>
<ol>
<li><p>å®‰è£…jet</p>
<figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ pip install django-jet -i https://pypi.doubanio.com/simple</span><br></pre></td></tr></table></figure></li>
<li><p>æ·»åŠ åº”ç”¨</p>
<figure class="highlight diff"><figcaption><span>polls/settings.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line"><span class="addition">+   'jet',</span></span><br><span class="line">    'django.contrib.admin',</span><br><span class="line">    'django.contrib.auth',</span><br><span class="line">    'django.contrib.contenttypes',</span><br><span class="line">    'django.contrib.sessions',</span><br><span class="line">    'django.contrib.messages',</span><br><span class="line">    'django.contrib.staticfiles',</span><br><span class="line">    'polls',</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>æ³¨: jetè¦åŠ åˆ°æœ€å‰é¢,ä¸ç„¶Djangoä¼šå…ˆåŠ è½½è‡ªå¸¦çš„ä¸»é¢˜,è¿™æ ·å°±æ²¡ä»€ä¹ˆæ•ˆæœäº†</p>
</li>
<li><p>æ‰§è¡Œè¿ç§»ï¼š</p>
<figure class="highlight diff"><figcaption><span>Pycharmå†…çš„Terminal</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~ python manage.py migrate jet</span><br></pre></td></tr></table></figure></li>
<li><p>é…ç½®URL</p>
<figure class="highlight diff"><figcaption><span>polls/urls.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">urlpatterns = [</span><br><span class="line">    path('admin/', admin.site.urls),</span><br><span class="line"><span class="addition">+   path('jet/', include('jet.urls', 'jet')),</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>å¤§åŠŸå‘Šæˆ!</p>
</li>
</ol>
<p>è¿›å…¥åå°ä¹‹åå°±å¯ä»¥æ·»åŠ è€å¸ˆå’Œå­¦ç§‘çš„æ•°æ®äº†;<br>è‡³æ­¤,æ•°æ®å‡†å¤‡å®Œæˆ!</p>
<h2 id="4-ç½‘é¡µæˆå‹"><a href="#4-ç½‘é¡µæˆå‹" class="headerlink" title="4. ç½‘é¡µæˆå‹"></a>4. ç½‘é¡µæˆå‹</h2><p>â‘ : åŒæ ·çš„,å…ˆé…ç½®url</p>
<figure class="highlight diff"><figcaption><span>polls/urls.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">from django.conf import settings</span><br><span class="line">from django.conf.urls.static import static</span><br><span class="line">from django.contrib import admin</span><br><span class="line">from django.urls import path, include</span><br><span class="line">from polls.views import index, show_teachers, praise_or_criticize, \</span><br><span class="line">    login, get_captcha, logout</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    path('jet/', include('jet.urls', 'jet')),</span><br><span class="line">    path('admin/', admin.site.urls),</span><br><span class="line">    path('', index),</span><br><span class="line"><span class="addition">+   path('teachers/', show_teachers),   # æ•™å¸ˆä¿¡æ¯é¡µé¢</span></span><br><span class="line"><span class="addition">+   path('praise/', praise_or_criticize),   # å¥½è¯„</span></span><br><span class="line"><span class="addition">+   path('criticize/', praise_or_criticize),   # å·®è¯„</span></span><br><span class="line"><span class="addition">+   path('login/', login),   # ç™»å½•</span></span><br><span class="line"><span class="addition">+   path('logout/', logout),   # æ³¨é”€</span></span><br><span class="line"><span class="addition">+   path('captcha/', get_captcha),   # éªŒè¯ç </span></span><br><span class="line">] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span><br></pre></td></tr></table></figure>
<p>â‘¡: å†™è§†å›¾å‡½æ•°</p>
<figure class="highlight diff"><figcaption><span>app/views.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">from base64 import b64decode</span><br><span class="line">from django.http import JsonResponse, HttpResponse</span><br><span class="line">from django.shortcuts import render, redirect</span><br><span class="line">from polls.captcha import Captcha</span><br><span class="line">from polls.models import Subject, Teacher, User</span><br><span class="line">from polls.utils import random_text, to_md5_hex, check_username, check_password</span><br><span class="line"></span><br><span class="line">def index(request):</span><br><span class="line">    """é¦–é¡µï¼ˆè·å–æ‰€æœ‰å­¦ç§‘ï¼‰"""</span><br><span class="line">    queryset = Subject.objects.all()</span><br><span class="line">    context = &#123;</span><br><span class="line">        'subjects': queryset</span><br><span class="line">    &#125;</span><br><span class="line">    return render(request, 'subjects.html', context)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def show_teachers(request):</span><br><span class="line">    """æ˜¾ç¤ºæŒ‡å®šå­¦ç§‘çš„è€å¸ˆ"""</span><br><span class="line">    try:</span><br><span class="line">        sno = request.GET['sno']</span><br><span class="line">        subject = Subject.objects.get(no=sno)</span><br><span class="line">        queryset = Teacher.objects.filter(subject__no=sno)</span><br><span class="line">        context = &#123;</span><br><span class="line">            'subject': subject,</span><br><span class="line">            'teachers': queryset</span><br><span class="line">        &#125;</span><br><span class="line">        return render(request, 'teachers.html', context)</span><br><span class="line">    except (KeyError, ValueError, Subject.DoesNotExist):</span><br><span class="line">        return redirect('/')</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def praise_or_criticize(request):</span><br><span class="line">    """å¥½è¯„æˆ–å·®è¯„"""</span><br><span class="line">    if request.session.get('userid') is None:</span><br><span class="line">        data = &#123;'code': 10002, 'message': 'è¯·å…ˆç™»å½•'&#125;</span><br><span class="line">    else:</span><br><span class="line">        tno = request.GET.get('tno', '0')</span><br><span class="line">        try:</span><br><span class="line">            teacher = Teacher.objects.get(no=tno)</span><br><span class="line">            if request.path.startswith('/praise'):</span><br><span class="line">                teacher.good_count += 1</span><br><span class="line">            else:</span><br><span class="line">                teacher.bad_count += 1</span><br><span class="line">            teacher.save()</span><br><span class="line">            data = &#123;'code': 10000, 'message': 'æ“ä½œæˆåŠŸ'&#125;</span><br><span class="line">        except (ValueError, Teacher.DoesNotExist):</span><br><span class="line">            data = &#123;'code': 10001, 'message': 'æ“ä½œå¤±è´¥'&#125;</span><br><span class="line">    return JsonResponse(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def login(request):</span><br><span class="line">    """ç™»å½•"""</span><br><span class="line">    backurl = request.GET.get('backurl', '')</span><br><span class="line">    hint = ''</span><br><span class="line">    if request.method == 'POST':</span><br><span class="line">        # è·å–ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç </span><br><span class="line">        code_from_user = request.POST.get('captcha', '0').lower()</span><br><span class="line">        # è·å–ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç </span><br><span class="line">        code_from_serv = request.session.get('code', '1').lower()</span><br><span class="line">        # è‹¥ç”¨æˆ·éªŒè¯ç å’ŒæœåŠ¡å™¨éªŒè¯ç ç›¸åŒ,åˆ™è¿›å…¥ç™»å½•æµç¨‹</span><br><span class="line">        if code_from_user == code_from_serv:</span><br><span class="line">            # è·å–ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·å</span><br><span class="line">            username = request.POST.get('username', '')</span><br><span class="line">            # è·å–ç”¨æˆ·è¾“å…¥çš„å¯†ç </span><br><span class="line">            password = request.POST.get('password', '')</span><br><span class="line">            # æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç æ˜¯å¦å¤åˆè§„èŒƒ</span><br><span class="line">            if check_username(username) and check_password(password):</span><br><span class="line">                # ç”Ÿæˆå¯†ç æ‘˜è¦</span><br><span class="line">                password = to_md5_hex(password)</span><br><span class="line">                # ä»æ•°æ®åº“è·å–ç”¨æˆ·ä¿¡æ¯å¯¹è±¡ä¿å­˜åˆ°userä¸­</span><br><span class="line">                user = User.objects.filter(username=username, password=password).first()</span><br><span class="line"></span><br><span class="line">                if user:   # è‹¥åŒ¹é…æˆåŠŸ,å°†ç”¨æˆ·çš„ä¿¡æ¯ä¿å­˜åˆ°sessionå¯¹è±¡ä¸­,æ–¹ä¾¿cookieè¿æ¥</span><br><span class="line">                    # ç™»å½•æˆåŠŸåä¸ºäº†è®°ä½è¿™ä¸ªç™»å½•æˆåŠŸçš„ç”¨æˆ·</span><br><span class="line">                    # æˆ‘ä»¬å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯ä¿å­˜å’Œç”¨æˆ·ç›¸å…³çš„ä¿¡æ¯</span><br><span class="line">                    # æˆ‘ä»¬å¯ä»¥å°†è¿™äº›ä¿¡æ¯ä¿å­˜åœ¨Djangoæ¡†æ¶æä¾›çš„sessionå¯¹è±¡ä¸­</span><br><span class="line">                    request.session['userid'] = user.no</span><br><span class="line">                    request.session['username'] = user.username</span><br><span class="line">                    backurl = request.POST.get('backurl')</span><br><span class="line">                    if backurl:</span><br><span class="line">                        backurl = b64decode(backurl).decode()</span><br><span class="line">                    else:</span><br><span class="line">                        backurl = '/'</span><br><span class="line">                    return redirect(backurl)</span><br><span class="line">                else:</span><br><span class="line">                    hint = 'ç”¨æˆ·ç™»å½•ä¿¡æ¯é”™è¯¯!'</span><br><span class="line">            else:</span><br><span class="line">                hint = 'è¯·è¾“å…¥ç™»å½•ä¿¡æ¯!'</span><br><span class="line">        else:</span><br><span class="line">            hint = 'è¯·è¾“å…¥æ­£ç¡®çš„éªŒè¯ç !'</span><br><span class="line">    context = &#123;</span><br><span class="line">        'hint': hint,</span><br><span class="line">        'backurl': backurl</span><br><span class="line">    &#125;</span><br><span class="line">    return render(request, 'login.html', context)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def logout(request):</span><br><span class="line">    # æ¸…ç©ºsessionå¯¹è±¡ä¸­çš„æ•°æ®</span><br><span class="line">    request.session.flush()</span><br><span class="line">    # é‡å®šå‘åˆ°ä¸»é¡µé¢</span><br><span class="line">    return redirect('/')</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def get_captcha(request):</span><br><span class="line">    """è·å–éªŒè¯ç å›¾ç‰‡"""</span><br><span class="line">    code = random_text()</span><br><span class="line">    image_data = Captcha.instance().generate(code)</span><br><span class="line">    request.session['code'] = code</span><br><span class="line">    return HttpResponse(image_data, content_type='image/png')</span><br></pre></td></tr></table></figure>

<p>â‘¢: ç½‘é¡µæ¨¡æ¿<br>é¦–é¡µå­¦ç§‘é¡µ</p>
<figure class="highlight diff"><figcaption><span>templates/subjects.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;é¦–é¡µ&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            width: 920px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line">        .subject &#123;</span><br><span class="line">            margin: 20px 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .sname &#123;</span><br><span class="line">            font: bold 28px Arial;</span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            color: blue;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">        &#125;</span><br><span class="line">        .nav &#123;</span><br><span class="line">            float: right;</span><br><span class="line">            margin-top: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .nav+h2 &#123;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class="nav"&gt;</span><br><span class="line">        &#123;% if request.session.userid %&#125;</span><br><span class="line">        &#123;&#123; request.session.username &#125;&#125;</span><br><span class="line">        &lt;a href="/logout/"&gt;æ³¨é”€&lt;/a&gt;</span><br><span class="line">        &#123;% else %&#125;</span><br><span class="line">        &lt;a href="/login/"&gt;ç™»å½•&lt;/a&gt;&amp;nbsp;</span><br><span class="line">        &#123;% endif %&#125;</span><br><span class="line">        &lt;a href=""&gt;æ³¨å†Œ&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;æ‰€æœ‰å­¦ç§‘&lt;/h2&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &#123;% for subject in subjects %&#125;</span><br><span class="line">    &lt;div class="subject"&gt;</span><br><span class="line">        &lt;p class="sname"&gt;</span><br><span class="line">            &lt;a href="/teachers/?sno=&#123;&#123; subject.no &#125;&#125;"&gt;&#123;&#123; subject.name &#125;&#125;&lt;/a&gt;</span><br><span class="line">            &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;</span><br><span class="line">            &#123;% if subject.is_hot %&#125;</span><br><span class="line">            &lt;img src='/static/images/hot-icon-small.png'&gt;</span><br><span class="line">            &#123;% endif %&#125;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p&gt;&#123;&#123; subject.intro &#125;&#125;&lt;/p&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>æ•™å¸ˆä¿¡æ¯é¡µ</p>
<figure class="highlight diff"><figcaption><span>templates/teachers.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;è€å¸ˆä¿¡æ¯&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        body &#123;</span><br><span class="line">            width: 920px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line">        .teacher &#123;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">        .photo &#123;</span><br><span class="line">            margin-top: 20px;</span><br><span class="line">            width: 140px;</span><br><span class="line">            height: 140px;</span><br><span class="line">            border-radius: 70px 70px 70px 70px;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line">        .content &#123;</span><br><span class="line">            margin-left: 60px;</span><br><span class="line">            width: 580px;</span><br><span class="line">            float: left;</span><br><span class="line">        &#125;</span><br><span class="line">        .keyinfo &#123;</span><br><span class="line">            font: bold 18px Arial;</span><br><span class="line">        &#125;</span><br><span class="line">        .back &#123;</span><br><span class="line">            float: right;</span><br><span class="line">            margin-top: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .back&gt;a &#123;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            color: blue;</span><br><span class="line">        &#125;</span><br><span class="line">        .back+h2 &#123;</span><br><span class="line">            clear: both;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class="back"&gt;</span><br><span class="line">        &lt;a href="/"&gt;è¿”å›é¦–é¡µ&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; subject.name &#125;&#125;å­¦ç§‘è€å¸ˆä¿¡æ¯&lt;/h2&gt;</span><br><span class="line">    &lt;hr&gt;</span><br><span class="line">    &#123;% for teacher in teachers %&#125;</span><br><span class="line">    &lt;div class="teacher"&gt;</span><br><span class="line">        &lt;div class="photo"&gt;</span><br><span class="line">            &lt;img src="&#123;&#123; teacher.photo.url &#125;&#125;" width="140"&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class="content"&gt;</span><br><span class="line">            &lt;p class="keyinfo"&gt;</span><br><span class="line">                &#123;&#123; teacher.name &#125;&#125;&amp;nbsp;&amp;nbsp;</span><br><span class="line">                &#123;&#123; teacher.sex | yesno:"ç”·, å¥³" &#125;&#125;&amp;nbsp;&amp;nbsp;</span><br><span class="line">                &#123;&#123; teacher.birth &#125;&#125;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &#123;&#123; teacher.intro &#125;&#125;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p class="comment"&gt;</span><br><span class="line">                &lt;a href="/praise/?tno=&#123;&#123; teacher.no &#125;&#125;"&gt;å¥½è¯„&lt;/a&gt;ï¼ˆ&lt;span&gt;&#123;&#123; teacher.good_count &#125;&#125;&lt;/span&gt;ï¼‰&amp;nbsp;&amp;nbsp;</span><br><span class="line">                &lt;a href="/criticize/?tno=&#123;&#123; teacher.no &#125;&#125;"&gt;å·®è¯„&lt;/a&gt;ï¼ˆ&lt;span&gt;&#123;&#123; teacher.bad_count &#125;&#125;&lt;/span&gt;ï¼‰</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &#123;% endfor %&#125;</span><br><span class="line">    &lt;script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    // $()å‡½æ•°ä¸­çš„ç®­å¤´å‡½æ•°æ˜¯é¡µé¢åŠ è½½å®Œæˆä¹‹åè¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°</span><br><span class="line">    $(() =&gt; &#123;</span><br><span class="line">        let flag = true</span><br><span class="line">        // é€šè¿‡$(é€‰æ‹©å™¨)è·å–é¡µé¢å…ƒç´ ç»‘å®šç‚¹å‡»äº‹ä»¶</span><br><span class="line">        // onæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯äº‹ä»¶å ç¬¬äºŒä¸ªå‚æ•°æ˜¯äº‹ä»¶å›è°ƒå‡½æ•°</span><br><span class="line">        // äº‹ä»¶å›è°ƒå‡½æ•°çš„å‚æ•°evtæ˜¯ä»£è¡¨äº‹ä»¶çš„å¯¹è±¡</span><br><span class="line">        $('.comment&gt;a').on('click', (evt) =&gt; &#123;</span><br><span class="line">            // é˜»æ­¢äº‹ä»¶é»˜è®¤è¡Œä¸ºï¼ˆé¿å…ç›´æ¥åˆ·æ–°é¡µé¢ï¼‰</span><br><span class="line">            evt.preventDefault()</span><br><span class="line">            if (flag) &#123;</span><br><span class="line">                // å®ç°å‡½æ•°èŠ‚æµ</span><br><span class="line">                flag = false</span><br><span class="line">                setTimeout(() =&gt; &#123; flag = true &#125;, 2000)</span><br><span class="line">                // é€šè¿‡äº‹ä»¶å¯¹è±¡è·å–äº‹ä»¶æºå¹¶ç”±$å‡½æ•°è½¬æˆjQueryå¯¹è±¡</span><br><span class="line">                let anchor = $(evt.target)</span><br><span class="line">                // é€šè¿‡jQueryå¯¹è±¡çš„getJSONæ–¹æ³•å‘èµ·Ajaxè¯·æ±‚</span><br><span class="line">                // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„URL</span><br><span class="line">                // ç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚å®Œæˆä¹‹åè¦æ‰§è¡Œçš„å›è°ƒå‡½æ•°</span><br><span class="line">                $.getJSON(anchor.attr('href'), (json) =&gt; &#123;</span><br><span class="line">                    if (json.code == 10000) &#123; // æŠ•ç¥¨æˆåŠŸ</span><br><span class="line">                        // è·å–ä¸aæ ‡ç­¾ç›¸é‚»çš„spanæ ‡ç­¾</span><br><span class="line">                        let span = anchor.next()</span><br><span class="line">                        // å°†spanæ ‡ç­¾çš„å€¼åŠ 1å†å†™å›spanæ ‡ç­¾</span><br><span class="line">                        span.text(parseInt(span.text()) + 1)</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        alert(json.message)</span><br><span class="line">                        if (json.code == 10002) &#123;</span><br><span class="line">                            location.href = '/login/?backurl=' + btoa('/teachers/?sno=&#123;&#123; subject.no &#125;&#125;')</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                alert('æ“ä½œå¤ªé¢‘ç¹')</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>ç™»å½•é¡µ</p>
<figure class="highlight diff"><figcaption><span>templates/login.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang="en"&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset="UTF-8"&gt;</span><br><span class="line">    &lt;title&gt;ç”¨æˆ·ç™»å½•&lt;/title&gt;</span><br><span class="line">    &lt;style&gt;</span><br><span class="line">        #container &#123;</span><br><span class="line">            width: 920px;</span><br><span class="line">            margin: 0 auto;</span><br><span class="line">        &#125;</span><br><span class="line">        .input, form+a &#123;</span><br><span class="line">            margin: 30px 10px;</span><br><span class="line">            width: 400px;</span><br><span class="line">            height: 32px;</span><br><span class="line">        &#125;</span><br><span class="line">        .input&gt;input &#123;</span><br><span class="line">            border: none;</span><br><span class="line">            outline: none;</span><br><span class="line">            border-bottom: 1px dotted darkgray;</span><br><span class="line">            width: 180px;</span><br><span class="line">        &#125;</span><br><span class="line">        .input:last-child&gt;input &#123;</span><br><span class="line">            border: none;</span><br><span class="line">            background-color: red;</span><br><span class="line">            color: white;</span><br><span class="line">            width: 80px;</span><br><span class="line">            height: 25px;</span><br><span class="line">        &#125;</span><br><span class="line">        .input&gt;label &#123;</span><br><span class="line">            display: inline-block;</span><br><span class="line">            width: 80px;</span><br><span class="line">            text-align: right;</span><br><span class="line">        &#125;</span><br><span class="line">        .input:last-child &#123;</span><br><span class="line">            text-align: center;</span><br><span class="line">            border: none;</span><br><span class="line">            margin-left: -20px;</span><br><span class="line">        &#125;</span><br><span class="line">        .input&gt;img &#123;</span><br><span class="line">            vertical-align: middle;</span><br><span class="line">        &#125;</span><br><span class="line">        a &#123;</span><br><span class="line">            text-decoration: none;</span><br><span class="line">            color: blue;</span><br><span class="line">        &#125;</span><br><span class="line">        .hint &#123;</span><br><span class="line">            font-size: 12px;</span><br><span class="line">            color: red;</span><br><span class="line">            height: 20px;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div id="container"&gt;</span><br><span class="line">        &lt;h2&gt;ç”¨æˆ·ç™»å½•&lt;/h2&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;p class="hint"&gt;&#123;&#123; hint &#125;&#125;&lt;/p&gt;</span><br><span class="line">        &lt;form action="/login/?backurl=&#123;&#123; backurl &#125;&#125;" method="post"&gt;</span><br><span class="line">            &#123;% csrf_token %&#125;</span><br><span class="line">            &lt;div class="input"&gt;</span><br><span class="line">                &lt;label&gt;ç”¨æˆ·åï¼š&lt;/label&gt;</span><br><span class="line">                &lt;input type="text" name="username"&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class="input"&gt;</span><br><span class="line">                &lt;label&gt;å¯†ç ï¼š&lt;/label&gt;</span><br><span class="line">                &lt;input type="password" name="password"&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class="input"&gt;</span><br><span class="line">                &lt;label&gt;éªŒè¯ç ï¼š&lt;/label&gt;</span><br><span class="line">                &lt;input type="text" name="captcha"&gt;</span><br><span class="line">                &lt;img id="code" src="/captcha/" height="33"&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class="input"&gt;</span><br><span class="line">                &lt;input type="submit" value="ç™»å½•"&gt;</span><br><span class="line">                &lt;input type="reset" value="é‡ç½®"&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">        &lt;a href="/"&gt;è¿”å›é¦–é¡µ&lt;/a&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">    $(() =&gt; &#123;</span><br><span class="line">        $('#code').on('click', (evt) =&gt; &#123;</span><br><span class="line">            $(evt.target).attr('src', '/captcha/?' + Math.random())</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<p>é¡µé¢å¸ƒå±€å®Œæˆ!</p>
<p>â‘£:  è¡¥å……<br>åœ¨é¡¹ç›®ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹static, ä¸“é—¨ç”¨æ¥å­˜æ”¾é™æ€èµ„æº,åœ¨staticä¸‹åˆ›å»ºcss, js, imageæ–‡ä»¶å¤¹,åˆ†åˆ«ç”¨æ¥å­˜æ”¾æ ·å¼è¡¨, jsæ–‡ä»¶, å›¾ç‰‡èµ„æº<br>ä¸ºäº†è®©htmlæ–‡ä»¶èƒ½å¤Ÿæ‰¾åˆ°ä¿å­˜é™æ€èµ„æºçš„æ–‡ä»¶å¤¹ï¼Œè¿˜éœ€è¦ä¿®æ”¹Djangoé¡¹ç›®çš„é…ç½®æ–‡ä»¶settings.py</p>
<figure class="highlight diff"><figcaption><span>polls/settings.py</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+ STATICFILES_DIRS = [os.path.join(BASE_DIR, 'static'), ]</span></span><br><span class="line">  STATIC_URL = '/static/'</span><br></pre></td></tr></table></figure>
<p>æœ€ååœ¨ä½¿ç”¨æ—¶éœ€è¦åœ¨htmlæ–‡ä»¶ä¸­è¾ƒå‰çš„ä½ç½®åŠ å…¥ä»£ç </p>
<figure class="highlight diff"><figcaption><span>å¼•ç”¨æœ¬åœ°é™æ€æ–‡ä»¶</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line"><span class="addition">+&#123;% load staticfiles %&#125;</span></span><br><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;</span><br><span class="line">	&lt;meta charset="utf-8"&gt;</span><br><span class="line">	&lt;title&gt;&lt;/title&gt;</span><br><span class="line">	&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">	</span><br><span class="line">	&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-å†è¡¥å……ä¸€ç‚¹"><a href="#5-å†è¡¥å……ä¸€ç‚¹" class="headerlink" title="5. å†è¡¥å……ä¸€ç‚¹"></a>5. å†è¡¥å……ä¸€ç‚¹</h2><h3 id="cookieå’Œsessionçš„å…³ç³»"><a href="#cookieå’Œsessionçš„å…³ç³»" class="headerlink" title="cookieå’Œsessionçš„å…³ç³»"></a>cookieå’Œsessionçš„å…³ç³»</h3><p>HTTPåè®®æ˜¯æ— è¿æ¥æ— çŠ¶æ€åè®®   â€”&gt;<br>ä¸¤æ¬¡è¯·æ±‚ä¹‹é—´ä¸ä¼šä¿å­˜ç”¨æˆ·çš„ä»»ä½•æ•°æ®;<br>å†æ¬¡è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™æœåŠ¡å™¨æ— æ³•å¾—çŸ¥è¯·æ±‚æ˜¯æ¥è‡ªå“ªä¸ªç”¨æˆ·çš„è¯·æ±‚;<br>ä¸€èˆ¬æƒ…å†µä¸‹æœåŠ¡å™¨åº”ç”¨éƒ½éœ€è¦è®°ä½ç”¨æˆ·æ¥ä¸ºç”¨æˆ·æä¾›æ›´å¥½çš„æœåŠ¡;<br>å¦‚æœå¸Œæœ›æœåŠ¡å™¨è®°ä½ç”¨æˆ·å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä¸‰ç§è¾…åŠ©æ–¹å¼:</p>
<ol>
<li>URLé‡å†™<a href="http://www.baidu.com/?uid=xxxxxx" target="_blank" rel="noopener">http://www.baidu.com/?uid=xxxxxx</a></li>
<li>éšè—åŸŸ(éšå¼è¡¨å•åŸŸ)   â€”&gt;   åŸ‹ç‚¹<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form&gt;</span><br><span class="line">    &lt;<span class="keyword">input</span> <span class="keyword">type</span>="hidden"<span class="type">name</span>="uid"<span class="keyword">value</span>="xxxxxx"&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure></li>
<li>æµè§ˆå™¨æœ¬åœ°å­˜å‚¨<br> ~ cookie   â€”&gt;   æµè§ˆå™¨ä¸­çš„é›¶é£Ÿæ–‡ä»¶,å¯ä»¥ä¿å­˜é”®å€¼å¯¹;cookieä¸­çš„æ•°æ®åœ¨å‘èµ·HTTPè¯·æ±‚æ—¶ä¼šè‡ªåŠ¨åŠ è½½åˆ°è¯·æ±‚å¤´ä¸­<br> ~ window.localStorage / window.sessionStorage</li>
</ol>
<p>request.session   â€”&gt;   å­˜å‚¨ç™»å½•æˆåŠŸçš„ç”¨æˆ·ä¿¡æ¯,sessionæ˜¯æœåŠ¡å™¨å†…çš„ä¸€ä¸ªå¯¹è±¡<br>cookie   -â€”-&gt;   ç”¨æˆ·æµè§ˆå™¨ä¸´æ—¶æ–‡ä»¶   -â€”-&gt;   cookieä¸­ä¿å­˜äº†sessionçš„ID</p>
<h3 id="ç¼–ç å°çŸ¥è¯†"><a href="#ç¼–ç å°çŸ¥è¯†" class="headerlink" title="ç¼–ç å°çŸ¥è¯†"></a>ç¼–ç å°çŸ¥è¯†</h3><p>é€šå¸¸å¦‚æœä¸€æ ·ä¸œè¥¿éœ€è¦ç¼–ç ï¼Œè¯´æ˜è¿™æ ·ä¸œè¥¿å¹¶ä¸é€‚åˆä¼ è¾“ã€‚åŸå› å¤šç§å¤šæ ·ï¼Œå¦‚Sizeè¿‡å¤§ï¼ŒåŒ…å«éšç§æ•°æ®ï¼Œå¯¹äºUrlæ¥è¯´ï¼Œä¹‹æ‰€ä»¥è¦è¿›è¡Œç¼–ç ï¼Œæ˜¯å› ä¸ºUrlä¸­æœ‰äº›å­—ç¬¦ä¼šå¼•èµ·æ­§ä¹‰ã€‚</p>
<h4 id="BASE64ç¼–ç "><a href="#BASE64ç¼–ç " class="headerlink" title="BASE64ç¼–ç "></a>BASE64ç¼–ç </h4><p>ç”¨64ä¸ªæ–‡å­—ç¬¦å·è¡¨ç¤ºä»»æ„äºŒè¿›åˆ¶æ•°æ®<br>åŸç†ï¼šå°†åŸæ¥çš„ä¸‰å­—èŠ‚æ¯6ä¸ªæ¯”ç‰¹ä¸€ç»„å˜æˆå››ä¸ªå­—èŠ‚<br>ç”¨A-Zã€a-zã€0-9ã€+å’Œ/ä¸€å…±64ä¸ªå­—ç¬¦æ¥ä»£è¡¨ä¸€ä¸ªå­—èŠ‚</p>
<figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="symbol">from</span> <span class="keyword">base64 </span><span class="meta">import</span> <span class="keyword">b64encode, </span><span class="keyword">b64decode</span></span><br><span class="line"><span class="keyword">	</span># ç¼–ç é’±éœ€è¦å…ˆè½¬ä¸ºå­—èŠ‚</span><br><span class="line">	ç¼–ç /è§£ç ï¼š<span class="keyword">b64encode/b64decode</span></span><br><span class="line"><span class="keyword">ä»£ç æ¼”ç¤ºï¼šbackurl </span>= <span class="keyword">b64decode(backurl).decode() </span><span class="meta">if</span> <span class="keyword">backurl </span><span class="meta">else</span> <span class="string">'/'</span></span><br></pre></td></tr></table></figure>
<h4 id="ç™¾åˆ†å·ç¼–ç -Urlç¼–ç "><a href="#ç™¾åˆ†å·ç¼–ç -Urlç¼–ç " class="headerlink" title="ç™¾åˆ†å·ç¼–ç (Urlç¼–ç )"></a>ç™¾åˆ†å·ç¼–ç (Urlç¼–ç )</h4><p>ä½¿ç”¨%ç™¾åˆ†å·åŠ ä¸Šä¸¤ä½çš„å­—ç¬¦(åå…­è¿›åˆ¶0~F)ã€‚URLç¼–ç é»˜è®¤ä½¿ç”¨çš„å­—ç¬¦é›†æ˜¯US-ASCIIã€‚ä¾‹å¦‚ a åœ¨US-ASCIIç ä¸­å¯¹åº”çš„å­—èŠ‚æ˜¯0x61ï¼Œé‚£ä¹ˆURLç¼–ç ä¹‹åå¾—åˆ°çš„å°± æ˜¯%61ï¼Œæˆ‘ä»¬åœ¨åœ°å€æ ä¸Šè¾“å…¥;åˆå¦‚@ç¬¦å·åœ¨ASCIIå­—ç¬¦é›†ä¸­å¯¹åº”çš„å­—èŠ‚ä¸º0x40ï¼Œç»è¿‡URLç¼–ç ä¹‹åå¾—åˆ°çš„æ˜¯%40ã€‚</p>
<h4 id="å¸¸ç”¨çŸ¥è¯†ç‚¹"><a href="#å¸¸ç”¨çŸ¥è¯†ç‚¹" class="headerlink" title="å¸¸ç”¨çŸ¥è¯†ç‚¹"></a>å¸¸ç”¨çŸ¥è¯†ç‚¹</h4><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver   <span class="comment">---&gt;   è¿è¡ŒdjangoæœåŠ¡å™¨</span></span><br><span class="line">python manage.py createsuperuser   <span class="comment">---&gt;   åˆ›å»ºè¶…çº§ç®¡ç†å‘˜è´¦å·</span></span><br><span class="line">python manage.py makemigrations polls   <span class="comment">---&gt;  è¿ç§»æ–‡ä»¶</span></span><br><span class="line">python manage.py migrate   <span class="comment">---&gt;  æ‰§è¡Œè¿ç§»</span></span><br><span class="line"></span><br><span class="line">Teacher.objects.<span class="keyword">filter</span>(nums=tnums).first()   <span class="comment">---&gt;   è·å–numså’Œtnumsç›¸ç­‰çš„æ•™å¸ˆçš„æ‰€æœ‰ä¿¡æ¯</span></span><br><span class="line"></span><br><span class="line">request.path   <span class="comment">---&gt;   å¾—åˆ°è¯·æ±‚è·¯å¾„</span></span><br><span class="line">request.<span class="keyword">method</span>   <span class="comment">---&gt;   å¾—åˆ°è¯·æ±‚æ–¹æ³•</span></span><br><span class="line">request.POST.<span class="keyword">get</span>(<span class="string">'username'</span>, <span class="string">''</span>)   <span class="comment">---&gt;   è·å–postè¯·æ±‚æä¾›çš„usernameå¯¹åº”çš„å€¼,è‹¥æ²¡æœ‰usernameå¯¹åº”çš„å€¼åˆ™è·å–ç©ºä¸²</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> JsonResponse(data)   <span class="comment">---&gt;   ç›´æ¥è¿”å›jsonæ ¼å¼çš„æ•°æ®</span></span><br><span class="line">render(request, )   <span class="comment">---&gt;   æ¸²æŸ“é¡µé¢,å¿…å®šæœ‰requestå‚æ•°</span></span><br><span class="line">redirect()   <span class="comment">---&gt;   é¡µé¢é‡å®šå‘</span></span><br><span class="line"></span><br><span class="line">pip install -r requirements.txt   <span class="comment">---&gt;   æ ¹æ®ä¾èµ–é¡¹æ–‡ä»¶å®‰è£…ä¾èµ–</span></span><br><span class="line">pip <span class="keyword">freeze</span> &gt; requirements.txt   <span class="comment">---&gt;    é‡å†™ä¾èµ–é¡¹æ¸…å•</span></span><br></pre></td></tr></table></figure>


<h2 id="6-æœ€åå°ç»“"><a href="#6-æœ€åå°ç»“" class="headerlink" title="6. æœ€åå°ç»“"></a>6. æœ€åå°ç»“</h2><h3 id="é¡¹ç›®æµç¨‹"><a href="#é¡¹ç›®æµç¨‹" class="headerlink" title="é¡¹ç›®æµç¨‹"></a>é¡¹ç›®æµç¨‹</h3><p>django-admin startproject é¡¹ç›®åç§°   â€”&gt;   åˆ›å»ºé¡¹ç›®<br>git init   â€”&gt;   å°†é¡¹ç›®æ–‡ä»¶å¤¹åˆå§‹åŒ–æˆgitä»“åº“<br>vim .gitignore   â€”&gt;   åˆ›å»º.gitignoreæ–‡ä»¶,å°†ä¸è¿›è¡Œç‰ˆæœ¬æ§åˆ¶çš„æ–‡ä»¶åæ”¾è¿›å»,<br>gitignore.io   â€”&gt;   ç‰ˆæœ¬å¿½ç•¥æ–‡ä»¶ç”Ÿæˆç½‘ç«™<br>vim requirements.txt   â€”&gt;   åˆ›å»ºé¡¹ç›®ä¾èµ–é¡¹æ–‡ä»¶</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">åŠ å…¥é¡¹ç›®éœ€è¦çš„ä¾èµ–é¡¹</span><br><span class="line"><span class="attribute">Django</span>==2.2.9</span><br><span class="line"><span class="attribute">django-jet</span>==1.0.8</span><br><span class="line"><span class="attribute">django-redis</span>==4.11.0</span><br><span class="line"><span class="attribute">mysqlclient</span>==1.4.6</span><br><span class="line"><span class="attribute">pytz</span>==2019.3</span><br><span class="line"><span class="attribute">redis</span>==3.3.11</span><br><span class="line"><span class="attribute">sqlparse</span>==0.3.0</span><br></pre></td></tr></table></figure>

<h3 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h3><pre><code>git add .
git status
git commit -m &apos;é¡¹ç›®åˆå§‹ç‰ˆæœ¬&apos;
git status
git log
git tag v0.1
git remote add origin git@gitee.com:anjhon1994/djangocase.git   # åœ°å€å…³è”
git remote remove origin   # å–æ¶ˆå…³è”
rm -rf .git   # å–æ¶ˆä»“åº“åˆå§‹åŒ–
git push -u origin master   # æ¨é€
git remote -v   # æŸ¥çœ‹è¿œç«¯ä»“åº“çš„åœ°å€</code></pre><br>
<hr>



<p>ğŸŒç›¸å…³æ–‡æ¡£è¿æ¥:<br>    <a href="https://gitee.com/anjhon1994/Django1906" target="_blank" rel="noopener">ç‚¹å‡»ä¸‹è½½æœ¬æ–‡å®Œæ•´ä»£ç </a><br>    <a href="https://developer.mozilla.org/zh-CN/docs/learn/Server-side/Django/Introduction" target="_blank" rel="noopener">MDN-Djangoä»‹ç»</a><br>    <a href="https://github.com/jackfrued/Python-100-Days/blob/master/Day91-100/95.%E4%BD%BF%E7%94%A8Django%E5%BC%80%E5%8F%91%E5%95%86%E4%B8%9A%E9%A1%B9%E7%9B%AE.md" target="_blank" rel="noopener">å¤§ä½¬è¯¦ç»†æ•™ç¨‹</a></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="/projects_url">é¡¹ç›®</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#ä¸€ä¸¶Djangoç®€è¿°"><span class="toc-number">1.</span> <span class="toc-text">ä¸€ä¸¶Djangoç®€è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹"><span class="toc-number">1.1.</span> <span class="toc-text">Djangoæ¡†æ¶åŸºæœ¬å·¥ä½œæµç¨‹</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ"><span class="toc-number">2.</span> <span class="toc-text">äºŒä¸¶Djangoç®€å•é¡µé¢ç”Ÿæˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®"><span class="toc-number">2.1.</span> <span class="toc-text">1. åˆ›å»ºä¸€ä¸ªDjangoé¡¹ç›®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-ç®€å•çš„æ–‡ä»¶é…ç½®"><span class="toc-number">2.2.</span> <span class="toc-text">2. ç®€å•çš„æ–‡ä»¶é…ç½®</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¾ç½®è¯­è¨€æ—¶åŒº"><span class="toc-number">2.2.1.</span> <span class="toc-text">è®¾ç½®è¯­è¨€æ—¶åŒº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„"><span class="toc-number">2.2.2.</span> <span class="toc-text">è®¾ç½®tamplatesæ–‡ä»¶å¤¹è·¯å¾„</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-åˆ›å»ºDjangoåº”ç”¨"><span class="toc-number">2.3.</span> <span class="toc-text">3. åˆ›å»ºDjangoåº”ç”¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢"><span class="toc-number">2.4.</span> <span class="toc-text">4. è¦æ€æ ·è‡ªå®šä¹‰ä¸€ä¸ªé¡µé¢å‘¢?</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ"><span class="toc-number">3.</span> <span class="toc-text">ä¸‰ä¸¶Djangoåˆ¶ä½œç®€å•çš„é€‰è¯¾ç³»ç»Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-ç¯å¢ƒå‡†å¤‡"><span class="toc-number">3.1.</span> <span class="toc-text">1.  ç¯å¢ƒå‡†å¤‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-åˆ›å»ºæ•°æ®æ¨¡å‹"><span class="toc-number">3.2.</span> <span class="toc-text">2. åˆ›å»ºæ•°æ®æ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#åˆ›å»ºæ•°æ®æ¨¡å‹"><span class="toc-number">3.2.1.</span> <span class="toc-text">åˆ›å»ºæ•°æ®æ¨¡å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼"><span class="toc-number">3.2.2.</span> <span class="toc-text">å°†æ¨¡å‹å˜æˆæ•°æ®åº“å†…çš„è¡¨æ ¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¿œç«¯æ•°æ®åº“è®¾ç½®"><span class="toc-number">3.2.3.</span> <span class="toc-text">è¿œç«¯æ•°æ®åº“è®¾ç½®</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-åå°ç®¡ç†"><span class="toc-number">3.3.</span> <span class="toc-text">3. åå°ç®¡ç†</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ç½‘é¡µæˆå‹"><span class="toc-number">3.4.</span> <span class="toc-text">4. ç½‘é¡µæˆå‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-å†è¡¥å……ä¸€ç‚¹"><span class="toc-number">3.5.</span> <span class="toc-text">5. å†è¡¥å……ä¸€ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#cookieå’Œsessionçš„å…³ç³»"><span class="toc-number">3.5.1.</span> <span class="toc-text">cookieå’Œsessionçš„å…³ç³»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç¼–ç å°çŸ¥è¯†"><span class="toc-number">3.5.2.</span> <span class="toc-text">ç¼–ç å°çŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#BASE64ç¼–ç "><span class="toc-number">3.5.2.1.</span> <span class="toc-text">BASE64ç¼–ç </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ç™¾åˆ†å·ç¼–ç -Urlç¼–ç "><span class="toc-number">3.5.2.2.</span> <span class="toc-text">ç™¾åˆ†å·ç¼–ç (Urlç¼–ç )</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¸¸ç”¨çŸ¥è¯†ç‚¹"><span class="toc-number">3.5.2.3.</span> <span class="toc-text">å¸¸ç”¨çŸ¥è¯†ç‚¹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-æœ€åå°ç»“"><span class="toc-number">3.6.</span> <span class="toc-text">6. æœ€åå°ç»“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#é¡¹ç›®æµç¨‹"><span class="toc-number">3.6.1.</span> <span class="toc-text">é¡¹ç›®æµç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç‰ˆæœ¬æ§åˆ¶"><span class="toc-number">3.6.2.</span> <span class="toc-text">ç‰ˆæœ¬æ§åˆ¶</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/" target="_blank" rel="noopener"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&text=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&is_video=false&description=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ&body=Check out this article: https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&title=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&name=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ&description=&lt;p&gt;Djangoæ˜¯é«˜æ°´å‡†çš„Pythonç¼–ç¨‹è¯­è¨€é©±åŠ¨çš„ä¸€ä¸ªå¼€æºæ¡†æ¶&lt;/p&gt;" target="_blank" rel="noopener"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://news.ycombinator.com/submitlink?u=https://anjhon1994.github.io/2020/01/05/Django%E5%85%A5%E9%97%A8%E4%B9%8B%E9%80%89%E8%AF%BE%E7%B3%BB%E7%BB%9F/&t=Djangoå…¥é—¨ä¹‹é€‰è¯¾ç³»ç»Ÿ" target="_blank" rel="noopener"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2020 Anjhon
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">é¦–é¡µ</a></li>
         
          <li><a href="/about/">å…³äº</a></li>
         
          <li><a href="/archives/">å½’æ¡£</a></li>
         
          <li><a href="/projects_url">é¡¹ç›®</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸ!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/ Relative)","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"right","width":180,"height":350},"mobile":{"show":false},"react":{"opacityDefault":0.7}});</script></body>
</html>
